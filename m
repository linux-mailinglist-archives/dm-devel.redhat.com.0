Return-Path: <dm-devel-bounces@redhat.com>
X-Original-To: lists+dm-devel@lfdr.de
Delivered-To: lists+dm-devel@lfdr.de
Received: from us-smtp-delivery-124.mimecast.com (us-smtp-delivery-124.mimecast.com [170.10.129.124])
	by mail.lfdr.de (Postfix) with ESMTPS id A1B10778D64
	for <lists+dm-devel@lfdr.de>; Fri, 11 Aug 2023 13:20:39 +0200 (CEST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
	s=mimecast20190719; t=1691752838;
	h=from:from:sender:sender:reply-to:subject:subject:date:date:
	 message-id:message-id:to:to:cc:cc:mime-version:mime-version:
	 content-type:content-type:
	 content-transfer-encoding:content-transfer-encoding:
	 in-reply-to:in-reply-to:references:references:list-id:list-help:
	 list-unsubscribe:list-subscribe:list-post;
	bh=OjmVJ44IwAU55UxjXkrqOpMLqfJx5LvNHWaeekxqy3s=;
	b=R9jr/rd6f9PomYVN6qwm8uVM9zAkG/KPupuboanJ9infeS5WQ0okuldLt1B4hdG6PkgdC7
	tSQ9rFRUAHGwtyAujwVwz7M76ZA1DMFd+5pvBquelp3Mieerm3P6+8D4mS2qS6LA3as/2P
	5OVjaHh560X8NNhtly9fjfTfRhxEqls=
Received: from mimecast-mx02.redhat.com (mimecast-mx02.redhat.com
 [66.187.233.88]) by relay.mimecast.com with ESMTP with STARTTLS
 (version=TLSv1.2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 us-mta-63-p_3p6JS8NuKzm5lEkNr7GQ-1; Fri, 11 Aug 2023 07:20:36 -0400
X-MC-Unique: p_3p6JS8NuKzm5lEkNr7GQ-1
Received: from smtp.corp.redhat.com (int-mx09.intmail.prod.int.rdu2.redhat.com [10.11.54.9])
	(using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mimecast-mx02.redhat.com (Postfix) with ESMTPS id 5DC388564F0;
	Fri, 11 Aug 2023 11:20:33 +0000 (UTC)
Received: from mm-prod-listman-01.mail-001.prod.us-east-1.aws.redhat.com (mm-prod-listman-01.mail-001.prod.us-east-1.aws.redhat.com [10.30.29.100])
	by smtp.corp.redhat.com (Postfix) with ESMTP id 44449492C3E;
	Fri, 11 Aug 2023 11:20:33 +0000 (UTC)
Received: from mm-prod-listman-01.mail-001.prod.us-east-1.aws.redhat.com (localhost [IPv6:::1])
	by mm-prod-listman-01.mail-001.prod.us-east-1.aws.redhat.com (Postfix) with ESMTP id 1F83D19465B2;
	Fri, 11 Aug 2023 11:20:33 +0000 (UTC)
X-Original-To: dm-devel@listman.corp.redhat.com
Delivered-To: dm-devel@listman.corp.redhat.com
Received: from smtp.corp.redhat.com (int-mx03.intmail.prod.int.rdu2.redhat.com
 [10.11.54.3])
 by mm-prod-listman-01.mail-001.prod.us-east-1.aws.redhat.com (Postfix) with
 ESMTP id B937A1946588
 for <dm-devel@listman.corp.redhat.com>; Fri, 11 Aug 2023 11:20:31 +0000 (UTC)
Received: by smtp.corp.redhat.com (Postfix)
 id A6D901121314; Fri, 11 Aug 2023 11:20:31 +0000 (UTC)
Delivered-To: dm-devel@redhat.com
Received: from mimecast-mx02.redhat.com
 (mimecast07.extmail.prod.ext.rdu2.redhat.com [10.11.55.23])
 by smtp.corp.redhat.com (Postfix) with ESMTPS id 9D7901121318
 for <dm-devel@redhat.com>; Fri, 11 Aug 2023 11:20:31 +0000 (UTC)
Received: from us-smtp-1.mimecast.com (us-smtp-delivery-1.mimecast.com
 [205.139.110.120])
 (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
 (No client certificate requested)
 by mimecast-mx02.redhat.com (Postfix) with ESMTPS id 7A7593C0F697
 for <dm-devel@redhat.com>; Fri, 11 Aug 2023 11:20:31 +0000 (UTC)
Received: from mailout3.samsung.com (mailout3.samsung.com [203.254.224.33])
 by relay.mimecast.com with ESMTP with STARTTLS (version=TLSv1.2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 us-mta-426-LgU6BEwhOmi_rXO46O8mfA-1; Fri, 11 Aug 2023 07:20:29 -0400
X-MC-Unique: LgU6BEwhOmi_rXO46O8mfA-1
Received: from epcas5p2.samsung.com (unknown [182.195.41.40])
 by mailout3.samsung.com (KnoxPortal) with ESMTP id
 20230811112026epoutp039da84f35e373c48af0f41252632c8da0~6UDtvJVI50704807048epoutp03z
 for <dm-devel@redhat.com>; Fri, 11 Aug 2023 11:20:26 +0000 (GMT)
DKIM-Filter: OpenDKIM Filter v2.11.0 mailout3.samsung.com
 20230811112026epoutp039da84f35e373c48af0f41252632c8da0~6UDtvJVI50704807048epoutp03z
Received: from epsnrtp4.localdomain (unknown [182.195.42.165]) by
 epcas5p1.samsung.com (KnoxPortal) with ESMTP id
 20230811112025epcas5p15a62090dc6b698757b644199b1e0f6f4~6UDtKwger1521915219epcas5p1L;
 Fri, 11 Aug 2023 11:20:25 +0000 (GMT)
Received: from epsmges5p1new.samsung.com (unknown [182.195.38.177]) by
 epsnrtp4.localdomain (Postfix) with ESMTP id 4RMhD81zfFz4x9Pv; Fri, 11 Aug
 2023 11:20:24 +0000 (GMT)
Received: from epcas5p2.samsung.com ( [182.195.41.40]) by
 epsmges5p1new.samsung.com (Symantec Messaging Gateway) with SMTP id
 92.7D.55522.87916D46; Fri, 11 Aug 2023 20:20:24 +0900 (KST)
Received: from epsmtrp1.samsung.com (unknown [182.195.40.13]) by
 epcas5p4.samsung.com (KnoxPortal) with ESMTPA id
 20230811105745epcas5p451c58384792038c13e9891fb2680050b~6Tv6X8lr02061520615epcas5p43;
 Fri, 11 Aug 2023 10:57:45 +0000 (GMT)
Received: from epsmgms1p2new.samsung.com (unknown [182.195.42.42]) by
 epsmtrp1.samsung.com (KnoxPortal) with ESMTP id
 20230811105745epsmtrp1b4f6590d7b9a00ac35516901ce339344~6Tv6W8ZrF0371503715epsmtrp1a;
 Fri, 11 Aug 2023 10:57:45 +0000 (GMT)
X-AuditID: b6c32a49-419ff7000000d8e2-f5-64d619783b61
Received: from epsmtip2.samsung.com ( [182.195.34.31]) by
 epsmgms1p2new.samsung.com (Symantec Messaging Gateway) with SMTP id
 60.11.30535.92416D46; Fri, 11 Aug 2023 19:57:45 +0900 (KST)
Received: from green245.sa.corp.samsungelectronics.net (unknown
 [107.99.41.245]) by epsmtip2.samsung.com (KnoxPortal) with ESMTPA id
 20230811105740epsmtip24f524394f030b1378699f705026e5d1a~6Tv2OJhKW1206312063epsmtip2n;
 Fri, 11 Aug 2023 10:57:40 +0000 (GMT)
From: Nitesh Shetty <nj.shetty@samsung.com>
To: Jens Axboe <axboe@kernel.dk>, Jonathan Corbet <corbet@lwn.net>, Alasdair
 Kergon <agk@redhat.com>, Mike Snitzer <snitzer@kernel.org>,
 dm-devel@redhat.com, Keith Busch <kbusch@kernel.org>, Christoph Hellwig
 <hch@lst.de>, Sagi Grimberg <sagi@grimberg.me>, Chaitanya Kulkarni
 <kch@nvidia.com>, Alexander Viro <viro@zeniv.linux.org.uk>, Christian
 Brauner <brauner@kernel.org>
Date: Fri, 11 Aug 2023 16:22:50 +0530
Message-Id: <20230811105300.15889-8-nj.shetty@samsung.com>
In-Reply-To: <20230811105300.15889-1-nj.shetty@samsung.com>
MIME-Version: 1.0
X-Brightmail-Tracker: H4sIAAAAAAAAA01TfVCTdRzn9zzj2QCnD4jnD4qaQ04mDJgN/IEsoDx7av3BhWcoXDTZ0+AY
 224vqF0vIO94wgBNmxmYFg2Il2kciCRChsKh1xACCuICDJq8d3AeKTGfUf73+X6+38/39b4c
 3COH7c1JVelprUqm5BOurKZOgb/wuNeAPKSwnoPqu3/C0UnjExzVjJQQyNa5CNBEez5AYzej
 UNvsBWc01N6CIXPNbQyN/7bERrfXZghU1jEA0GS/CUNtwwHoUt4VFrrRdpeF+q5/QaCKbybZ
 qKrrKYYGjZMANa1W4KjONsdCd4ZfQPefdDlHQ+r+aCOL6us1UJbqQoK6euVTqnUok6AuF5c7
 U6ezZwlqYXKYRc390E9QxdeqAbVkeYmyTMxgsZuOpEWm0DI5reXRqmS1PFWlkPClcUmvJ4WG
 hYiEonC0l89TydJpCX//27HCA6nK9cn5vAyZ0rBOxcp0On7wq5FatUFP81LUOr2ET2vkSo1Y
 E6STpesMKkWQitZHiEJC9oSuB76fltJYYyM0o9LjpTWfgUywICkCLhxIiuHKSDdWBFw5HmQr
 gD//YWMxxiKA1pFCwBjLAJ5fMBIbknONN3DG0QbgpfEChz4Xg/W1RnYR4HAIMgD2rHHsvCeZ
 icOG1svArsZJMw7zb/rZ8VYyHBpXrmJ2zCL94OPaMbYdc8kI2FCWBex5IBkMS353t9Mu5D44
 Z7ESTIg7vPv5BItJ+TLM/v7Cs4YgWeUC83Om2Eyn++Hsw2UWg7fCv7quOXhvOF2S58DHoPnM
 twQjzgHQ9IsJMI4omNtdgtubwEkBrL8ezNA+8Gx3HcYU3gxPr05gDM+FzV9uYF9YW1/p2JYX
 HFjJcmAKPuh+5FhpMYBfDZUTRsAzPTeQ6bmBTP+XrgR4NfCiNbp0Ba0L1YhU9LH/zpysTreA
 Z++w+81mMDI2H9QBMA7oAJCD8z25kjir3IMrl534kNaqk7QGJa3rAKHrCy/Fvbclq9f/SaVP
 EonDQ8RhYWHi8FfCRPztXFvuRbkHqZDp6TSa1tDaDR3GcfHOxEKn2xM+2iVIiMl2WpWpM04s
 v3Voj49526bAqN6zbu/FmeNn438dt2rLB01uDxSJqXeOSqWHg3yJj/ufOiW+e2vB32Pw8dy0
 dMfOSDa965z1x1PNA32Cus0Hwd7ARpXPYun2UVPMP28ECngByYZO4ZKt5euoR4SwZ36oalCg
 uJiXJbN62nrxUzuph/6InsQEza+dvLWa8M4Z18q1Qy7fzayYznO78uVOFUlb9MrU6M0qeVlM
 T/50fHPTwCdzLRHAfYeb0wzWajl45APJPY1z64tTpWk5fx4o6D0svmeOliQ2bimY2DdKZdRJ
 p4RT/AYnbX9e7rBf199H5/044b5FPQ39fJYuRSbajWt1sn8BmBDGp5cEAAA=
X-Brightmail-Tracker: H4sIAAAAAAAAA02Ra1BMYRiA5zvn7NnTUTptzfgqo7GY2MbmNnxSacwYx8hg+KN+ZLWnwm7W
 7uayGCWTaYesapgu7tmoFe1WpIvVXYSxmGrYXWzMWNuGISYrjsbw73mf93m/Px+Fix4SYdS2
 TC2nzpQpxCRNNLSLI+bOCXkun3fLFIiu93bh6LDBh6PqlydI5G7/BJDLehQg553lqGW4TIAG
 rI0YulrdiaE3Lz4LUee4h0SFbc8BGnpWiqGWwSh0Ia+CQM0t9whku11OonPGISGq7P6JoX7D
 EEANY+dwVOP2EqhnMBw98nULEiD7yF5LsLa+LNZclU+ylopDbNNANsleKigSsMdzh0n249Ag
 wXpbn5FsQV0VYD+bp7Fmlwdb759Ex8o5xbbdnDo6fgudUVvtJlX2NXtPVp8C2eBjnB74UZBZ
 BE/XNuN6QFEipgnAUcWEDoVGXwc+wcHw6s93Qj2gfye5GOz2OP/0JBMF749TvA9h9DjMbxwm
 +AFn6nHY4RgF/HUwsxQaRi0YzwQzC343OYU8BzAx8EZhDuAfgkw0POEI4rUfswx6zU9InkW/
 kxHjXTCRB8F7JS6Cz3EmEl4/K+I1zkTA3Poy3ACCSv+rSv9Vpf9V5wFeBUI5lUaZrtTMVy3I
 5PZINTKlJiszXZq6U2kGf75cIrkFmqtGpG0Ao0AbgBQuDgmI2/hELgqQy/bpOPXOFHWWgtO0
 gXCKEE8J+Oo+Lhcx6TItt4PjVJz67xaj/MKysQIJkdWRQhf2TY7WDfQlmw4mWPovRPnXHRoe
 S11cHHlHkiwM3miHCavSlsz4kWE51Vt2oMlp6JmunbQd++IxFXWN0zY6tNUe23jTf67XUvdl
 17cSry88sEKfp7Yf2fxKfbl4iU6vtGiDnz6It461nw/7wDlm396T6NwU5n5v7H+ZU7K1KI9+
 60i8fPF1zqyZaQs2JO9vjbcpXGnLlo/Q446Um2eP5b1ZK90sXbG+5Eg4d2n17oRUPCSy8mtN
 XG+Ss3Pdg87YKNWZi8YY3cokX2yK8fG1Llu+y5uYU7zwfqKuxb26MqLHWmndCsfq66deEQRG
 C/SemIYacbno8CeTVkxoMmTzJbhaI/sF1dTTHWEDAAA=
X-CMS-MailID: 20230811105745epcas5p451c58384792038c13e9891fb2680050b
X-Msg-Generator: CA
X-Sendblock-Type: REQ_APPROVE
CMS-TYPE: 105P
DLP-Filter: Pass
X-CFilter-Loop: Reflected
X-CMS-RootMailID: 20230811105745epcas5p451c58384792038c13e9891fb2680050b
References: <20230811105300.15889-1-nj.shetty@samsung.com>
 <CGME20230811105745epcas5p451c58384792038c13e9891fb2680050b@epcas5p4.samsung.com>
X-Mimecast-Impersonation-Protect: Policy=CLT - Impersonation Protection
 Definition; Similar Internal Domain=false;
 Similar Monitored External Domain=false; Custom External Domain=false;
 Mimecast External Domain=false; Newly Observed Domain=false;
 Internal User Name=false; Custom Display Name List=false;
 Reply-to Address Mismatch=false; Targeted Threat Dictionary=false;
 Mimecast Threat Dictionary=false; Custom Threat Dictionary=false
X-Scanned-By: MIMEDefang 3.1 on 10.11.54.3
Subject: [dm-devel] [PATCH v14 07/11] nvme: add copy offload support
X-BeenThere: dm-devel@redhat.com
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: device-mapper development <dm-devel.redhat.com>
List-Unsubscribe: <https://listman.redhat.com/mailman/options/dm-devel>,
 <mailto:dm-devel-request@redhat.com?subject=unsubscribe>
List-Archive: <http://listman.redhat.com/archives/dm-devel/>
List-Post: <mailto:dm-devel@redhat.com>
List-Help: <mailto:dm-devel-request@redhat.com?subject=help>
List-Subscribe: <https://listman.redhat.com/mailman/listinfo/dm-devel>,
 <mailto:dm-devel-request@redhat.com?subject=subscribe>
Cc: martin.petersen@oracle.com, Kanchan Joshi <joshi.k@samsung.com>,
 linux-doc@vger.kernel.org, gost.dev@samsung.com,
 Anuj Gupta <anuj20.g@samsung.com>, linux-kernel@vger.kernel.org,
 linux-nvme@lists.infradead.org, linux-block@vger.kernel.org, mcgrof@kernel.org,
 dlemoal@kernel.org, linux-fsdevel@vger.kernel.org,
 =?UTF-8?q?Javier=20Gonz=C3=A1lez?= <javier.gonz@samsung.com>,
 Nitesh Shetty <nj.shetty@samsung.com>
Errors-To: dm-devel-bounces@redhat.com
Sender: "dm-devel" <dm-devel-bounces@redhat.com>
X-Scanned-By: MIMEDefang 3.1 on 10.11.54.9
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: samsung.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

Q3VycmVudCBkZXNpZ24gb25seSBzdXBwb3J0cyBzaW5nbGUgc291cmNlIHJhbmdlLgpXZSByZWNl
aXZlIGEgcmVxdWVzdCB3aXRoIFJFUV9PUF9DT1BZX1NSQy4KUGFyc2UgdGhpcyByZXF1ZXN0IHdo
aWNoIGNvbnNpc3RzIG9mIHNyYygxc3QpIGFuZCBkc3QoMm5kKSBiaW9zLgpGb3JtIGEgY29weSBj
b21tYW5kIChUUCA0MDY1KQoKdHJhY2UgZXZlbnQgc3VwcG9ydCBmb3IgbnZtZV9jb3B5X2NtZC4K
U2V0IHRoZSBkZXZpY2UgY29weSBsaW1pdHMgdG8gcXVldWUgbGltaXRzLgoKU2lnbmVkLW9mZi1i
eTogS2FuY2hhbiBKb3NoaSA8am9zaGkua0BzYW1zdW5nLmNvbT4KU2lnbmVkLW9mZi1ieTogTml0
ZXNoIFNoZXR0eSA8bmouc2hldHR5QHNhbXN1bmcuY29tPgpTaWduZWQtb2ZmLWJ5OiBKYXZpZXIg
R29uesOhbGV6IDxqYXZpZXIuZ29uekBzYW1zdW5nLmNvbT4KU2lnbmVkLW9mZi1ieTogQW51aiBH
dXB0YSA8YW51ajIwLmdAc2Ftc3VuZy5jb20+Ci0tLQogZHJpdmVycy9udm1lL2hvc3QvY29uc3Rh
bnRzLmMgfCAgMSArCiBkcml2ZXJzL252bWUvaG9zdC9jb3JlLmMgICAgICB8IDc5ICsrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrCiBkcml2ZXJzL252bWUvaG9zdC90cmFjZS5jICAg
ICB8IDE5ICsrKysrKysrKwogaW5jbHVkZS9saW51eC9ibGtkZXYuaCAgICAgICAgfCAgMSArCiBp
bmNsdWRlL2xpbnV4L252bWUuaCAgICAgICAgICB8IDQzICsrKysrKysrKysrKysrKysrLS0KIDUg
ZmlsZXMgY2hhbmdlZCwgMTQwIGluc2VydGlvbnMoKyksIDMgZGVsZXRpb25zKC0pCgpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9udm1lL2hvc3QvY29uc3RhbnRzLmMgYi9kcml2ZXJzL252bWUvaG9zdC9j
b25zdGFudHMuYwppbmRleCAyMGY0NmMyMzA4ODUuLjJmNTA0YTJiMWZlOCAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9udm1lL2hvc3QvY29uc3RhbnRzLmMKKysrIGIvZHJpdmVycy9udm1lL2hvc3QvY29u
c3RhbnRzLmMKQEAgLTE5LDYgKzE5LDcgQEAgc3RhdGljIGNvbnN0IGNoYXIgKiBjb25zdCBudm1l
X29wc1tdID0gewogCVtudm1lX2NtZF9yZXN2X3JlcG9ydF0gPSAiUmVzZXJ2YXRpb24gUmVwb3J0
IiwKIAlbbnZtZV9jbWRfcmVzdl9hY3F1aXJlXSA9ICJSZXNlcnZhdGlvbiBBY3F1aXJlIiwKIAlb
bnZtZV9jbWRfcmVzdl9yZWxlYXNlXSA9ICJSZXNlcnZhdGlvbiBSZWxlYXNlIiwKKwlbbnZtZV9j
bWRfY29weV0gPSAiQ29weSBPZmZsb2FkIiwKIAlbbnZtZV9jbWRfem9uZV9tZ210X3NlbmRdID0g
IlpvbmUgTWFuYWdlbWVudCBTZW5kIiwKIAlbbnZtZV9jbWRfem9uZV9tZ210X3JlY3ZdID0gIlpv
bmUgTWFuYWdlbWVudCBSZWNlaXZlIiwKIAlbbnZtZV9jbWRfem9uZV9hcHBlbmRdID0gIlpvbmUg
QXBwZW5kIiwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbnZtZS9ob3N0L2NvcmUuYyBiL2RyaXZlcnMv
bnZtZS9ob3N0L2NvcmUuYwppbmRleCAzN2I2ZmE3NDY2NjIuLjIxNDYyODM1NmU0NCAxMDA2NDQK
LS0tIGEvZHJpdmVycy9udm1lL2hvc3QvY29yZS5jCisrKyBiL2RyaXZlcnMvbnZtZS9ob3N0L2Nv
cmUuYwpAQCAtNzYzLDYgKzc2Myw2MyBAQCBzdGF0aWMgaW5saW5lIHZvaWQgbnZtZV9zZXR1cF9m
bHVzaChzdHJ1Y3QgbnZtZV9ucyAqbnMsCiAJY21uZC0+Y29tbW9uLm5zaWQgPSBjcHVfdG9fbGUz
Mihucy0+aGVhZC0+bnNfaWQpOwogfQogCitzdGF0aWMgaW5saW5lIGJsa19zdGF0dXNfdCBudm1l
X3NldHVwX2NvcHlfb2ZmbG9hZChzdHJ1Y3QgbnZtZV9ucyAqbnMsCisJCQkJCQkgICBzdHJ1Y3Qg
cmVxdWVzdCAqcmVxLAorCQkJCQkJICAgc3RydWN0IG52bWVfY29tbWFuZCAqY21uZCkKK3sKKwlz
dHJ1Y3QgbnZtZV9jb3B5X3JhbmdlICpyYW5nZSA9IE5VTEw7CisJc3RydWN0IGJpbyAqYmlvOwor
CXU2NCBkc3RfbGJhLCBzcmNfbGJhLCBuX2xiYTsKKwl1MTYgbnJfcmFuZ2UgPSAxLCBjb250cm9s
ID0gMCwgc2VnID0gMTsKKworCWlmIChibGtfcnFfbnJfcGh5c19zZWdtZW50cyhyZXEpICE9IENP
UFlfTUFYX1NFR01FTlRTKQorCQlyZXR1cm4gQkxLX1NUU19JT0VSUjsKKworCS8qCisJICogRmly
c3QgYmlvIGNvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IHNvdXJjZSBhbmQgbGFzdCBiaW8gY29u
dGFpbnMKKwkgKiBpbmZvcm1hdGlvbiBhYm91dCBkZXN0aW5hdGlvbi4KKwkgKi8KKwlfX3JxX2Zv
cl9lYWNoX2JpbyhiaW8sIHJlcSkgeworCQlpZiAoc2VnID09IGJsa19ycV9ucl9waHlzX3NlZ21l
bnRzKHJlcSkpIHsKKwkJCWRzdF9sYmEgPSBudm1lX3NlY3RfdG9fbGJhKG5zLCBiaW8tPmJpX2l0
ZXIuYmlfc2VjdG9yKTsKKwkJCWlmIChuX2xiYSAhPSBiaW8tPmJpX2l0ZXIuYmlfc2l6ZSA+PiBu
cy0+bGJhX3NoaWZ0KQorCQkJCXJldHVybiBCTEtfU1RTX0lPRVJSOworCQl9IGVsc2UgeworCQkJ
c3JjX2xiYSA9IG52bWVfc2VjdF90b19sYmEobnMsIGJpby0+YmlfaXRlci5iaV9zZWN0b3IpOwor
CQkJbl9sYmEgPSBiaW8tPmJpX2l0ZXIuYmlfc2l6ZSA+PiBucy0+bGJhX3NoaWZ0OworCQl9CisJ
CXNlZysrOworCX0KKworCWlmIChyZXEtPmNtZF9mbGFncyAmIFJFUV9GVUEpCisJCWNvbnRyb2wg
fD0gTlZNRV9SV19GVUE7CisKKwlpZiAocmVxLT5jbWRfZmxhZ3MgJiBSRVFfRkFJTEZBU1RfREVW
KQorCQljb250cm9sIHw9IE5WTUVfUldfTFI7CisKKwltZW1zZXQoY21uZCwgMCwgc2l6ZW9mKCpj
bW5kKSk7CisJY21uZC0+Y29weS5vcGNvZGUgPSBudm1lX2NtZF9jb3B5OworCWNtbmQtPmNvcHku
bnNpZCA9IGNwdV90b19sZTMyKG5zLT5oZWFkLT5uc19pZCk7CisJY21uZC0+Y29weS5jb250cm9s
ID0gY3B1X3RvX2xlMTYoY29udHJvbCk7CisJY21uZC0+Y29weS5zZGxiYSA9IGNwdV90b19sZTY0
KGRzdF9sYmEpOworCWNtbmQtPmNvcHkubnJfcmFuZ2UgPSAwOworCisJcmFuZ2UgPSBrbWFsbG9j
X2FycmF5KG5yX3JhbmdlLCBzaXplb2YoKnJhbmdlKSwKKwkJCSAgICAgIEdGUF9BVE9NSUMgfCBf
X0dGUF9OT1dBUk4pOworCWlmICghcmFuZ2UpCisJCXJldHVybiBCTEtfU1RTX1JFU09VUkNFOwor
CisJcmFuZ2VbMF0uc2xiYSA9IGNwdV90b19sZTY0KHNyY19sYmEpOworCXJhbmdlWzBdLm5sYiA9
IGNwdV90b19sZTE2KG5fbGJhIC0gMSk7CisKKwlyZXEtPnNwZWNpYWxfdmVjLmJ2X3BhZ2UgPSB2
aXJ0X3RvX3BhZ2UocmFuZ2UpOworCXJlcS0+c3BlY2lhbF92ZWMuYnZfb2Zmc2V0ID0gb2Zmc2V0
X2luX3BhZ2UocmFuZ2UpOworCXJlcS0+c3BlY2lhbF92ZWMuYnZfbGVuID0gc2l6ZW9mKCpyYW5n
ZSkgKiBucl9yYW5nZTsKKwlyZXEtPnJxX2ZsYWdzIHw9IFJRRl9TUEVDSUFMX1BBWUxPQUQ7CisK
KwlyZXR1cm4gQkxLX1NUU19PSzsKK30KKwogc3RhdGljIGJsa19zdGF0dXNfdCBudm1lX3NldHVw
X2Rpc2NhcmQoc3RydWN0IG52bWVfbnMgKm5zLCBzdHJ1Y3QgcmVxdWVzdCAqcmVxLAogCQlzdHJ1
Y3QgbnZtZV9jb21tYW5kICpjbW5kKQogewpAQCAtMTAwNSw2ICsxMDYyLDExIEBAIGJsa19zdGF0
dXNfdCBudm1lX3NldHVwX2NtZChzdHJ1Y3QgbnZtZV9ucyAqbnMsIHN0cnVjdCByZXF1ZXN0ICpy
ZXEpCiAJY2FzZSBSRVFfT1BfWk9ORV9BUFBFTkQ6CiAJCXJldCA9IG52bWVfc2V0dXBfcncobnMs
IHJlcSwgY21kLCBudm1lX2NtZF96b25lX2FwcGVuZCk7CiAJCWJyZWFrOworCWNhc2UgUkVRX09Q
X0NPUFlfU1JDOgorCQlyZXQgPSBudm1lX3NldHVwX2NvcHlfb2ZmbG9hZChucywgcmVxLCBjbWQp
OworCQlicmVhazsKKwljYXNlIFJFUV9PUF9DT1BZX0RTVDoKKwkJcmV0dXJuIEJMS19TVFNfSU9F
UlI7CiAJZGVmYXVsdDoKIAkJV0FSTl9PTl9PTkNFKDEpOwogCQlyZXR1cm4gQkxLX1NUU19JT0VS
UjsKQEAgLTE3NDUsNiArMTgwNywyMSBAQCBzdGF0aWMgdm9pZCBudm1lX2NvbmZpZ19kaXNjYXJk
KHN0cnVjdCBnZW5kaXNrICpkaXNrLCBzdHJ1Y3QgbnZtZV9ucyAqbnMpCiAJCWJsa19xdWV1ZV9t
YXhfd3JpdGVfemVyb2VzX3NlY3RvcnMocXVldWUsIFVJTlRfTUFYKTsKIH0KIAorc3RhdGljIHZv
aWQgbnZtZV9jb25maWdfY29weShzdHJ1Y3QgZ2VuZGlzayAqZGlzaywgc3RydWN0IG52bWVfbnMg
Km5zLAorCQlzdHJ1Y3QgbnZtZV9pZF9ucyAqaWQpCit7CisJc3RydWN0IG52bWVfY3RybCAqY3Ry
bCA9IG5zLT5jdHJsOworCXN0cnVjdCByZXF1ZXN0X3F1ZXVlICpxID0gZGlzay0+cXVldWU7CisK
KwlpZiAoIShjdHJsLT5vbmNzICYgTlZNRV9DVFJMX09OQ1NfQ09QWSkpIHsKKwkJYmxrX3F1ZXVl
X21heF9jb3B5X2h3X3NlY3RvcnMocSwgMCk7CisJCXJldHVybjsKKwl9CisKKwlibGtfcXVldWVf
bWF4X2NvcHlfaHdfc2VjdG9ycyhxLCBudm1lX2xiYV90b19zZWN0KG5zLAorCQkJCSAgICAgIGxl
MTZfdG9fY3B1KGlkLT5tc3NybCkpKTsKK30KKwogc3RhdGljIGJvb2wgbnZtZV9uc19pZHNfZXF1
YWwoc3RydWN0IG52bWVfbnNfaWRzICphLCBzdHJ1Y3QgbnZtZV9uc19pZHMgKmIpCiB7CiAJcmV0
dXJuIHV1aWRfZXF1YWwoJmEtPnV1aWQsICZiLT51dWlkKSAmJgpAQCAtMTk0NCw2ICsyMDIxLDcg
QEAgc3RhdGljIHZvaWQgbnZtZV91cGRhdGVfZGlza19pbmZvKHN0cnVjdCBnZW5kaXNrICpkaXNr
LAogCXNldF9jYXBhY2l0eV9hbmRfbm90aWZ5KGRpc2ssIGNhcGFjaXR5KTsKIAogCW52bWVfY29u
ZmlnX2Rpc2NhcmQoZGlzaywgbnMpOworCW52bWVfY29uZmlnX2NvcHkoZGlzaywgbnMsIGlkKTsK
IAlibGtfcXVldWVfbWF4X3dyaXRlX3plcm9lc19zZWN0b3JzKGRpc2stPnF1ZXVlLAogCQkJCQkg
ICBucy0+Y3RybC0+bWF4X3plcm9lc19zZWN0b3JzKTsKIH0KQEAgLTQ2MzQsNiArNDcxMiw3IEBA
IHN0YXRpYyBpbmxpbmUgdm9pZCBfbnZtZV9jaGVja19zaXplKHZvaWQpCiAJQlVJTERfQlVHX09O
KHNpemVvZihzdHJ1Y3QgbnZtZV9kb3dubG9hZF9maXJtd2FyZSkgIT0gNjQpOwogCUJVSUxEX0JV
R19PTihzaXplb2Yoc3RydWN0IG52bWVfZm9ybWF0X2NtZCkgIT0gNjQpOwogCUJVSUxEX0JVR19P
TihzaXplb2Yoc3RydWN0IG52bWVfZHNtX2NtZCkgIT0gNjQpOworCUJVSUxEX0JVR19PTihzaXpl
b2Yoc3RydWN0IG52bWVfY29weV9jb21tYW5kKSAhPSA2NCk7CiAJQlVJTERfQlVHX09OKHNpemVv
ZihzdHJ1Y3QgbnZtZV93cml0ZV96ZXJvZXNfY21kKSAhPSA2NCk7CiAJQlVJTERfQlVHX09OKHNp
emVvZihzdHJ1Y3QgbnZtZV9hYm9ydF9jbWQpICE9IDY0KTsKIAlCVUlMRF9CVUdfT04oc2l6ZW9m
KHN0cnVjdCBudm1lX2dldF9sb2dfcGFnZV9jb21tYW5kKSAhPSA2NCk7CmRpZmYgLS1naXQgYS9k
cml2ZXJzL252bWUvaG9zdC90cmFjZS5jIGIvZHJpdmVycy9udm1lL2hvc3QvdHJhY2UuYwppbmRl
eCAxYzM2ZmNlZGVhMjAuLjgyYzZhZWY3N2MzMSAxMDA2NDQKLS0tIGEvZHJpdmVycy9udm1lL2hv
c3QvdHJhY2UuYworKysgYi9kcml2ZXJzL252bWUvaG9zdC90cmFjZS5jCkBAIC0xNTAsNiArMTUw
LDIzIEBAIHN0YXRpYyBjb25zdCBjaGFyICpudm1lX3RyYWNlX3JlYWRfd3JpdGUoc3RydWN0IHRy
YWNlX3NlcSAqcCwgdTggKmNkdzEwKQogCXJldHVybiByZXQ7CiB9CiAKK3N0YXRpYyBjb25zdCBj
aGFyICpudm1lX3RyYWNlX2NvcHkoc3RydWN0IHRyYWNlX3NlcSAqcCwgdTggKmNkdzEwKQorewor
CWNvbnN0IGNoYXIgKnJldCA9IHRyYWNlX3NlcV9idWZmZXJfcHRyKHApOworCXU2NCBzZGxiYSA9
IGdldF91bmFsaWduZWRfbGU2NChjZHcxMCk7CisJdTggbnJfcmFuZ2UgPSBnZXRfdW5hbGlnbmVk
X2xlMTYoY2R3MTAgKyA4KTsKKwl1MTYgY29udHJvbCA9IGdldF91bmFsaWduZWRfbGUxNihjZHcx
MCArIDEwKTsKKwl1MzIgZHNtZ210ID0gZ2V0X3VuYWxpZ25lZF9sZTMyKGNkdzEwICsgMTIpOwor
CXUzMiByZWZ0YWcgPSBnZXRfdW5hbGlnbmVkX2xlMzIoY2R3MTAgKyAxNik7CisKKwl0cmFjZV9z
ZXFfcHJpbnRmKHAsCisJCSJzZGxiYT0lbGx1LCBucl9yYW5nZT0ldSwgY3RybD0weCV4LCBkc21n
bXQ9JXUsIHJlZnRhZz0ldSIsCisJCXNkbGJhLCBucl9yYW5nZSwgY29udHJvbCwgZHNtZ210LCBy
ZWZ0YWcpOworCXRyYWNlX3NlcV9wdXRjKHAsIDApOworCisJcmV0dXJuIHJldDsKK30KKwogc3Rh
dGljIGNvbnN0IGNoYXIgKm52bWVfdHJhY2VfZHNtKHN0cnVjdCB0cmFjZV9zZXEgKnAsIHU4ICpj
ZHcxMCkKIHsKIAljb25zdCBjaGFyICpyZXQgPSB0cmFjZV9zZXFfYnVmZmVyX3B0cihwKTsKQEAg
LTI0Myw2ICsyNjAsOCBAQCBjb25zdCBjaGFyICpudm1lX3RyYWNlX3BhcnNlX252bV9jbWQoc3Ry
dWN0IHRyYWNlX3NlcSAqcCwKIAkJcmV0dXJuIG52bWVfdHJhY2Vfem9uZV9tZ210X3NlbmQocCwg
Y2R3MTApOwogCWNhc2UgbnZtZV9jbWRfem9uZV9tZ210X3JlY3Y6CiAJCXJldHVybiBudm1lX3Ry
YWNlX3pvbmVfbWdtdF9yZWN2KHAsIGNkdzEwKTsKKwljYXNlIG52bWVfY21kX2NvcHk6CisJCXJl
dHVybiBudm1lX3RyYWNlX2NvcHkocCwgY2R3MTApOwogCWRlZmF1bHQ6CiAJCXJldHVybiBudm1l
X3RyYWNlX2NvbW1vbihwLCBjZHcxMCk7CiAJfQpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9saW51eC9i
bGtkZXYuaCBiL2luY2x1ZGUvbGludXgvYmxrZGV2LmgKaW5kZXggNjdlYWIzNTQ1OTJjLi5hMzFl
MGJhNWJhZGQgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvbGludXgvYmxrZGV2LmgKKysrIGIvaW5jbHVk
ZS9saW51eC9ibGtkZXYuaApAQCAtMTIyNiw2ICsxMjI2LDcgQEAgc3RhdGljIGlubGluZSB1bnNp
Z25lZCBpbnQgYmRldl9kaXNjYXJkX2dyYW51bGFyaXR5KHN0cnVjdCBibG9ja19kZXZpY2UgKmJk
ZXYpCiAKIC8qIG1heGltdW0gY29weSBvZmZsb2FkIGxlbmd0aCwgdGhpcyBpcyBzZXQgdG8gMTI4
TUIgYmFzZWQgb24gY3VycmVudCB0ZXN0aW5nICovCiAjZGVmaW5lIENPUFlfTUFYX0JZVEVTCQko
MSA8PCAyNykKKyNkZWZpbmUgQ09QWV9NQVhfU0VHTUVOVFMJMgogCiBzdGF0aWMgaW5saW5lIHVu
c2lnbmVkIGludCBiZGV2X21heF9jb3B5X3NlY3RvcnMoc3RydWN0IGJsb2NrX2RldmljZSAqYmRl
dikKIHsKZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGludXgvbnZtZS5oIGIvaW5jbHVkZS9saW51eC9u
dm1lLmgKaW5kZXggMjZkZDNmODU5ZDlkLi43NzQ0NTM4YzRjYTQgMTAwNjQ0Ci0tLSBhL2luY2x1
ZGUvbGludXgvbnZtZS5oCisrKyBiL2luY2x1ZGUvbGludXgvbnZtZS5oCkBAIC0zMzcsNyArMzM3
LDcgQEAgc3RydWN0IG52bWVfaWRfY3RybCB7CiAJX191OAkJCW52c2NjOwogCV9fdTgJCQlud3Bj
OwogCV9fbGUxNgkJCWFjd3U7Ci0JX191OAkJCXJzdmQ1MzRbMl07CisJX19sZTE2CQkJb2NmczsK
IAlfX2xlMzIJCQlzZ2xzOwogCV9fbGUzMgkJCW1uYW47CiAJX191OAkJCXJzdmQ1NDRbMjI0XTsK
QEAgLTM2NSw2ICszNjUsNyBAQCBlbnVtIHsKIAlOVk1FX0NUUkxfT05DU19XUklURV9aRVJPRVMJ
CT0gMSA8PCAzLAogCU5WTUVfQ1RSTF9PTkNTX1JFU0VSVkFUSU9OUwkJPSAxIDw8IDUsCiAJTlZN
RV9DVFJMX09OQ1NfVElNRVNUQU1QCQk9IDEgPDwgNiwKKwlOVk1FX0NUUkxfT05DU19DT1BZCQkJ
PSAxIDw8IDgsCiAJTlZNRV9DVFJMX1ZXQ19QUkVTRU5UCQkJPSAxIDw8IDAsCiAJTlZNRV9DVFJM
X09BQ1NfU0VDX1NVUFAgICAgICAgICAgICAgICAgID0gMSA8PCAwLAogCU5WTUVfQ1RSTF9PQUNT
X05TX01OR1RfU1VQUAkJPSAxIDw8IDMsCkBAIC00MTQsNyArNDE1LDEwIEBAIHN0cnVjdCBudm1l
X2lkX25zIHsKIAlfX2xlMTYJCQlucGRnOwogCV9fbGUxNgkJCW5wZGE7CiAJX19sZTE2CQkJbm93
czsKLQlfX3U4CQkJcnN2ZDc0WzE4XTsKKwlfX2xlMTYJCQltc3NybDsKKwlfX2xlMzIJCQltY2w7
CisJX191OAkJCW1zcmM7CisJX191OAkJCXJzdmQ5MVsxMV07CiAJX19sZTMyCQkJYW5hZ3JwaWQ7
CiAJX191OAkJCXJzdmQ5NlszXTsKIAlfX3U4CQkJbnNhdHRyOwpAQCAtODMxLDYgKzgzNSw3IEBA
IGVudW0gbnZtZV9vcGNvZGUgewogCW52bWVfY21kX3Jlc3ZfcmVwb3J0CT0gMHgwZSwKIAludm1l
X2NtZF9yZXN2X2FjcXVpcmUJPSAweDExLAogCW52bWVfY21kX3Jlc3ZfcmVsZWFzZQk9IDB4MTUs
CisJbnZtZV9jbWRfY29weQkJPSAweDE5LAogCW52bWVfY21kX3pvbmVfbWdtdF9zZW5kCT0gMHg3
OSwKIAludm1lX2NtZF96b25lX21nbXRfcmVjdgk9IDB4N2EsCiAJbnZtZV9jbWRfem9uZV9hcHBl
bmQJPSAweDdkLApAQCAtODU0LDcgKzg1OSw4IEBAIGVudW0gbnZtZV9vcGNvZGUgewogCQludm1l
X29wY29kZV9uYW1lKG52bWVfY21kX3Jlc3ZfcmVsZWFzZSksCVwKIAkJbnZtZV9vcGNvZGVfbmFt
ZShudm1lX2NtZF96b25lX21nbXRfc2VuZCksCVwKIAkJbnZtZV9vcGNvZGVfbmFtZShudm1lX2Nt
ZF96b25lX21nbXRfcmVjdiksCVwKLQkJbnZtZV9vcGNvZGVfbmFtZShudm1lX2NtZF96b25lX2Fw
cGVuZCkpCisJCW52bWVfb3Bjb2RlX25hbWUobnZtZV9jbWRfem9uZV9hcHBlbmQpLAkJXAorCQlu
dm1lX29wY29kZV9uYW1lKG52bWVfY21kX2NvcHkpKQogCiAKIApAQCAtMTAzMSw2ICsxMDM3LDM2
IEBAIHN0cnVjdCBudm1lX2RzbV9yYW5nZSB7CiAJX19sZTY0CQkJc2xiYTsKIH07CiAKK3N0cnVj
dCBudm1lX2NvcHlfY29tbWFuZCB7CisJX191OAkJCW9wY29kZTsKKwlfX3U4CQkJZmxhZ3M7CisJ
X191MTYJCQljb21tYW5kX2lkOworCV9fbGUzMgkJCW5zaWQ7CisJX191NjQJCQlyc3ZkMjsKKwlf
X2xlNjQJCQltZXRhZGF0YTsKKwl1bmlvbiBudm1lX2RhdGFfcHRyCWRwdHI7CisJX19sZTY0CQkJ
c2RsYmE7CisJX191OAkJCW5yX3JhbmdlOworCV9fdTgJCQlyc3ZkMTI7CisJX19sZTE2CQkJY29u
dHJvbDsKKwlfX2xlMTYJCQlyc3ZkMTM7CisJX19sZTE2CQkJZHNwZWM7CisJX19sZTMyCQkJaWxi
cnQ7CisJX19sZTE2CQkJbGJhdDsKKwlfX2xlMTYJCQlsYmF0bTsKK307CisKK3N0cnVjdCBudm1l
X2NvcHlfcmFuZ2UgeworCV9fbGU2NAkJCXJzdmQwOworCV9fbGU2NAkJCXNsYmE7CisJX19sZTE2
CQkJbmxiOworCV9fbGUxNgkJCXJzdmQxODsKKwlfX2xlMzIJCQlyc3ZkMjA7CisJX19sZTMyCQkJ
ZWlsYnJ0OworCV9fbGUxNgkJCWVsYmF0OworCV9fbGUxNgkJCWVsYmF0bTsKK307CisKIHN0cnVj
dCBudm1lX3dyaXRlX3plcm9lc19jbWQgewogCV9fdTgJCQlvcGNvZGU7CiAJX191OAkJCWZsYWdz
OwpAQCAtMTc5Miw2ICsxODI4LDcgQEAgc3RydWN0IG52bWVfY29tbWFuZCB7CiAJCXN0cnVjdCBu
dm1lX2Rvd25sb2FkX2Zpcm13YXJlIGRsZnc7CiAJCXN0cnVjdCBudm1lX2Zvcm1hdF9jbWQgZm9y
bWF0OwogCQlzdHJ1Y3QgbnZtZV9kc21fY21kIGRzbTsKKwkJc3RydWN0IG52bWVfY29weV9jb21t
YW5kIGNvcHk7CiAJCXN0cnVjdCBudm1lX3dyaXRlX3plcm9lc19jbWQgd3JpdGVfemVyb2VzOwog
CQlzdHJ1Y3QgbnZtZV96b25lX21nbXRfc2VuZF9jbWQgem1zOwogCQlzdHJ1Y3QgbnZtZV96b25l
X21nbXRfcmVjdl9jbWQgem1yOwotLSAKMi4zNS4xLjUwMC5nYjg5NmY3MjllMgoKLS0KZG0tZGV2
ZWwgbWFpbGluZyBsaXN0CmRtLWRldmVsQHJlZGhhdC5jb20KaHR0cHM6Ly9saXN0bWFuLnJlZGhh
dC5jb20vbWFpbG1hbi9saXN0aW5mby9kbS1kZXZlbAo=

