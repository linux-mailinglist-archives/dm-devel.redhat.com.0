Return-Path: <dm-devel-bounces@redhat.com>
X-Original-To: lists+dm-devel@lfdr.de
Delivered-To: lists+dm-devel@lfdr.de
Received: from us-smtp-delivery-124.mimecast.com (us-smtp-delivery-124.mimecast.com [216.205.24.124])
	by mail.lfdr.de (Postfix) with ESMTP id F107034E161
	for <lists+dm-devel@lfdr.de>; Tue, 30 Mar 2021 08:43:12 +0200 (CEST)
Received: from mimecast-mx01.redhat.com (mimecast-mx01.redhat.com
 [209.132.183.4]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-535-WHLyAvQQO9-YkPCIVHDqjQ-1; Tue, 30 Mar 2021 02:43:09 -0400
X-MC-Unique: WHLyAvQQO9-YkPCIVHDqjQ-1
Received: from smtp.corp.redhat.com (int-mx08.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	(using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mimecast-mx01.redhat.com (Postfix) with ESMTPS id 36EF9E49E6;
	Tue, 30 Mar 2021 06:43:03 +0000 (UTC)
Received: from colo-mx.corp.redhat.com (colo-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.21])
	by smtp.corp.redhat.com (Postfix) with ESMTPS id 724A119C45;
	Tue, 30 Mar 2021 06:43:00 +0000 (UTC)
Received: from lists01.pubmisc.prod.ext.phx2.redhat.com (lists01.pubmisc.prod.ext.phx2.redhat.com [10.5.19.33])
	by colo-mx.corp.redhat.com (Postfix) with ESMTP id 1131C4A7CA;
	Tue, 30 Mar 2021 06:42:51 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx05.intmail.prod.int.rdu2.redhat.com
	[10.11.54.5])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id 12U6ebcE007865 for <dm-devel@listman.util.phx.redhat.com>;
	Tue, 30 Mar 2021 02:40:37 -0400
Received: by smtp.corp.redhat.com (Postfix)
	id F00D24402B; Tue, 30 Mar 2021 06:40:36 +0000 (UTC)
Delivered-To: dm-devel@redhat.com
Received: from mimecast-mx02.redhat.com
	(mimecast03.extmail.prod.ext.rdu2.redhat.com [10.11.55.19])
	by smtp.corp.redhat.com (Postfix) with ESMTPS id E9218568DF
	for <dm-devel@redhat.com>; Tue, 30 Mar 2021 06:40:30 +0000 (UTC)
Received: from us-smtp-1.mimecast.com (us-smtp-1.mimecast.com [207.211.31.81])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256
	bits)) (No client certificate requested)
	by mimecast-mx02.redhat.com (Postfix) with ESMTPS id 02C7180080E
	for <dm-devel@redhat.com>; Tue, 30 Mar 2021 06:40:30 +0000 (UTC)
Received: from mx2.suse.de (mx2.suse.de [195.135.220.15]) (Using TLS) by
	relay.mimecast.com with ESMTP id us-mta-525-TUb69VMUN36dA11TbuJHKQ-1;
	Tue, 30 Mar 2021 02:40:25 -0400
X-MC-Unique: TUb69VMUN36dA11TbuJHKQ-1
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.221.27])
	by mx2.suse.de (Postfix) with ESMTP id D6D15AF42;
	Tue, 30 Mar 2021 06:40:23 +0000 (UTC)
To: Ming Lei <ming.lei@redhat.com>, Jens Axboe <axboe@kernel.dk>
References: <20210329152622.173035-1-ming.lei@redhat.com>
	<20210329152622.173035-9-ming.lei@redhat.com>
From: Hannes Reinecke <hare@suse.de>
Message-ID: <0a4829ae-a590-c058-a0ec-060eba48c102@suse.de>
Date: Tue, 30 Mar 2021 08:40:22 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101
	Thunderbird/78.7.0
MIME-Version: 1.0
In-Reply-To: <20210329152622.173035-9-ming.lei@redhat.com>
X-Mimecast-Impersonation-Protect: Policy=CLT - Impersonation Protection
	Definition; Similar Internal Domain=false;
	Similar Monitored External Domain=false;
	Custom External Domain=false; Mimecast External Domain=false;
	Newly Observed Domain=false; Internal User Name=false;
	Custom Display Name List=false; Reply-to Address Mismatch=false;
	Targeted Threat Dictionary=false;
	Mimecast Threat Dictionary=false; Custom Threat Dictionary=false
X-Scanned-By: MIMEDefang 2.79 on 10.11.54.5
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id 12U6ebcE007865
X-loop: dm-devel@redhat.com
Cc: linux-block@vger.kernel.org, Jeffle Xu <jefflexu@linux.alibaba.com>,
	dm-devel@redhat.com, Mike Snitzer <snitzer@redhat.com>
Subject: Re: [dm-devel] [PATCH V4 08/12] block: use per-task poll context to
 implement bio based io polling
X-BeenThere: dm-devel@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
List-Id: device-mapper development <dm-devel.redhat.com>
List-Unsubscribe: <https://listman.redhat.com/mailman/options/dm-devel>,
	<mailto:dm-devel-request@redhat.com?subject=unsubscribe>
List-Archive: <https://listman.redhat.com/archives/dm-devel>
List-Post: <mailto:dm-devel@redhat.com>
List-Help: <mailto:dm-devel-request@redhat.com?subject=help>
List-Subscribe: <https://listman.redhat.com/mailman/listinfo/dm-devel>,
	<mailto:dm-devel-request@redhat.com?subject=subscribe>
Sender: dm-devel-bounces@redhat.com
Errors-To: dm-devel-bounces@redhat.com
X-Scanned-By: MIMEDefang 2.84 on 10.5.11.23
Authentication-Results: relay.mimecast.com;
	auth=pass smtp.auth=CUSA124A263 smtp.mailfrom=dm-devel-bounces@redhat.com
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Content-Language: en-US
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"

T24gMy8yOS8yMSA1OjI2IFBNLCBNaW5nIExlaSB3cm90ZToKPiBDdXJyZW50bHkgYmlvIGJhc2Vk
IElPIHBvbGxpbmcgbmVlZHMgdG8gcG9sbCBhbGwgaHcgcXVldWUgYmxpbmRseSwgdGhpcwo+IHdh
eSBpcyB2ZXJ5IGluZWZmaWNpZW50LCBhbmQgb25lIGJpZyByZWFzb24gaXMgdGhhdCB3ZSBjYW4n
dCBwYXNzIGFueQo+IGJpbyBzdWJtaXNzaW9uIHJlc3VsdCB0byBibGtfcG9sbCgpLgo+IAo+IElu
IElPIHN1Ym1pc3Npb24gY29udGV4dCwgdHJhY2sgYXNzb2NpYXRlZCB1bmRlcmx5aW5nIGJpb3Mg
YnkgcGVyLXRhc2sKPiBzdWJtaXNzaW9uIHF1ZXVlIGFuZCBzdG9yZSByZXR1cm5lZCAnY29va2ll
JyBpbgo+IGJpby0+YmlfaXRlci5iaV9wcml2YXRlX2RhdGEsIGFuZCByZXR1cm4gY3VycmVudC0+
cGlkIHRvIGNhbGxlciBvZgo+IHN1Ym1pdF9iaW8oKSBmb3IgYW55IGJpbyBiYXNlZCBkcml2ZXIn
cyBJTywgd2hpY2ggaXMgc3VibWl0dGVkIGZyb20gRlMuCj4gCj4gSW4gSU8gcG9sbCBjb250ZXh0
LCB0aGUgcGFzc2VkIGNvb2tpZSB0ZWxscyB1cyB0aGUgUElEIG9mIHN1Ym1pc3Npb24KPiBjb250
ZXh0LCB0aGVuIHdlIGNhbiBmaW5kIGJpb3MgZnJvbSB0aGUgcGVyLXRhc2sgaW8gcHVsbCBjb250
ZXh0IG9mCj4gc3VibWlzc2lvbiBjb250ZXh0LiBNb3ZpbmcgYmlvcyBmcm9tIHN1Ym1pc3Npb24g
cXVldWUgdG8gcG9sbCBxdWV1ZSBvZgo+IHRoZSBwb2xsIGNvbnRleHQsIGFuZCBrZWVwIHBvbGxp
bmcgdW50aWwgdGhlc2UgYmlvcyBhcmUgZW5kZWQuIFJlbW92ZQo+IGJpbyBmcm9tIHBvbGwgcXVl
dWUgaWYgdGhlIGJpbyBpcyBlbmRlZC4gQWRkIGJpbyBmbGFncyBvZiBCSU9fRE9ORSBhbmQKPiBC
SU9fRU5EX0JZX1BPTEwgZm9yIHN1Y2ggcHVycG9zZS4KPiAKPiBJbiB3YXMgZm91bmQgaW4gSmVm
ZmxlIFh1J3MgdGVzdCB0aGF0IGtmaWZvIGRvZXNuJ3Qgc2NhbGUgd2VsbCBmb3IgYQo+IHN1Ym1p
c3Npb24gcXVldWUgYXMgcXVldWUgZGVwdGggaXMgaW5jcmVhc2VkLCBzbyBhIG5ldyBtZWNoYW5p
c20gZm9yCj4gdHJhY2tpbmcgYmlvcyBpcyBuZWVkZWQuIFNvIGZhciBiaW8ncyBzaXplIGlzIGNs
b3NlIHRvIDIgY2FjaGVsaW5lIHNpemUsCj4gYW5kIGl0IG1heSBub3QgYmUgYWNjZXB0ZWQgdG8g
YWRkIG5ldyBmaWVsZCBpbnRvIGJpbyBmb3Igc29sdmluZyB0aGUKPiBzY2FsYWJpbGl0eSBpc3N1
ZSBieSB0cmFja2luZyBiaW9zIHZpYSBsaW5rZWQgbGlzdCwgc3dpdGNoIHRvIGJpbyBncm91cAo+
IGxpc3QgZm9yIHRyYWNraW5nIGJpbywgdGhlIGlkZWEgaXMgdG8gcmV1c2UgLmJpX2VuZF9pbyBm
b3IgbGlua2luZyBiaW9zCj4gaW50byBhIGxpbmtlZCBsaXN0IGZvciBhbGwgc2hhcmluZyBzYW1l
IC5iaV9lbmRfaW8oY2FsbCBpdCBiaW8gZ3JvdXApLAo+IHdoaWNoIGlzIHJlY292ZXJlZCBiZWZv
cmUgZW5kaW5nIGJpbyByZWFsbHksIHNpbmNlIEJJT19FTkRfQllfUE9MTCBpcwo+IGFkZGVkIGZv
ciBlbmhhbmNpbmcgdGhpcyBwb2ludC4gVXN1YWxseSAuYmlfZW5kX2JpbyBpcyBzYW1lIGZvciBh
bGwKPiBiaW9zIGluIHNhbWUgbGF5ZXIsIHNvIGl0IGlzIGVub3VnaCB0byBwcm92aWRlIHZlcnkg
bGltaXRlZCBncm91cHMsIHN1Y2gKPiBhcyAxNiBvciBsZXNzIGZvciBmaXhpbmcgdGhlIHNjYWxh
YmlsaXR5IGlzc3VlLgo+IAo+IFVzdWFsbHkgc3VibWlzc2lvbiBzaGFyZXMgY29udGV4dCB3aXRo
IGlvIHBvbGwuIFRoZSBwZXItdGFzayBwb2xsIGNvbnRleHQKPiBpcyBqdXN0IGxpa2Ugc3RhY2sg
dmFyaWFibGUsIGFuZCBpdCBpcyBjaGVhcCB0byBtb3ZlIGRhdGEgYmV0d2VlbiB0aGUgdHdvCj4g
cGVyLXRhc2sgcXVldWVzLgo+IAo+IEFsc28gd2hlbiB0aGUgc3VibWlzc2lvbiB0YXNrIGlzIGV4
aXRpbmcsIGRyYWluIHBlbmRpbmcgSU9zIGluIHRoZSBjb250ZXh0Cj4gdW50aWwgYWxsIGFyZSBk
b25lLgo+IAo+IFNpZ25lZC1vZmYtYnk6IE1pbmcgTGVpIDxtaW5nLmxlaUByZWRoYXQuY29tPgo+
IC0tLQo+ICAgYmxvY2svYmlvLmMgICAgICAgICAgICAgICB8ICAgNSArCj4gICBibG9jay9ibGst
Y29yZS5jICAgICAgICAgIHwgMTUzICsrKysrKysrKysrKysrKysrKysrKysrLQo+ICAgYmxvY2sv
YmxrLWlvYy5jICAgICAgICAgICB8ICAgMyArCj4gICBibG9jay9ibGstbXEuYyAgICAgICAgICAg
IHwgMjQwICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKystCj4gICBibG9jay9i
bGsuaCAgICAgICAgICAgICAgIHwgIDEwICsrCj4gICBpbmNsdWRlL2xpbnV4L2Jsa190eXBlcy5o
IHwgIDE4ICsrLQo+ICAgNiBmaWxlcyBjaGFuZ2VkLCA0MjUgaW5zZXJ0aW9ucygrKSwgNCBkZWxl
dGlvbnMoLSkKPiAKPiBkaWZmIC0tZ2l0IGEvYmxvY2svYmlvLmMgYi9ibG9jay9iaW8uYwo+IGlu
ZGV4IDI2YjdmNzIxY2RhOC4uMDRjMDQzZGM2MGZjIDEwMDY0NAo+IC0tLSBhL2Jsb2NrL2Jpby5j
Cj4gKysrIGIvYmxvY2svYmlvLmMKPiBAQCAtMTQwMiw2ICsxNDAyLDExIEBAIHN0YXRpYyBpbmxp
bmUgYm9vbCBiaW9fcmVtYWluaW5nX2RvbmUoc3RydWN0IGJpbyAqYmlvKQo+ICAgICoqLwo+ICAg
dm9pZCBiaW9fZW5kaW8oc3RydWN0IGJpbyAqYmlvKQo+ICAgewo+ICsJLyogQklPX0VORF9CWV9Q
T0xMIGhhcyB0byBiZSBzZXQgYmVmb3JlIGNhbGxpbmcgc3VibWl0X2JpbyAqLwo+ICsJaWYgKGJp
b19mbGFnZ2VkKGJpbywgQklPX0VORF9CWV9QT0xMKSkgewo+ICsJCWJpb19zZXRfZmxhZyhiaW8s
IEJJT19ET05FKTsKPiArCQlyZXR1cm47Cj4gKwl9Cj4gICBhZ2FpbjoKPiAgIAlpZiAoIWJpb19y
ZW1haW5pbmdfZG9uZShiaW8pKQo+ICAgCQlyZXR1cm47Cj4gZGlmZiAtLWdpdCBhL2Jsb2NrL2Js
ay1jb3JlLmMgYi9ibG9jay9ibGstY29yZS5jCj4gaW5kZXggYTc3N2JhNGZlMDZmLi45Mzk3MzA0
NDA2OTMgMTAwNjQ0Cj4gLS0tIGEvYmxvY2svYmxrLWNvcmUuYwo+ICsrKyBiL2Jsb2NrL2Jsay1j
b3JlLmMKPiBAQCAtODA1LDYgKzgwNSw4MSBAQCBzdGF0aWMgaW5saW5lIHVuc2lnbmVkIGludCBi
aW9fZ3JwX2xpc3Rfc2l6ZSh1bnNpZ25lZCBpbnQgbnJfZ3JwcykKPiAgIAkJc2l6ZW9mKHN0cnVj
dCBiaW9fZ3JwX2xpc3RfZGF0YSk7Cj4gICB9Cj4gICAKPiArc3RhdGljIGlubGluZSB2b2lkICpi
aW9fZ3JwX2RhdGEoc3RydWN0IGJpbyAqYmlvKQo+ICt7Cj4gKwlyZXR1cm4gYmlvLT5iaV9wb2xs
Owo+ICt9Cj4gKwo+ICsvKiBhZGQgYmlvIGludG8gYmlvIGdyb3VwIGxpc3QsIHJldHVybiB0cnVl
IGlmIGl0IGlzIGFkZGVkICovCj4gK3N0YXRpYyBib29sIGJpb19ncnBfbGlzdF9hZGQoc3RydWN0
IGJpb19ncnBfbGlzdCAqbGlzdCwgc3RydWN0IGJpbyAqYmlvKQo+ICt7Cj4gKwlpbnQgaTsKPiAr
CXN0cnVjdCBiaW9fZ3JwX2xpc3RfZGF0YSAqZ3JwOwo+ICsKPiArCWZvciAoaSA9IDA7IGkgPCBs
aXN0LT5ucl9ncnBzOyBpKyspIHsKPiArCQlncnAgPSAmbGlzdC0+aGVhZFtpXTsKPiArCQlpZiAo
Z3JwLT5ncnBfZGF0YSA9PSBiaW9fZ3JwX2RhdGEoYmlvKSkgewo+ICsJCQlfX2Jpb19ncnBfbGlz
dF9hZGQoJmdycC0+bGlzdCwgYmlvKTsKPiArCQkJcmV0dXJuIHRydWU7Cj4gKwkJfQo+ICsJfQo+
ICsKPiArCWlmIChpID09IGxpc3QtPm1heF9ucl9ncnBzKQo+ICsJCXJldHVybiBmYWxzZTsKPiAr
Cj4gKwkvKiBjcmVhdGUgYSBuZXcgZ3JvdXAgKi8KPiArCWdycCA9ICZsaXN0LT5oZWFkW2ldOwo+
ICsJYmlvX2xpc3RfaW5pdCgmZ3JwLT5saXN0KTsKPiArCWdycC0+Z3JwX2RhdGEgPSBiaW9fZ3Jw
X2RhdGEoYmlvKTsKPiArCV9fYmlvX2dycF9saXN0X2FkZCgmZ3JwLT5saXN0LCBiaW8pOwo+ICsJ
bGlzdC0+bnJfZ3JwcysrOwo+ICsKPiArCXJldHVybiB0cnVlOwo+ICt9Cj4gKwo+ICtzdGF0aWMg
aW50IGJpb19ncnBfbGlzdF9maW5kX2dycChzdHJ1Y3QgYmlvX2dycF9saXN0ICpsaXN0LCB2b2lk
ICpncnBfZGF0YSkKPiArewo+ICsJaW50IGk7Cj4gKwlzdHJ1Y3QgYmlvX2dycF9saXN0X2RhdGEg
KmdycDsKPiArCj4gKwlmb3IgKGkgPSAwOyBpIDwgbGlzdC0+bnJfZ3JwczsgaSsrKSB7Cj4gKwkJ
Z3JwID0gJmxpc3QtPmhlYWRbaV07Cj4gKwkJaWYgKGdycC0+Z3JwX2RhdGEgPT0gZ3JwX2RhdGEp
Cj4gKwkJCXJldHVybiBpOwo+ICsJfQo+ICsKPiArCWlmIChpIDwgbGlzdC0+bWF4X25yX2dycHMp
IHsKPiArCQlncnAgPSAmbGlzdC0+aGVhZFtpXTsKPiArCQliaW9fbGlzdF9pbml0KCZncnAtPmxp
c3QpOwo+ICsJCXJldHVybiBpOwo+ICsJfQo+ICsKPiArCXJldHVybiAtMTsKPiArfQo+ICsKPiAr
LyogTW92ZSBhcyBtYW55IGFzIHBvc3NpYmxlIGdyb3VwcyBmcm9tICdzcmMnIHRvICdkc3QnICov
Cj4gK3ZvaWQgYmlvX2dycF9saXN0X21vdmUoc3RydWN0IGJpb19ncnBfbGlzdCAqZHN0LCBzdHJ1
Y3QgYmlvX2dycF9saXN0ICpzcmMpCj4gK3sKPiArCWludCBpLCBqLCBjbnQgPSAwOwo+ICsJc3Ry
dWN0IGJpb19ncnBfbGlzdF9kYXRhICpncnA7Cj4gKwo+ICsJZm9yIChpID0gc3JjLT5ucl9ncnBz
IC0gMTsgaSA+PSAwOyBpLS0pIHsKPiArCQlncnAgPSAmc3JjLT5oZWFkW2ldOwo+ICsJCWogPSBi
aW9fZ3JwX2xpc3RfZmluZF9ncnAoZHN0LCBncnAtPmdycF9kYXRhKTsKPiArCQlpZiAoaiA8IDAp
Cj4gKwkJCWJyZWFrOwo+ICsJCWlmIChiaW9fZ3JwX2xpc3RfZ3JwX2VtcHR5KCZkc3QtPmhlYWRb
al0pKSB7Cj4gKwkJCWRzdC0+aGVhZFtqXS5ncnBfZGF0YSA9IGdycC0+Z3JwX2RhdGE7Cj4gKwkJ
CWRzdC0+bnJfZ3JwcysrOwo+ICsJCX0KPiArCQlfX2Jpb19ncnBfbGlzdF9tZXJnZSgmZHN0LT5o
ZWFkW2pdLmxpc3QsICZncnAtPmxpc3QpOwo+ICsJCWJpb19saXN0X2luaXQoJmdycC0+bGlzdCk7
Cj4gKwkJY250Kys7Cj4gKwl9Cj4gKwo+ICsJc3JjLT5ucl9ncnBzIC09IGNudDsKPiArfQo+ICsK
PiAgIHN0YXRpYyB2b2lkIGJpb19wb2xsX2N0eF9pbml0KHN0cnVjdCBibGtfYmlvX3BvbGxfY3R4
ICpwYykKPiAgIHsKPiAgIAlwYy0+c3EgPSAodm9pZCAqKXBjICsgc2l6ZW9mKCpwYyk7Cj4gQEAg
LTg2Niw2ICs5NDEsNDUgQEAgc3RhdGljIGlubGluZSB2b2lkIGJsa19iaW9fcG9sbF9wcmVwcm9j
ZXNzKHN0cnVjdCByZXF1ZXN0X3F1ZXVlICpxLAo+ICAgCQliaW8tPmJpX29wZiB8PSBSRVFfUE9M
TF9DVFg7Cj4gICB9Cj4gICAKPiArc3RhdGljIGlubGluZSB2b2lkIGJsa19iaW9fcG9sbF9tYXJr
X3F1ZXVlZChzdHJ1Y3QgYmlvICpiaW8sIGJvb2wgcXVldWVkKQo+ICt7Cj4gKwkvKgo+ICsJICog
VGhlIGJpbyBoYXMgYmVlbiBhZGRlZCB0byBwZXItdGFzayBwb2xsIHF1ZXVlLCBtYXJrIGl0IGFz
Cj4gKwkgKiBFTkRfQllfUE9MTCwgc28gdGhhdCB0aGlzIGJpbyBpcyBhbHdheXMgY29tcGxldGVk
IGZyb20KPiArCSAqIGJsa19wb2xsKCkgd2hpY2ggaXMgcHJvdmlkZWQgd2l0aCBjb29raWVkIGZy
b20gdGhpcyBiaW8ncwo+ICsJICogc3VibWlzc2lvbi4KPiArCSAqLwo+ICsJaWYgKCFxdWV1ZWQp
Cj4gKwkJYmlvLT5iaV9vcGYgJj0gfihSRVFfSElQUkkgfCBSRVFfUE9MTF9DVFgpOwo+ICsJZWxz
ZQo+ICsJCWJpb19zZXRfZmxhZyhiaW8sIEJJT19FTkRfQllfUE9MTCk7Cj4gK30KPiArCj4gK3N0
YXRpYyBib29sIGJsa19iaW9fcG9sbF9wcmVwX3N1Ym1pdChzdHJ1Y3QgaW9fY29udGV4dCAqaW9j
LCBzdHJ1Y3QgYmlvICpiaW8pCj4gK3sKPiArCXN0cnVjdCBibGtfYmlvX3BvbGxfY3R4ICpwYyA9
IGlvYy0+ZGF0YTsKPiArCXVuc2lnbmVkIGludCBxdWV1ZWQ7Cj4gKwo+ICsJLyoKPiArCSAqIFdl
IHJlbHkgb24gaW1tdXRhYmxlIC5iaV9lbmRfaW8gYmV0d2VlbiBibGstbXEgYmlvIHN1Ym1pc3Np
b24KPiArCSAqIGFuZCBjb21wbGV0aW9uLiBIb3dldmVyLCBiaW8gY3J5cHQgbWF5IHVwZGF0ZSAu
YmlfZW5kX2lvIGR1cmluZwo+ICsJICogc3VibWlzc2lvbiwgc28gc2ltcGx5IGRvbid0IHN1cHBv
cnQgYmlvIGJhc2VkIHBvbGxpbmcgZm9yIHRoaXMKPiArCSAqIHNldHRpbmcuCj4gKwkgKi8KPiAr
CWlmIChsaWtlbHkoIWJpb19oYXNfY3J5cHRfY3R4KGJpbykpKSB7Cj4gKwkJLyogdHJhY2sgdGhp
cyBiaW8gdmlhIGJpbyBncm91cCBsaXN0ICovCj4gKwkJc3Bpbl9sb2NrKCZwYy0+c3FfbG9jayk7
Cj4gKwkJcXVldWVkID0gYmlvX2dycF9saXN0X2FkZChwYy0+c3EsIGJpbyk7Cj4gKwkJYmxrX2Jp
b19wb2xsX21hcmtfcXVldWVkKGJpbywgcXVldWVkKTsKPiArCQlzcGluX3VubG9jaygmcGMtPnNx
X2xvY2spOwo+ICsJfSBlbHNlIHsKPiArCQlxdWV1ZWQgPSBmYWxzZTsKPiArCQlibGtfYmlvX3Bv
bGxfbWFya19xdWV1ZWQoYmlvLCBmYWxzZSk7Cj4gKwl9Cj4gKwo+ICsJcmV0dXJuIHF1ZXVlZDsK
PiArfQo+ICsKPiAgIHN0YXRpYyBub2lubGluZV9mb3Jfc3RhY2sgYm9vbCBzdWJtaXRfYmlvX2No
ZWNrcyhzdHJ1Y3QgYmlvICpiaW8pCj4gICB7Cj4gICAJc3RydWN0IGJsb2NrX2RldmljZSAqYmRl
diA9IGJpby0+YmlfYmRldjsKPiBAQCAtMTAyNCw3ICsxMTM4LDcgQEAgc3RhdGljIGJsa19xY190
IF9fc3VibWl0X2JpbyhzdHJ1Y3QgYmlvICpiaW8pCj4gICAgKiBiaW9fbGlzdF9vbl9zdGFja1sx
XSBjb250YWlucyBiaW9zIHRoYXQgd2VyZSBzdWJtaXR0ZWQgYmVmb3JlIHRoZSBjdXJyZW50Cj4g
ICAgKgktPnN1Ym1pdF9iaW9fYmlvLCBidXQgdGhhdCBoYXZlbid0IGJlZW4gcHJvY2Vzc2VkIHll
dC4KPiAgICAqLwo+IC1zdGF0aWMgYmxrX3FjX3QgX19zdWJtaXRfYmlvX25vYWNjdChzdHJ1Y3Qg
YmlvICpiaW8pCj4gK3N0YXRpYyBibGtfcWNfdCBfX3N1Ym1pdF9iaW9fbm9hY2N0X2N0eChzdHJ1
Y3QgYmlvICpiaW8sIHN0cnVjdCBpb19jb250ZXh0ICppb2MpCj4gICB7Cj4gICAJc3RydWN0IGJp
b19saXN0IGJpb19saXN0X29uX3N0YWNrWzJdOwo+ICAgCWJsa19xY190IHJldCA9IEJMS19RQ19U
X05PTkU7Cj4gQEAgLTEwNDcsNyArMTE2MSwxNSBAQCBzdGF0aWMgYmxrX3FjX3QgX19zdWJtaXRf
YmlvX25vYWNjdChzdHJ1Y3QgYmlvICpiaW8pCj4gICAJCWJpb19saXN0X29uX3N0YWNrWzFdID0g
YmlvX2xpc3Rfb25fc3RhY2tbMF07Cj4gICAJCWJpb19saXN0X2luaXQoJmJpb19saXN0X29uX3N0
YWNrWzBdKTsKPiAgIAo+IC0JCXJldCA9IF9fc3VibWl0X2JpbyhiaW8pOwo+ICsJCWlmIChpb2Mg
JiYgcXVldWVfaXNfbXEocSkgJiYgKGJpby0+Ymlfb3BmICYgUkVRX0hJUFJJKSkgewo+ICsJCQli
b29sIHF1ZXVlZCA9IGJsa19iaW9fcG9sbF9wcmVwX3N1Ym1pdChpb2MsIGJpbyk7Cj4gKwo+ICsJ
CQlyZXQgPSBfX3N1Ym1pdF9iaW8oYmlvKTsKPiArCQkJaWYgKHF1ZXVlZCkKPiArCQkJCWJpb19z
ZXRfcHJpdmF0ZV9kYXRhKGJpbywgcmV0KTsKCklzbid0IHRoaXMgcmFjeT8KSSB3YXMgdW5kZXIg
dGhlIGltcHJlc3Npb24gdGhhdCB0aGUgYmlvIG1pZ2h0IGhhdmUgYmVlbiBjb21wbGV0ZWQgYmVm
b3JlIApfX3N1Ym1pdF9iaW8oKSByZXR1cm5zLCB3aGljaCB3b3VsZCBtZWFuIHRoZSBjYWxsIHRv
IApiaW9fc2V0X3ByaXZhdGVfZGF0YSgpIHdvdWxkIGJlIGV4ZWN1dGVkIG9uIGEgY29tcGxldGVk
IGJpbyAoYW5kIHRoZSBiaW8gCndvbid0IGhhdmUgdGhlIHByaXZhdGUgZGF0YSBzZXQgYXQgY29t
cGxldGlvbiB0aW1lKS4KSG1tPwoKCj4gKwkJfSBlbHNlIHsKPiArCQkJcmV0ID0gX19zdWJtaXRf
YmlvKGJpbyk7Cj4gKwkJfQo+ICAgCj4gICAJCS8qCj4gICAJCSAqIFNvcnQgbmV3IGJpb3MgaW50
byB0aG9zZSBmb3IgYSBsb3dlciBsZXZlbCBhbmQgdGhvc2UgZm9yIHRoZQo+IEBAIC0xMDczLDYg
KzExOTUsMzMgQEAgc3RhdGljIGJsa19xY190IF9fc3VibWl0X2Jpb19ub2FjY3Qoc3RydWN0IGJp
byAqYmlvKQo+ICAgCXJldHVybiByZXQ7Cj4gICB9Cj4gICAKPiArc3RhdGljIGlubGluZSBibGtf
cWNfdCBfX3N1Ym1pdF9iaW9fbm9hY2N0X3BvbGwoc3RydWN0IGJpbyAqYmlvLAo+ICsJCXN0cnVj
dCBpb19jb250ZXh0ICppb2MpCj4gK3sKPiArCXN0cnVjdCBibGtfYmlvX3BvbGxfY3R4ICpwYyA9
IGlvYy0+ZGF0YTsKPiArCj4gKwlfX3N1Ym1pdF9iaW9fbm9hY2N0X2N0eChiaW8sIGlvYyk7Cj4g
Kwo+ICsJLyogYmlvIHN1Ym1pc3Npb25zIHF1ZXVlZCB0byBwZXItdGFzayBwb2xsIGNvbnRleHQg
Ki8KPiArCWlmIChSRUFEX09OQ0UocGMtPnNxLT5ucl9ncnBzKSkKPiArCQlyZXR1cm4gY3VycmVu
dC0+cGlkOwo+ICsKPiArCS8qIHN3YXBwZXIncyBwaWQgaXMgMCwgYnV0IGl0IGNhbid0IHN1Ym1p
dCBwb2xsIElPIGZvciB1cyAqLwo+ICsJcmV0dXJuIEJMS19RQ19UX0JJT19OT05FOwo+ICt9Cj4g
Kwo+ICtzdGF0aWMgaW5saW5lIGJsa19xY190IF9fc3VibWl0X2Jpb19ub2FjY3Qoc3RydWN0IGJp
byAqYmlvKQo+ICt7Cj4gKwlzdHJ1Y3QgaW9fY29udGV4dCAqaW9jID0gY3VycmVudC0+aW9fY29u
dGV4dDsKPiArCj4gKwlpZiAoaW9jICYmIGlvYy0+ZGF0YSAmJiAoYmlvLT5iaV9vcGYgJiBSRVFf
SElQUkkpKQo+ICsgPiArCXJldHVybiBfX3N1Ym1pdF9iaW9fbm9hY2N0X3BvbGwoYmlvLCBpb2Mp
Owo+ICsKPiArCV9fc3VibWl0X2Jpb19ub2FjY3RfY3R4KGJpbywgTlVMTCk7Cj4gKwo+ICsJcmV0
dXJuIEJMS19RQ19UX0JJT19OT05FOwoKU2hvdWxkbid0IHlvdSByZXR1cm4gdGhlIHJldHVybiB2
YWx1ZSBmcm9tIF9fc3VibWl0X2Jpb19ub2FjY3RfY3R4KCkgaGVyZT8KCj4gK30KPiArCj4gICBz
dGF0aWMgYmxrX3FjX3QgX19zdWJtaXRfYmlvX25vYWNjdF9tcShzdHJ1Y3QgYmlvICpiaW8pCj4g
ICB7Cj4gICAJc3RydWN0IGJpb19saXN0IGJpb19saXN0WzJdID0geyB9Owo+IGRpZmYgLS1naXQg
YS9ibG9jay9ibGstaW9jLmMgYi9ibG9jay9ibGstaW9jLmMKPiBpbmRleCA1NTc0YzM5OGVmZjYu
LmMxZmQ3YzU5M2E1NCAxMDA2NDQKPiAtLS0gYS9ibG9jay9ibGstaW9jLmMKPiArKysgYi9ibG9j
ay9ibGstaW9jLmMKPiBAQCAtMjExLDYgKzIxMSw5IEBAIHZvaWQgZXhpdF9pb19jb250ZXh0KHN0
cnVjdCB0YXNrX3N0cnVjdCAqdGFzaykKPiAgIAl0YXNrLT5pb19jb250ZXh0ID0gTlVMTDsKPiAg
IAl0YXNrX3VubG9jayh0YXNrKTsKPiAgIAo+ICsJLyogZHJhaW4gaW8gcG9sbCBzdWJtaXNzaW9u
cyAqLwo+ICsJYmxrX2Jpb19wb2xsX2lvX2RyYWluKGlvYyk7Cj4gKwo+ICAgCWF0b21pY19kZWMo
JmlvYy0+bnJfdGFza3MpOwo+ICAgCXB1dF9pb19jb250ZXh0X2FjdGl2ZShpb2MpOwo+ICAgfQo+
IGRpZmYgLS1naXQgYS9ibG9jay9ibGstbXEuYyBiL2Jsb2NrL2Jsay1tcS5jCj4gaW5kZXggMGNi
ODhjNzE5OTE2Li5iNjVmMmMxNzBmYjAgMTAwNjQ0Cj4gLS0tIGEvYmxvY2svYmxrLW1xLmMKPiAr
KysgYi9ibG9jay9ibGstbXEuYwo+IEBAIC0zODY1LDE0ICszODY1LDI1MiBAQCBzdGF0aWMgaW5s
aW5lIGludCBibGtfbXFfcG9sbF9oY3R4KHN0cnVjdCByZXF1ZXN0X3F1ZXVlICpxLAo+ICAgCXJl
dHVybiByZXQ7Cj4gICB9Cj4gICAKPiArc3RhdGljIGludCBibGtfbXFfcG9sbF9pbyhzdHJ1Y3Qg
YmlvICpiaW8pCj4gK3sKPiArCXN0cnVjdCByZXF1ZXN0X3F1ZXVlICpxID0gYmlvLT5iaV9iZGV2
LT5iZF9kaXNrLT5xdWV1ZTsKPiArCWJsa19xY190IGNvb2tpZSA9IGJpb19nZXRfcHJpdmF0ZV9k
YXRhKGJpbyk7Cj4gKwlpbnQgcmV0ID0gMDsKPiArCj4gKwlpZiAoIWJpb19mbGFnZ2VkKGJpbywg
QklPX0RPTkUpICYmIGJsa19xY190X3ZhbGlkKGNvb2tpZSkpIHsKPiArCQlzdHJ1Y3QgYmxrX21x
X2h3X2N0eCAqaGN0eCA9Cj4gKwkJCXEtPnF1ZXVlX2h3X2N0eFtibGtfcWNfdF90b19xdWV1ZV9u
dW0oY29va2llKV07Cj4gKwo+ICsJCXJldCArPSBibGtfbXFfcG9sbF9oY3R4KHEsIGhjdHgpOwo+
ICsJfQo+ICsJcmV0dXJuIHJldDsKPiArfQo+ICsKPiArc3RhdGljIGludCBibGtfYmlvX3BvbGxf
YW5kX2VuZF9pbyhzdHJ1Y3QgYmlvX2dycF9saXN0ICpncnBzKQo+ICt7Cj4gKwlpbnQgcmV0ID0g
MDsKPiArCWludCBpOwo+ICsKPiArCS8qCj4gKwkgKiBQb2xsIGh3IHF1ZXVlIGZpcnN0Lgo+ICsJ
ICoKPiArCSAqIFRPRE86IGxpbWl0IG1heCBwb2xsIHRpbWVzIGFuZCBtYWtlIHN1cmUgdG8gbm90
IHBvbGwgc2FtZQo+ICsJICogaHcgcXVldWUgb25lIG1vcmUgdGltZS4KPiArCSAqLwo+ICsJZm9y
IChpID0gMDsgaSA8IGdycHMtPm5yX2dycHM7IGkrKykgewo+ICsJCXN0cnVjdCBiaW9fZ3JwX2xp
c3RfZGF0YSAqZ3JwID0gJmdycHMtPmhlYWRbaV07Cj4gKwkJc3RydWN0IGJpbyAqYmlvOwo+ICsK
PiArCQlpZiAoYmlvX2dycF9saXN0X2dycF9lbXB0eShncnApKQo+ICsJCQljb250aW51ZTsKPiAr
Cj4gKwkJZm9yIChiaW8gPSBncnAtPmxpc3QuaGVhZDsgYmlvOyBiaW8gPSBiaW8tPmJpX3BvbGwp
Cj4gKwkJCXJldCArPSBibGtfbXFfcG9sbF9pbyhiaW8pOwo+ICsJfQo+ICsKPiArCS8qIHJlYXAg
YmlvcyAqLwo+ICsJZm9yIChpID0gMDsgaSA8IGdycHMtPm5yX2dycHM7IGkrKykgewo+ICsJCXN0
cnVjdCBiaW9fZ3JwX2xpc3RfZGF0YSAqZ3JwID0gJmdycHMtPmhlYWRbaV07Cj4gKwkJc3RydWN0
IGJpbyAqYmlvOwo+ICsJCXN0cnVjdCBiaW9fbGlzdCBibDsKPiArCj4gKwkJaWYgKGJpb19ncnBf
bGlzdF9ncnBfZW1wdHkoZ3JwKSkKPiArCQkJY29udGludWU7Cj4gKwo+ICsJCWJpb19saXN0X2lu
aXQoJmJsKTsKPiArCj4gKwkJd2hpbGUgKChiaW8gPSBfX2Jpb19ncnBfbGlzdF9wb3AoJmdycC0+
bGlzdCkpKSB7Cj4gKwkJCWlmIChiaW9fZmxhZ2dlZChiaW8sIEJJT19ET05FKSkgewo+ICsJCQkJ
Lyogbm93IHJlY292ZXIgb3JpZ2luYWwgZGF0YSAqLwo+ICsJCQkJYmlvLT5iaV9wb2xsID0gZ3Jw
LT5ncnBfZGF0YTsKPiArCj4gKwkJCQkvKiBjbGVhciBCSU9fRU5EX0JZX1BPTEwgYW5kIGVuZCBt
ZSByZWFsbHkgKi8KPiArCQkJCWJpb19jbGVhcl9mbGFnKGJpbywgQklPX0VORF9CWV9QT0xMKTsK
PiArCQkJCWJpb19lbmRpbyhiaW8pOwo+ICsJCQl9IGVsc2Ugewo+ICsJCQkJX19iaW9fZ3JwX2xp
c3RfYWRkKCZibCwgYmlvKTsKPiArCQkJfQo+ICsJCX0KPiArCQlfX2Jpb19ncnBfbGlzdF9tZXJn
ZSgmZ3JwLT5saXN0LCAmYmwpOwo+ICsJfQo+ICsJcmV0dXJuIHJldDsKPiArfQo+ICsKPiArc3Rh
dGljIHZvaWQgYmxrX2Jpb19wb2xsX3BhY2tfZ3JvdXBzKHN0cnVjdCBiaW9fZ3JwX2xpc3QgKmdy
cHMpCj4gK3sKPiArCWludCBpLCBqLCBrID0gMDsKPiArCWludCBjbnQgPSAwOwo+ICsKPiArCWZv
ciAoaSA9IGdycHMtPm5yX2dycHMgLSAxOyBpID49IDA7IGktLSkgewo+ICsJCXN0cnVjdCBiaW9f
Z3JwX2xpc3RfZGF0YSAqZ3JwID0gJmdycHMtPmhlYWRbaV07Cj4gKwkJc3RydWN0IGJpb19ncnBf
bGlzdF9kYXRhICpob2xlID0gTlVMTDsKPiArCj4gKwkJaWYgKGJpb19ncnBfbGlzdF9ncnBfZW1w
dHkoZ3JwKSkgewo+ICsJCQljbnQrKzsKPiArCQkJY29udGludWU7Cj4gKwkJfQo+ICsKPiArCQlm
b3IgKGogPSBrOyBqIDwgaTsgaisrKSB7Cj4gKwkJCWlmIChiaW9fZ3JwX2xpc3RfZ3JwX2VtcHR5
KCZncnBzLT5oZWFkW2pdKSkgewo+ICsJCQkJaG9sZSA9ICZncnBzLT5oZWFkW2pdOwo+ICsJCQkJ
YnJlYWs7Cj4gKwkJCX0KPiArCQl9Cj4gKwkJaWYgKGhvbGUgPT0gTlVMTCkKPiArCQkJYnJlYWs7
Cj4gKwkJKmhvbGUgPSAqZ3JwOwo+ICsJCWNudCsrOwo+ICsJCWsgPSBqOwo+ICsJfQo+ICsKPiAr
CWdycHMtPm5yX2dycHMgLT0gY250Owo+ICt9Cj4gKwo+ICsjZGVmaW5lICBNQVhfQklPX0dSUFNf
T05fU1RBQ0sgIDgKPiArc3RydWN0IGJpb19ncnBfbGlzdF9zdGFjayB7Cj4gKwl1bnNpZ25lZCBp
bnQgbWF4X25yX2dycHMsIG5yX2dycHM7Cj4gKwlzdHJ1Y3QgYmlvX2dycF9saXN0X2RhdGEgaGVh
ZFtNQVhfQklPX0dSUFNfT05fU1RBQ0tdOwo+ICt9Owo+ICsKPiArc3RhdGljIGludCBibGtfYmlv
X3BvbGxfaW8oc3RydWN0IGlvX2NvbnRleHQgKnN1Ym1pdF9pb2MsCj4gKwkJc3RydWN0IGlvX2Nv
bnRleHQgKnBvbGxfaW9jKQo+ICsKPiArewo+ICsJc3RydWN0IGJpb19ncnBfbGlzdF9zdGFjayBf
YmlvX2dycHMgPSB7Cj4gKwkJLm1heF9ucl9ncnBzCT0gQVJSQVlfU0laRShfYmlvX2dycHMuaGVh
ZCksCj4gKwkJLm5yX2dycHMJPSAwCj4gKwl9Owo+ICsJc3RydWN0IGJpb19ncnBfbGlzdCAqYmlv
X2dycHMgPSAoc3RydWN0IGJpb19ncnBfbGlzdCAqKSZfYmlvX2dycHM7Cj4gKwlzdHJ1Y3QgYmxr
X2Jpb19wb2xsX2N0eCAqc3VibWl0X2N0eCA9IHN1Ym1pdF9pb2MtPmRhdGE7Cj4gKwlzdHJ1Y3Qg
YmxrX2Jpb19wb2xsX2N0eCAqcG9sbF9jdHggPSBwb2xsX2lvYyA/Cj4gKwkJcG9sbF9pb2MtPmRh
dGEgOiBOVUxMOwo+ICsJaW50IHJldCA9IDA7Cj4gKwo+ICsJLyoKPiArCSAqIE1vdmUgSU8gc3Vi
bWlzc2lvbiByZXN1bHQgZnJvbSBzdWJtaXNzaW9uIHF1ZXVlIGluIHN1Ym1pc3Npb24KPiArCSAq
IGNvbnRleHQgdG8gcG9sbCBxdWV1ZSBvZiBwb2xsIGNvbnRleHQuCj4gKwkgKi8KPiArCWlmIChS
RUFEX09OQ0Uoc3VibWl0X2N0eC0+c3EtPm5yX2dycHMpID4gMCkgewo+ICsJCXNwaW5fbG9jaygm
c3VibWl0X2N0eC0+c3FfbG9jayk7Cj4gKwkJYmlvX2dycF9saXN0X21vdmUoYmlvX2dycHMsIHN1
Ym1pdF9jdHgtPnNxKTsKPiArCQlzcGluX3VubG9jaygmc3VibWl0X2N0eC0+c3FfbG9jayk7Cj4g
Kwl9Cj4gKwo+ICsJLyogbWVyZ2UgbmV3IGJpb3MgZmlyc3QsIHRoZW4gc3RhcnQgdG8gcG9sbCBi
aW9zIGZyb20gcHEgKi8KPiArCWlmIChwb2xsX2N0eCkgewo+ICsJCXNwaW5fbG9jaygmcG9sbF9j
dHgtPnBxX2xvY2spOwo+ICsJCWJpb19ncnBfbGlzdF9tb3ZlKHBvbGxfY3R4LT5wcSwgYmlvX2dy
cHMpOwo+ICsJCWJpb19ncnBfbGlzdF9tb3ZlKGJpb19ncnBzLCBwb2xsX2N0eC0+cHEpOwo+ICsJ
CXNwaW5fdW5sb2NrKCZwb2xsX2N0eC0+cHFfbG9jayk7Cj4gKwl9Cj4gKwo+ICsJZG8gewo+ICsJ
CXJldCArPSBibGtfYmlvX3BvbGxfYW5kX2VuZF9pbyhiaW9fZ3Jwcyk7Cj4gKwkJYmxrX2Jpb19w
b2xsX3BhY2tfZ3JvdXBzKGJpb19ncnBzKTsKPiArCj4gKwkJaWYgKGJpb19ncnBzLT5ucl9ncnBz
KSB7Cj4gKwkJCS8qCj4gKwkJCSAqIG1vdmUgYmFjaywgYW5kIGtlZXAgcG9sbGluZyB1bnRpbCBh
bGwgY2FuIGJlCj4gKwkJCSAqIGhlbGQgaW4gZWl0aGVyIHBvbGwgcXVldWUgb3Igc3VibWlzc2lv
biBxdWV1ZS4KPiArCQkJICovCj4gKwkJCWlmIChwb2xsX2N0eCkgewo+ICsJCQkJc3Bpbl9sb2Nr
KCZwb2xsX2N0eC0+cHFfbG9jayk7Cj4gKwkJCQliaW9fZ3JwX2xpc3RfbW92ZShwb2xsX2N0eC0+
cHEsIGJpb19ncnBzKTsKPiArCQkJCXNwaW5fdW5sb2NrKCZwb2xsX2N0eC0+cHFfbG9jayk7Cj4g
KwkJCX0gZWxzZSB7Cj4gKwkJCQlzcGluX2xvY2soJnN1Ym1pdF9jdHgtPnNxX2xvY2spOwo+ICsJ
CQkJYmlvX2dycF9saXN0X21vdmUoc3VibWl0X2N0eC0+c3EsIGJpb19ncnBzKTsKPiArCQkJCXNw
aW5fdW5sb2NrKCZzdWJtaXRfY3R4LT5zcV9sb2NrKTsKPiArCQkJfQo+ICsJCX0KPiArCX0gd2hp
bGUgKGJpb19ncnBzLT5ucl9ncnBzID4gMCk7Cj4gKwo+ICsJcmV0dXJuIHJldDsKPiArfQo+ICsK
PiArdm9pZCBibGtfYmlvX3BvbGxfaW9fZHJhaW4oc3RydWN0IGlvX2NvbnRleHQgKnN1Ym1pdF9p
b2MpCj4gK3sKPiArCXN0cnVjdCBibGtfYmlvX3BvbGxfY3R4ICpzdWJtaXRfY3R4ID0gc3VibWl0
X2lvYy0+ZGF0YTsKPiArCj4gKwlpZiAoIXN1Ym1pdF9jdHgpCj4gKwkJcmV0dXJuOwo+ICsKPiAr
CXNwaW5fbG9jaygmc3VibWl0X2N0eC0+c3FfbG9jayk7Cj4gKwl3aGlsZSAoUkVBRF9PTkNFKHN1
Ym1pdF9jdHgtPnNxLT5ucl9ncnBzKSA+IDApIHsKPiArCQlibGtfYmlvX3BvbGxfYW5kX2VuZF9p
byhzdWJtaXRfY3R4LT5zcSk7Cj4gKwkJYmxrX2Jpb19wb2xsX3BhY2tfZ3JvdXBzKHN1Ym1pdF9j
dHgtPnNxKTsKPiArCQljcHVfcmVsYXgoKTsKPiArCX0KPiArCXNwaW5fdW5sb2NrKCZzdWJtaXRf
Y3R4LT5zcV9sb2NrKTsKPiArfQo+ICsKPiArc3RhdGljIGJvb2wgYmxrX2Jpb19pb2NfdmFsaWQo
c3RydWN0IHRhc2tfc3RydWN0ICp0KQo+ICt7Cj4gKwlpZiAoIXQpCj4gKwkJcmV0dXJuIGZhbHNl
Owo+ICsKPiArCWlmICghdC0+aW9fY29udGV4dCkKPiArCQlyZXR1cm4gZmFsc2U7Cj4gKwo+ICsJ
aWYgKCF0LT5pb19jb250ZXh0LT5kYXRhKQo+ICsJCXJldHVybiBmYWxzZTsKPiArCj4gKwlyZXR1
cm4gdHJ1ZTsKPiArfQo+ICsKPiArc3RhdGljIGludCBfX2Jsa19iaW9fcG9sbChibGtfcWNfdCBj
b29raWUpCj4gK3sKPiArCXN0cnVjdCBpb19jb250ZXh0ICpwb2xsX2lvYyA9IGN1cnJlbnQtPmlv
X2NvbnRleHQ7Cj4gKwlwaWRfdCBwaWQ7Cj4gKwlzdHJ1Y3QgdGFza19zdHJ1Y3QgKnN1Ym1pdF90
YXNrOwo+ICsJaW50IHJldDsKPiArCj4gKwlwaWQgPSAocGlkX3QpY29va2llOwo+ICsKPiArCS8q
IGlvIHBvbGwgb2Z0ZW4gc2hhcmUgaW8gc3VibWlzc2lvbiBjb250ZXh0ICovCj4gKwlpZiAobGlr
ZWx5KGN1cnJlbnQtPnBpZCA9PSBwaWQgJiYgYmxrX2Jpb19pb2NfdmFsaWQoY3VycmVudCkpKQo+
ICsJCXJldHVybiBibGtfYmlvX3BvbGxfaW8ocG9sbF9pb2MsIHBvbGxfaW9jKTsKPiArCj4gKwlz
dWJtaXRfdGFzayA9IGZpbmRfZ2V0X3Rhc2tfYnlfdnBpZChwaWQpOwo+ICsJaWYgKGxpa2VseShi
bGtfYmlvX2lvY192YWxpZChzdWJtaXRfdGFzaykpKQo+ICsJCXJldCA9IGJsa19iaW9fcG9sbF9p
byhzdWJtaXRfdGFzay0+aW9fY29udGV4dCwgcG9sbF9pb2MpOwo+ICsJZWxzZQo+ICsJCXJldCA9
IDA7Cj4gKwlpZiAobGlrZWx5KHN1Ym1pdF90YXNrKSkKPiArCQlwdXRfdGFza19zdHJ1Y3Qoc3Vi
bWl0X3Rhc2spOwo+ICsKPiArCXJldHVybiByZXQ7Cj4gK30KPiArCj4gICBzdGF0aWMgaW50IGJs
a19iaW9fcG9sbChzdHJ1Y3QgcmVxdWVzdF9xdWV1ZSAqcSwgYmxrX3FjX3QgY29va2llLCBib29s
IHNwaW4pCj4gICB7Cj4gKwlsb25nIHN0YXRlOwo+ICsKPiArCS8qIG5vIG5lZWQgdG8gcG9sbCAq
Lwo+ICsJaWYgKGNvb2tpZSA9PSBCTEtfUUNfVF9CSU9fTk9ORSkKPiArCQlyZXR1cm4gMDsKPiAr
Cj4gICAJLyoKPiAgIAkgKiBDcmVhdGUgcG9sbCBxdWV1ZSBmb3Igc3RvcmluZyBwb2xsIGJpbyBh
bmQgaXRzIGNvb2tpZSBmcm9tCj4gICAJICogc3VibWlzc2lvbiBxdWV1ZQo+ICAgCSAqLwo+ICAg
CWJsa19jcmVhdGVfaW9fcG9sbF9jb250ZXh0KHEpOwo+ICAgCj4gKwlzdGF0ZSA9IGN1cnJlbnQt
PnN0YXRlOwo+ICsJZG8gewo+ICsJCWludCByZXQ7Cj4gKwo+ICsJCXJldCA9IF9fYmxrX2Jpb19w
b2xsKGNvb2tpZSk7Cj4gKwkJaWYgKHJldCA+IDApIHsKPiArCQkJX19zZXRfY3VycmVudF9zdGF0
ZShUQVNLX1JVTk5JTkcpOwo+ICsJCQlyZXR1cm4gcmV0Owo+ICsJCX0KPiArCj4gKwkJaWYgKHNp
Z25hbF9wZW5kaW5nX3N0YXRlKHN0YXRlLCBjdXJyZW50KSkKPiArCQkJX19zZXRfY3VycmVudF9z
dGF0ZShUQVNLX1JVTk5JTkcpOwo+ICsKPiArCQlpZiAoY3VycmVudC0+c3RhdGUgPT0gVEFTS19S
VU5OSU5HKQo+ICsJCQlyZXR1cm4gMTsKPiArCQlpZiAocmV0IDwgMCB8fCAhc3BpbikKPiArCQkJ
YnJlYWs7Cj4gKwkJY3B1X3JlbGF4KCk7Cj4gKwl9IHdoaWxlICghbmVlZF9yZXNjaGVkKCkpOwo+
ICsKPiArCV9fc2V0X2N1cnJlbnRfc3RhdGUoVEFTS19SVU5OSU5HKTsKPiAgIAlyZXR1cm4gMDsK
PiAgIH0KPiAgIAo+IEBAIC0zODkzLDcgKzQxMzEsNyBAQCBpbnQgYmxrX3BvbGwoc3RydWN0IHJl
cXVlc3RfcXVldWUgKnEsIGJsa19xY190IGNvb2tpZSwgYm9vbCBzcGluKQo+ICAgCXN0cnVjdCBi
bGtfbXFfaHdfY3R4ICpoY3R4Owo+ICAgCWxvbmcgc3RhdGU7Cj4gICAKPiAtCWlmICghYmxrX3Fj
X3RfdmFsaWQoY29va2llKSB8fCAhYmxrX3F1ZXVlX3BvbGwocSkpCj4gKwlpZiAoIWJsa19xdWV1
ZV9wb2xsKHEpIHx8IChxdWV1ZV9pc19tcShxKSAmJiAhYmxrX3FjX3RfdmFsaWQoY29va2llKSkp
Cj4gICAJCXJldHVybiAwOwo+ICAgCj4gICAJaWYgKGN1cnJlbnQtPnBsdWcpCj4gZGlmZiAtLWdp
dCBhL2Jsb2NrL2Jsay5oIGIvYmxvY2svYmxrLmgKPiBpbmRleCBjMWQ4NDU2NjU2ZGYuLmMwMjE2
ZjJlNjI5MyAxMDA2NDQKPiAtLS0gYS9ibG9jay9ibGsuaAo+ICsrKyBiL2Jsb2NrL2Jsay5oCj4g
QEAgLTM4MSw2ICszODEsNyBAQCBzdHJ1Y3QgYmxrX2Jpb19wb2xsX2N0eCB7Cj4gICAjZGVmaW5l
IEJMS19CSU9fUE9MTF9TUV9TWgkJMTZVCj4gICAjZGVmaW5lIEJMS19CSU9fUE9MTF9QUV9TWgkJ
KEJMS19CSU9fUE9MTF9TUV9TWiAqIDIpCj4gICAKPiArdm9pZCBibGtfYmlvX3BvbGxfaW9fZHJh
aW4oc3RydWN0IGlvX2NvbnRleHQgKnN1Ym1pdF9pb2MpOwo+ICAgdm9pZCBiaW9fcG9sbF9jdHhf
YWxsb2Moc3RydWN0IGlvX2NvbnRleHQgKmlvYyk7Cj4gICAKPiAgIHN0YXRpYyBpbmxpbmUgdm9p
ZCBibGtfY3JlYXRlX2lvX3BvbGxfY29udGV4dChzdHJ1Y3QgcmVxdWVzdF9xdWV1ZSAqcSkKPiBA
QCAtNDA1LDQgKzQwNiwxMyBAQCBzdGF0aWMgaW5saW5lIHZvaWQgYmlvX3NldF9wcml2YXRlX2Rh
dGEoc3RydWN0IGJpbyAqYmlvLCB1bnNpZ25lZCBpbnQgZGF0YSkKPiAgIAliaW8tPmJpX2l0ZXIu
YmlfcHJpdmF0ZV9kYXRhID0gZGF0YTsKPiAgIH0KPiAgIAo+ICtCSU9fTElTVF9IRUxQRVJTKF9f
YmlvX2dycF9saXN0LCBwb2xsKTsKPiArCj4gK3N0YXRpYyBpbmxpbmUgYm9vbCBiaW9fZ3JwX2xp
c3RfZ3JwX2VtcHR5KHN0cnVjdCBiaW9fZ3JwX2xpc3RfZGF0YSAqZ3JwKQo+ICt7Cj4gKwlyZXR1
cm4gYmlvX2xpc3RfZW1wdHkoJmdycC0+bGlzdCk7Cj4gK30KPiArCj4gK3ZvaWQgYmlvX2dycF9s
aXN0X21vdmUoc3RydWN0IGJpb19ncnBfbGlzdCAqZHN0LCBzdHJ1Y3QgYmlvX2dycF9saXN0ICpz
cmMpOwo+ICsKPiAgICNlbmRpZiAvKiBCTEtfSU5URVJOQUxfSCAqLwo+IGRpZmYgLS1naXQgYS9p
bmNsdWRlL2xpbnV4L2Jsa190eXBlcy5oIGIvaW5jbHVkZS9saW51eC9ibGtfdHlwZXMuaAo+IGlu
ZGV4IDk5MTYwZDU4OGMyZC4uYmVhZWIzNzI5ZjExIDEwMDY0NAo+IC0tLSBhL2luY2x1ZGUvbGlu
dXgvYmxrX3R5cGVzLmgKPiArKysgYi9pbmNsdWRlL2xpbnV4L2Jsa190eXBlcy5oCj4gQEAgLTIz
NSw3ICsyMzUsMTggQEAgc3RydWN0IGJpbyB7Cj4gICAKPiAgIAlzdHJ1Y3QgYnZlY19pdGVyCWJp
X2l0ZXI7Cj4gICAKPiAtCWJpb19lbmRfaW9fdAkJKmJpX2VuZF9pbzsKPiArCXVuaW9uIHsKPiAr
CQliaW9fZW5kX2lvX3QJCSpiaV9lbmRfaW87Cj4gKwkJLyoKPiArCQkgKiBiaW8gYmFzZWQgaW8g
cG9sbGluZyBuZWVkcyB0byB0cmFjayBiaW8gdmlhIGJpbyBncm91cAo+ICsJCSAqIGxpc3Qgd2hp
Y2ggZ3JvdXBzIGJpb3MgYnkgdGhlaXIgLmJpX2VuZF9pbywgYW5kIG9yaWdpbmFsCj4gKwkJICog
LmJpX2VuZF9pbyBpcyBzYXZlZCBpbnRvIHRoZSBncm91cCBoZWFkLiBXaWxsIHJlY292ZXIKPiAr
CQkgKiAuYmlfZW5kX2lvIGJlZm9yZSByZWFsbHkgZW5kaW5nIGJpby4gQklPX0VORF9CWV9QT0xM
Cj4gKwkJICogd2lsbCBtYWtlIHN1cmUgdGhhdCB0aGlzIGJpbyB3b24ndCBiZSBlbmRlZCBiZWZv
cmUKPiArCQkgKiByZWNvdmVyaW5nIC5iaV9lbmRfaW8uCj4gKwkJICovCj4gKwkJc3RydWN0IGJp
bwkJKmJpX3BvbGw7Cj4gKwl9Owo+ICAgCj4gICAJdm9pZAkJCSpiaV9wcml2YXRlOwo+ICAgI2lm
ZGVmIENPTkZJR19CTEtfQ0dST1VQCj4gQEAgLTMwNCw2ICszMTUsOSBAQCBlbnVtIHsKPiAgIAlC
SU9fQ0dST1VQX0FDQ1QsCS8qIGhhcyBiZWVuIGFjY291bnRlZCB0byBhIGNncm91cCAqLwo+ICAg
CUJJT19UUkFDS0VELAkJLyogc2V0IGlmIGJpbyBnb2VzIHRocm91Z2ggdGhlIHJxX3FvcyBwYXRo
ICovCj4gICAJQklPX1JFTUFQUEVELAo+ICsJQklPX0VORF9CWV9QT0xMLAkvKiBlbmQgYnkgYmxr
X2Jpb19wb2xsKCkgZXhwbGljaXRseSAqLwo+ICsJLyogc2V0IHdoZW4gYmlvIGNhbiBiZSBlbmRl
ZCwgdXNlZCBmb3IgYmlvIHdpdGggQklPX0VORF9CWV9QT0xMICovCj4gKwlCSU9fRE9ORSwKPiAg
IAlCSU9fRkxBR19MQVNUCj4gICB9Owo+ICAgCj4gQEAgLTUxMyw2ICs1MjcsOCBAQCB0eXBlZGVm
IHVuc2lnbmVkIGludCBibGtfcWNfdDsKPiAgICNkZWZpbmUgQkxLX1FDX1RfTk9ORQkJLTFVCj4g
ICAjZGVmaW5lIEJMS19RQ19UX1NISUZUCQkxNgo+ICAgI2RlZmluZSBCTEtfUUNfVF9JTlRFUk5B
TAkoMVUgPDwgMzEpCj4gKy8qIG9ubHkgdXNlZCBmb3IgYmlvIGJhc2VkIHN1Ym1pc3Npb24sIGhh
cyB0byBiZSBkZWZpbmVkIGFzIDAgKi8KPiArI2RlZmluZSBCTEtfUUNfVF9CSU9fTk9ORQkwCj4g
ICAKPiAgIHN0YXRpYyBpbmxpbmUgYm9vbCBibGtfcWNfdF92YWxpZChibGtfcWNfdCBjb29raWUp
Cj4gICB7Cj4gCgpDaGVlcnMsCgpIYW5uZXMKLS0gCkRyLiBIYW5uZXMgUmVpbmVja2UgICAgICAg
ICAgICAgICAgS2VybmVsIFN0b3JhZ2UgQXJjaGl0ZWN0CmhhcmVAc3VzZS5kZSAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICs0OSA5MTEgNzQwNTMgNjg4ClNVU0UgU29mdHdhcmUgU29sdXRp
b25zIEdtYkgsIE1heGZlbGRzdHIuIDUsIDkwNDA5IE7DvHJuYmVyZwpIUkIgMzY4MDkgKEFHIE7D
vHJuYmVyZyksIEdlc2Now6RmdHNmw7xocmVyOiBGZWxpeCBJbWVuZMO2cmZmZXIKCgotLQpkbS1k
ZXZlbCBtYWlsaW5nIGxpc3QKZG0tZGV2ZWxAcmVkaGF0LmNvbQpodHRwczovL2xpc3RtYW4ucmVk
aGF0LmNvbS9tYWlsbWFuL2xpc3RpbmZvL2RtLWRldmVs

