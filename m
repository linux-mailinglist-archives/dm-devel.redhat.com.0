Return-Path: <dm-devel-bounces@redhat.com>
X-Original-To: lists+dm-devel@lfdr.de
Delivered-To: lists+dm-devel@lfdr.de
Received: from us-smtp-delivery-124.mimecast.com (us-smtp-delivery-124.mimecast.com [216.205.24.124])
	by mail.lfdr.de (Postfix) with ESMTP id 7FD94389D8E
	for <lists+dm-devel@lfdr.de>; Thu, 20 May 2021 08:15:04 +0200 (CEST)
Received: from mimecast-mx01.redhat.com (mimecast-mx01.redhat.com
 [209.132.183.4]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-516-W2tThK9BNdOafui7LNad9w-1; Thu, 20 May 2021 02:14:05 -0400
X-MC-Unique: W2tThK9BNdOafui7LNad9w-1
Received: from smtp.corp.redhat.com (int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	(using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mimecast-mx01.redhat.com (Postfix) with ESMTPS id 8E448101371C;
	Thu, 20 May 2021 06:14:00 +0000 (UTC)
Received: from colo-mx.corp.redhat.com (colo-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.20])
	by smtp.corp.redhat.com (Postfix) with ESMTPS id B72BE60BD9;
	Thu, 20 May 2021 06:13:58 +0000 (UTC)
Received: from lists01.pubmisc.prod.ext.phx2.redhat.com (lists01.pubmisc.prod.ext.phx2.redhat.com [10.5.19.33])
	by colo-mx.corp.redhat.com (Postfix) with ESMTP id A12491800BB8;
	Thu, 20 May 2021 06:13:52 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx05.intmail.prod.int.rdu2.redhat.com
	[10.11.54.5])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id 14K6AgjJ016406 for <dm-devel@listman.util.phx.redhat.com>;
	Thu, 20 May 2021 02:10:42 -0400
Received: by smtp.corp.redhat.com (Postfix)
	id 07141107504; Thu, 20 May 2021 06:10:42 +0000 (UTC)
Delivered-To: dm-devel@redhat.com
Received: from mimecast-mx02.redhat.com
	(mimecast04.extmail.prod.ext.rdu2.redhat.com [10.11.55.20])
	by smtp.corp.redhat.com (Postfix) with ESMTPS id 01B0D10769A
	for <dm-devel@redhat.com>; Thu, 20 May 2021 06:10:38 +0000 (UTC)
Received: from us-smtp-1.mimecast.com (us-smtp-delivery-1.mimecast.com
	[205.139.110.120])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by mimecast-mx02.redhat.com (Postfix) with ESMTPS id B628F101D221
	for <dm-devel@redhat.com>; Thu, 20 May 2021 06:10:38 +0000 (UTC)
Received: from mx2.suse.de (mx2.suse.de [195.135.220.15]) (Using TLS) by
	relay.mimecast.com with ESMTP id us-mta-232-jGWRkonfMAyYXebZF89z-g-1;
	Thu, 20 May 2021 02:10:34 -0400
X-MC-Unique: jGWRkonfMAyYXebZF89z-g-1
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.221.27])
	by mx2.suse.de (Postfix) with ESMTP id 8BE2DAEE7;
	Thu, 20 May 2021 06:10:32 +0000 (UTC)
To: Damien Le Moal <damien.lemoal@wdc.com>, dm-devel@redhat.com,
	Mike Snitzer <snitzer@redhat.com>, linux-block@vger.kernel.org,
	Jens Axboe <axboe@kernel.dk>
References: <20210520042228.974083-1-damien.lemoal@wdc.com>
	<20210520042228.974083-11-damien.lemoal@wdc.com>
From: Hannes Reinecke <hare@suse.de>
Message-ID: <68203e46-01bc-011c-ab8e-9c94ca60adce@suse.de>
Date: Thu, 20 May 2021 08:10:30 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101
	Thunderbird/78.10.0
MIME-Version: 1.0
In-Reply-To: <20210520042228.974083-11-damien.lemoal@wdc.com>
X-Mimecast-Impersonation-Protect: Policy=CLT - Impersonation Protection
	Definition; Similar Internal Domain=false;
	Similar Monitored External Domain=false;
	Custom External Domain=false; Mimecast External Domain=false;
	Newly Observed Domain=false; Internal User Name=false;
	Custom Display Name List=false; Reply-to Address Mismatch=false;
	Targeted Threat Dictionary=false;
	Mimecast Threat Dictionary=false; Custom Threat Dictionary=false
X-Scanned-By: MIMEDefang 2.79 on 10.11.54.5
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id 14K6AgjJ016406
X-loop: dm-devel@redhat.com
Subject: Re: [dm-devel] [PATCH v2 10/11] dm: introduce zone append emulation
X-BeenThere: dm-devel@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
List-Id: device-mapper development <dm-devel.redhat.com>
List-Unsubscribe: <https://listman.redhat.com/mailman/options/dm-devel>,
	<mailto:dm-devel-request@redhat.com?subject=unsubscribe>
List-Archive: <https://listman.redhat.com/archives/dm-devel>
List-Post: <mailto:dm-devel@redhat.com>
List-Help: <mailto:dm-devel-request@redhat.com?subject=help>
List-Subscribe: <https://listman.redhat.com/mailman/listinfo/dm-devel>,
	<mailto:dm-devel-request@redhat.com?subject=subscribe>
Sender: dm-devel-bounces@redhat.com
Errors-To: dm-devel-bounces@redhat.com
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.11
Authentication-Results: relay.mimecast.com;
	auth=pass smtp.auth=CUSA124A263 smtp.mailfrom=dm-devel-bounces@redhat.com
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Content-Language: en-US
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"

T24gNS8yMC8yMSA2OjIyIEFNLCBEYW1pZW4gTGUgTW9hbCB3cm90ZToKPiBGb3Igem9uZWQgdGFy
Z2V0cyB0aGF0IGNhbm5vdCBzdXBwb3J0IHpvbmUgYXBwZW5kIG9wZXJhdGlvbnMsIGltcGxlbWVu
dAo+IGFuIGVtdWxhdGlvbiB1c2luZyByZWd1bGFyIHdyaXRlIG9wZXJhdGlvbnMuIElmIHRoZSBv
cmlnaW5hbCBCSU8KPiBzdWJtaXR0ZWQgYnkgdGhlIHVzZXIgaXMgYSB6b25lIGFwcGVuZCBvcGVy
YXRpb24sIGNoYW5nZSBpdHMgY2xvbmUgaW50bwo+IGEgcmVndWxhciB3cml0ZSBvcGVyYXRpb24g
ZGlyZWN0ZWQgYXQgdGhlIHRhcmdldCB6b25lIHdyaXRlIHBvaW50ZXIKPiBwb3NpdGlvbi4KPiAK
PiBUbyBkbyBzbywgYW4gYXJyYXkgb2Ygd3JpdGUgcG9pbnRlciBvZmZzZXRzICh3cml0ZSBwb2lu
dGVyIHBvc2l0aW9uCj4gcmVsYXRpdmUgdG8gdGhlIHN0YXJ0IG9mIGEgem9uZSkgaXMgYWRkZWQg
dG8gc3RydWN0IG1hcHBlZF9kZXZpY2UuIEFsbAo+IG9wZXJhdGlvbnMgdGhhdCBtb2RpZnkgYSBz
ZXF1ZW50aWFsIHpvbmUgd3JpdGUgcG9pbnRlciAod3JpdGVzLCB6b25lCj4gcmVzZXQsIHpvbmUg
ZmluaXNoIGFuZCB6b25lIGFwcGVuZCkgYXJlIGludGVyc2VwdGVkIGluIF9fbWFwX2JpbygpIGFu
ZAo+IHByb2Nlc3NlZCB1c2luZyB0aGUgbmV3IGZ1bmN0aW9ucyBkbV96b25lX21hcF9iaW8oKS4K
PiAKPiBEZXRlY3Rpb24gb2YgdGhlIHRhcmdldCBhYmlsaXR5IHRvIG5hdGl2ZWx5IHN1cHBvcnQg
em9uZSBhcHBlbmQKPiBvcGVyYXRpb25zIGlzIGRvbmUgZnJvbSBkbV90YWJsZV9zZXRfcmVzdHJp
Y3Rpb25zKCkgYnkgY2FsbGluZyB0aGUKPiBmdW5jdGlvbiBkbV9zZXRfem9uZXNfcmVzdHJpY3Rp
b25zKCkuIEEgdGFyZ2V0IHRoYXQgZG9lcyBub3Qgc3VwcG9ydAo+IHpvbmUgYXBwZW5kIG9wZXJh
dGlvbiwgZWl0aGVyIGJ5IGV4cGxpY2l0bHkgZGVjbGFyaW5nIGl0IHVzaW5nIHRoZSBuZXcKPiBz
dHJ1Y3QgZG1fdGFyZ2V0IGZpZWxkIHpvbmVfYXBwZW5kX25vdF9zdXBwb3J0ZWQsIG9yIGJlY2F1
c2UgdGhlIGRldmljZQo+IHRhYmxlIGNvbnRhaW5zIGEgbm9uLXpvbmVkIGRldmljZSwgaGFzIGl0
cyBtYXBwZWQgZGV2aWNlIG1hcmtlZCB3aXRoIHRoZQo+IG5ldyBmbGFnIERNRl9aT05FX0FQUEVO
RF9FTVVMQVRFRC4gVGhlIGhlbHBlciBmdW5jdGlvbgo+IGRtX2VtdWxhdGVfem9uZV9hcHBlbmQo
KSBpcyBpbnRyb2R1Y2VkIHRvIHRlc3QgYSBtYXBwZWQgZGV2aWNlIGZvciB0aGlzCj4gbmV3IGZs
YWcuCj4gCj4gQXRvbWljaXR5IG9mIHRoZSB6b25lcyB3cml0ZSBwb2ludGVyIHRyYWNraW5nIGFu
ZCB1cGRhdGVzIGlzIGRvbmUgdXNpbmcKPiBhIHpvbmUgd3JpdGUgbG9ja2luZyBtZWNoYW5pc20g
YmFzZWQgb24gYSBiaXRtYXAuIFRoaXMgaXMgc2ltaWxhciB0bwo+IHRoZSBibG9jayBsYXllciBt
ZXRob2QgYnV0IGJhc2VkIG9uIEJJT3MgcmF0aGVyIHRoYW4gc3RydWN0IHJlcXVlc3QuCj4gQSB6
b25lIHdyaXRlIGxvY2sgaXMgdGFrZW4gaW4gZG1fem9uZV9tYXBfYmlvKCkgZm9yIGFueSBjbG9u
ZSBCSU8gd2l0aAo+IGFuIG9wZXJhdGlvbiB0eXBlIHRoYXQgY2hhbmdlcyB0aGUgQklPIHRhcmdl
dCB6b25lIHdyaXRlIHBvaW50ZXIKPiBwb3NpdGlvbi4gVGhlIHpvbmUgd3JpdGUgbG9jayBpcyBy
ZWxlYXNlZCBpZiB0aGUgY2xvbmUgQklPIGlzIGZhaWxlZAo+IGJlZm9yZSBzdWJtaXNzaW9uIG9y
IHdoZW4gZG1fem9uZV9lbmRpbygpIGlzIGNhbGxlZCB3aGVuIHRoZSBjbG9uZSBCSU8KPiBjb21w
bGV0ZXMuCj4gCj4gVGhlIHpvbmUgd3JpdGUgbG9jayBiaXRtYXAgb2YgdGhlIG1hcHBlZCBkZXZp
Y2UsIHRvZ2V0aGVyIHdpdGggYSBiaXRtYXAKPiBpbmRpY2F0aW5nIHpvbmUgdHlwZXMgKGNvbnZf
em9uZXNfYml0bWFwKSBhbmQgdGhlIHdyaXRlIHBvaW50ZXIgb2Zmc2V0Cj4gYXJyYXkgKHp3cF9v
ZmZzZXQpIGFyZSBhbGxvY2F0ZWQgYW5kIGluaXRpYWxpemVkIHdpdGggYSBmdWxsIGRldmljZSB6
b25lCj4gcmVwb3J0IGluIGRtX3NldF96b25lc19yZXN0cmljdGlvbnMoKSB1c2luZyB0aGUgZnVu
Y3Rpb24KPiBkbV9yZXZhbGlkYXRlX3pvbmVzKCkuCj4gCj4gRm9yIGZhaWxlZCBvcGVyYXRpb25z
IHRoYXQgbWF5IGhhdmUgbW9kaWZpZWQgYSB6b25lIHdyaXRlIHBvaW50ZXIsIHRoZQo+IHpvbmUg
d3JpdGUgcG9pbnRlciBvZmZzZXQgaXMgbWFya2VkIGFzIGludmFsaWQgaW4gZG1fem9uZV9lbmRp
bygpLgo+IFpvbmVzIHdpdGggYW4gaW52YWxpZCB3cml0ZSBwb2ludGVyIG9mZnNldCBhcmUgY2hl
Y2tlZCBhbmQgdGhlIHdyaXRlCj4gcG9pbnRlciB1cGRhdGVkIHVzaW5nIGFuIGludGVybmFsIHJl
cG9ydCB6b25lIG9wZXJhdGlvbiB3aGVuIHRoZQo+IGZhdWx0eSB6b25lIGlzIGFjY2Vzc2VkIGFn
YWluIGJ5IHRoZSB1c2VyLgo+IAo+IEFsbCBmdW5jdGlvbnMgYWRkZWQgZm9yIHRoaXMgZW11bGF0
aW9uIGhhdmUgYSBtaW5pbWFsIG92ZXJoZWFkIGZvcgo+IHpvbmVkIHRhcmdldHMgbmF0aXZlbHkg
c3VwcG9ydGluZyB6b25lIGFwcGVuZCBvcGVyYXRpb25zLiBSZWd1bGFyCj4gZGV2aWNlIHRhcmdl
dHMgYXJlIGFsc28gbm90IGFmZmVjdGVkLiBUaGUgYWRkZWQgY29kZSBhbHNvIGRvZXMgbm90Cj4g
aW1wYWN0IGJ1aWxkcyB3aXRoIENPTkZJR19CTEtfREVWX1pPTkVEIGRpc2FibGVkIGJ5IHN0dWJi
aW5nIG91dCBhbGwKPiBkbSB6b25lIHJlbGF0ZWQgZnVuY3Rpb25zLgo+IAo+IFNpZ25lZC1vZmYt
Ynk6IERhbWllbiBMZSBNb2FsIDxkYW1pZW4ubGVtb2FsQHdkYy5jb20+Cj4gLS0tCj4gICBkcml2
ZXJzL21kL2RtLWNvcmUuaCAgICAgICAgICB8ICAxNCArCj4gICBkcml2ZXJzL21kL2RtLXRhYmxl
LmMgICAgICAgICB8ICAxOSArLQo+ICAgZHJpdmVycy9tZC9kbS16b25lLmMgICAgICAgICAgfCA2
MTUgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKystLQo+ICAgZHJpdmVycy9tZC9kbS5j
ICAgICAgICAgICAgICAgfCAgMzkgKystCj4gICBkcml2ZXJzL21kL2RtLmggICAgICAgICAgICAg
ICB8ICAxOCArLQo+ICAgaW5jbHVkZS9saW51eC9kZXZpY2UtbWFwcGVyLmggfCAgIDYgKwo+ICAg
NiBmaWxlcyBjaGFuZ2VkLCA2NTcgaW5zZXJ0aW9ucygrKSwgNTQgZGVsZXRpb25zKC0pCj4gCj4g
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvbWQvZG0tY29yZS5oIGIvZHJpdmVycy9tZC9kbS1jb3JlLmgK
PiBpbmRleCBjZmFiYzFjOTFmOWYuLjJkYmIwYzdmZjcyMCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJz
L21kL2RtLWNvcmUuaAo+ICsrKyBiL2RyaXZlcnMvbWQvZG0tY29yZS5oCj4gQEAgLTExNCw2ICsx
MTQsMTIgQEAgc3RydWN0IG1hcHBlZF9kZXZpY2Ugewo+ICAgCWJvb2wgaW5pdF90aW9fcGR1OjE7
Cj4gICAKPiAgIAlzdHJ1Y3Qgc3JjdV9zdHJ1Y3QgaW9fYmFycmllcjsKPiArCj4gKyNpZmRlZiBD
T05GSUdfQkxLX0RFVl9aT05FRAo+ICsJdW5zaWduZWQgaW50IG5yX3pvbmVzOwo+ICsJc3Bpbmxv
Y2tfdCB6d3Bfb2Zmc2V0X2xvY2s7Cj4gKwl1bnNpZ25lZCBpbnQgKnp3cF9vZmZzZXQ7Cj4gKyNl
bmRpZgo+ICAgfTsKPiAgIAo+ICAgLyoKPiBAQCAtMTI4LDYgKzEzNCw3IEBAIHN0cnVjdCBtYXBw
ZWRfZGV2aWNlIHsKPiAgICNkZWZpbmUgRE1GX0RFRkVSUkVEX1JFTU9WRSA2Cj4gICAjZGVmaW5l
IERNRl9TVVNQRU5ERURfSU5URVJOQUxMWSA3Cj4gICAjZGVmaW5lIERNRl9QT1NUX1NVU1BFTkRJ
TkcgOAo+ICsjZGVmaW5lIERNRl9FTVVMQVRFX1pPTkVfQVBQRU5EIDkKPiAgIAo+ICAgdm9pZCBk
aXNhYmxlX2Rpc2NhcmQoc3RydWN0IG1hcHBlZF9kZXZpY2UgKm1kKTsKPiAgIHZvaWQgZGlzYWJs
ZV93cml0ZV9zYW1lKHN0cnVjdCBtYXBwZWRfZGV2aWNlICptZCk7Cj4gQEAgLTE0Myw2ICsxNTAs
MTMgQEAgc3RhdGljIGlubGluZSBzdHJ1Y3QgZG1fc3RhdHMgKmRtX2dldF9zdGF0cyhzdHJ1Y3Qg
bWFwcGVkX2RldmljZSAqbWQpCj4gICAJcmV0dXJuICZtZC0+c3RhdHM7Cj4gICB9Cj4gICAKPiAr
c3RhdGljIGlubGluZSBib29sIGRtX2VtdWxhdGVfem9uZV9hcHBlbmQoc3RydWN0IG1hcHBlZF9k
ZXZpY2UgKm1kKQo+ICt7Cj4gKwlpZiAoYmxrX3F1ZXVlX2lzX3pvbmVkKG1kLT5xdWV1ZSkpCj4g
KwkJcmV0dXJuIHRlc3RfYml0KERNRl9FTVVMQVRFX1pPTkVfQVBQRU5ELCAmbWQtPmZsYWdzKTsK
PiArCXJldHVybiBmYWxzZTsKPiArfQo+ICsKPiAgICNkZWZpbmUgRE1fVEFCTEVfTUFYX0RFUFRI
IDE2Cj4gICAKPiAgIHN0cnVjdCBkbV90YWJsZSB7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvbWQv
ZG0tdGFibGUuYyBiL2RyaXZlcnMvbWQvZG0tdGFibGUuYwo+IGluZGV4IGRkOWY2NDhhYjU5OC4u
MjFmZGNjZmIxNmNmIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvbWQvZG0tdGFibGUuYwo+ICsrKyBi
L2RyaXZlcnMvbWQvZG0tdGFibGUuYwo+IEBAIC0xOTgxLDExICsxOTgxLDEyIEBAIHN0YXRpYyBp
bnQgZGV2aWNlX3JlcXVpcmVzX3N0YWJsZV9wYWdlcyhzdHJ1Y3QgZG1fdGFyZ2V0ICp0aSwKPiAg
IAlyZXR1cm4gYmxrX3F1ZXVlX3N0YWJsZV93cml0ZXMocSk7Cj4gICB9Cj4gICAKPiAtdm9pZCBk
bV90YWJsZV9zZXRfcmVzdHJpY3Rpb25zKHN0cnVjdCBkbV90YWJsZSAqdCwgc3RydWN0IHJlcXVl
c3RfcXVldWUgKnEsCj4gLQkJCSAgICAgICBzdHJ1Y3QgcXVldWVfbGltaXRzICpsaW1pdHMpCj4g
K2ludCBkbV90YWJsZV9zZXRfcmVzdHJpY3Rpb25zKHN0cnVjdCBkbV90YWJsZSAqdCwgc3RydWN0
IHJlcXVlc3RfcXVldWUgKnEsCj4gKwkJCSAgICAgIHN0cnVjdCBxdWV1ZV9saW1pdHMgKmxpbWl0
cykKPiAgIHsKPiAgIAlib29sIHdjID0gZmFsc2UsIGZ1YSA9IGZhbHNlOwo+ICAgCWludCBwYWdl
X3NpemUgPSBQQUdFX1NJWkU7Cj4gKwlpbnQgcjsKPiAgIAo+ICAgCS8qCj4gICAJICogQ29weSB0
YWJsZSdzIGxpbWl0cyB0byB0aGUgRE0gZGV2aWNlJ3MgcmVxdWVzdF9xdWV1ZQo+IEBAIC0yMDY0
LDEyICsyMDY1LDIwIEBAIHZvaWQgZG1fdGFibGVfc2V0X3Jlc3RyaWN0aW9ucyhzdHJ1Y3QgZG1f
dGFibGUgKnQsIHN0cnVjdCByZXF1ZXN0X3F1ZXVlICpxLAo+ICAgCSAgICBkbV90YWJsZV9hbnlf
ZGV2X2F0dHIodCwgZGV2aWNlX2lzX25vdF9yYW5kb20sIE5VTEwpKQo+ICAgCQlibGtfcXVldWVf
ZmxhZ19jbGVhcihRVUVVRV9GTEFHX0FERF9SQU5ET00sIHEpOwo+ICAgCj4gLQkvKiBGb3IgYSB6
b25lZCB0YXJnZXQsIHNldHVwIHRoZSB6b25lcyByZWxhdGVkIHF1ZXVlIGF0dHJpYnV0ZXMgKi8K
PiAtCWlmIChibGtfcXVldWVfaXNfem9uZWQocSkpCj4gLQkJZG1fc2V0X3pvbmVzX3Jlc3RyaWN0
aW9ucyh0LCBxKTsKPiArCS8qCj4gKwkgKiBGb3IgYSB6b25lZCB0YXJnZXQsIHNldHVwIHRoZSB6
b25lcyByZWxhdGVkIHF1ZXVlIGF0dHJpYnV0ZXMKPiArCSAqIGFuZCByZXNvdXJjZXMgbmVjZXNz
YXJ5IGZvciB6b25lIGFwcGVuZCBlbXVsYXRpb24gaWYgbmVjZXNzYXJ5Lgo+ICsJICovCj4gKwlp
ZiAoYmxrX3F1ZXVlX2lzX3pvbmVkKHEpKSB7Cj4gKwkJciA9IGRtX3NldF96b25lc19yZXN0cmlj
dGlvbnModCwgcSk7Cj4gKwkJaWYgKHIpCj4gKwkJCXJldHVybiByOwo+ICsJfQo+ICAgCj4gICAJ
ZG1fdXBkYXRlX2tleXNsb3RfbWFuYWdlcihxLCB0KTsKPiAgIAlibGtfcXVldWVfdXBkYXRlX3Jl
YWRhaGVhZChxKTsKPiArCj4gKwlyZXR1cm4gMDsKPiAgIH0KPiAgIAo+ICAgdW5zaWduZWQgaW50
IGRtX3RhYmxlX2dldF9udW1fdGFyZ2V0cyhzdHJ1Y3QgZG1fdGFibGUgKnQpCj4gZGlmZiAtLWdp
dCBhL2RyaXZlcnMvbWQvZG0tem9uZS5jIGIvZHJpdmVycy9tZC9kbS16b25lLmMKPiBpbmRleCBl
ZGMzYmJiNDU2MzcuLmMyOThiYWIyODM5MCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL21kL2RtLXpv
bmUuYwo+ICsrKyBiL2RyaXZlcnMvbWQvZG0tem9uZS5jCj4gQEAgLTQsNTUgKzQsNzMgQEAKPiAg
ICAqLwo+ICAgCj4gICAjaW5jbHVkZSA8bGludXgvYmxrZGV2Lmg+Cj4gKyNpbmNsdWRlIDxsaW51
eC9tbS5oPgo+ICsjaW5jbHVkZSA8bGludXgvc2NoZWQvbW0uaD4KPiArI2luY2x1ZGUgPGxpbnV4
L3NsYWIuaD4KPiAgIAo+ICAgI2luY2x1ZGUgImRtLWNvcmUuaCIKPiAgIAo+ICsjZGVmaW5lIERN
X01TR19QUkVGSVggInpvbmUiCj4gKwo+ICsjZGVmaW5lIERNX1pPTkVfSU5WQUxJRF9XUF9PRlNU
CQlVSU5UX01BWAo+ICsjZGVmaW5lIERNX1pPTkVfVVBEQVRJTkdfV1BfT0ZTVAkoRE1fWk9ORV9J
TlZBTElEX1dQX09GU1QgLSAxKQo+ICsKPiAgIC8qCj4gLSAqIFVzZXIgZmFjaW5nIGRtIGRldmlj
ZSBibG9jayBkZXZpY2UgcmVwb3J0IHpvbmUgb3BlcmF0aW9uLiBUaGlzIGNhbGxzIHRoZQo+IC0g
KiByZXBvcnRfem9uZXMgb3BlcmF0aW9uIGZvciBlYWNoIHRhcmdldCBvZiBhIGRldmljZSB0YWJs
ZS4gVGhpcyBvcGVyYXRpb24gaXMKPiAtICogZ2VuZXJhbGx5IGltcGxlbWVudGVkIGJ5IHRhcmdl
dHMgdXNpbmcgZG1fcmVwb3J0X3pvbmVzKCkuCj4gKyAqIEZvciBpbnRlcm5hbCB6b25lIHJlcG9y
dHMgYnlwYXNzaW5nIHRoZSB0b3AgQklPIHN1Ym1pc3Npb24gcGF0aC4KPiAgICAqLwo+IC1pbnQg
ZG1fYmxrX3JlcG9ydF96b25lcyhzdHJ1Y3QgZ2VuZGlzayAqZGlzaywgc2VjdG9yX3Qgc2VjdG9y
LAo+IC0JCQl1bnNpZ25lZCBpbnQgbnJfem9uZXMsIHJlcG9ydF96b25lc19jYiBjYiwgdm9pZCAq
ZGF0YSkKPiArc3RhdGljIGludCBkbV9ibGtfZG9fcmVwb3J0X3pvbmVzKHN0cnVjdCBtYXBwZWRf
ZGV2aWNlICptZCwgc3RydWN0IGRtX3RhYmxlICp0LAo+ICsJCQkJICBzZWN0b3JfdCBzZWN0b3Is
IHVuc2lnbmVkIGludCBucl96b25lcywKPiArCQkJCSAgcmVwb3J0X3pvbmVzX2NiIGNiLCB2b2lk
ICpkYXRhKQo+ICAgewo+IC0Jc3RydWN0IG1hcHBlZF9kZXZpY2UgKm1kID0gZGlzay0+cHJpdmF0
ZV9kYXRhOwo+IC0Jc3RydWN0IGRtX3RhYmxlICptYXA7Cj4gLQlpbnQgc3JjdV9pZHgsIHJldDsK
PiArCXN0cnVjdCBnZW5kaXNrICpkaXNrID0gbWQtPmRpc2s7Cj4gKwlpbnQgcmV0Owo+ICAgCXN0
cnVjdCBkbV9yZXBvcnRfem9uZXNfYXJncyBhcmdzID0gewo+ICAgCQkubmV4dF9zZWN0b3IgPSBz
ZWN0b3IsCj4gICAJCS5vcmlnX2RhdGEgPSBkYXRhLAo+ICAgCQkub3JpZ19jYiA9IGNiLAo+ICAg
CX07Cj4gICAKPiAtCWlmIChkbV9zdXNwZW5kZWRfbWQobWQpKQo+IC0JCXJldHVybiAtRUFHQUlO
Owo+IC0KPiAtCW1hcCA9IGRtX2dldF9saXZlX3RhYmxlKG1kLCAmc3JjdV9pZHgpOwo+IC0JaWYg
KCFtYXApIHsKPiAtCQlyZXQgPSAtRUlPOwo+IC0JCWdvdG8gb3V0Owo+IC0JfQo+IC0KPiAgIAlk
byB7Cj4gICAJCXN0cnVjdCBkbV90YXJnZXQgKnRndDsKPiAgIAo+IC0JCXRndCA9IGRtX3RhYmxl
X2ZpbmRfdGFyZ2V0KG1hcCwgYXJncy5uZXh0X3NlY3Rvcik7Cj4gLQkJaWYgKFdBUk5fT05fT05D
RSghdGd0LT50eXBlLT5yZXBvcnRfem9uZXMpKSB7Cj4gLQkJCXJldCA9IC1FSU87Cj4gLQkJCWdv
dG8gb3V0Owo+IC0JCX0KPiArCQl0Z3QgPSBkbV90YWJsZV9maW5kX3RhcmdldCh0LCBhcmdzLm5l
eHRfc2VjdG9yKTsKPiArCQlpZiAoV0FSTl9PTl9PTkNFKCF0Z3QtPnR5cGUtPnJlcG9ydF96b25l
cykpCj4gKwkJCXJldHVybiAtRUlPOwo+ICAgCj4gICAJCWFyZ3MudGd0ID0gdGd0Owo+ICAgCQly
ZXQgPSB0Z3QtPnR5cGUtPnJlcG9ydF96b25lcyh0Z3QsICZhcmdzLAo+ICAgCQkJCQkgICAgICBu
cl96b25lcyAtIGFyZ3Muem9uZV9pZHgpOwo+ICAgCQlpZiAocmV0IDwgMCkKPiAtCQkJZ290byBv
dXQ7Cj4gKwkJCXJldHVybiByZXQ7Cj4gICAJfSB3aGlsZSAoYXJncy56b25lX2lkeCA8IG5yX3pv
bmVzICYmCj4gICAJCSBhcmdzLm5leHRfc2VjdG9yIDwgZ2V0X2NhcGFjaXR5KGRpc2spKTsKPiAg
IAo+IC0JcmV0ID0gYXJncy56b25lX2lkeDsKPiAtb3V0Ogo+ICsJcmV0dXJuIGFyZ3Muem9uZV9p
ZHg7Cj4gK30KPiArCj4gKy8qCj4gKyAqIFVzZXIgZmFjaW5nIGRtIGRldmljZSBibG9jayBkZXZp
Y2UgcmVwb3J0IHpvbmUgb3BlcmF0aW9uLiBUaGlzIGNhbGxzIHRoZQo+ICsgKiByZXBvcnRfem9u
ZXMgb3BlcmF0aW9uIGZvciBlYWNoIHRhcmdldCBvZiBhIGRldmljZSB0YWJsZS4gVGhpcyBvcGVy
YXRpb24gaXMKPiArICogZ2VuZXJhbGx5IGltcGxlbWVudGVkIGJ5IHRhcmdldHMgdXNpbmcgZG1f
cmVwb3J0X3pvbmVzKCkuCj4gKyAqLwo+ICtpbnQgZG1fYmxrX3JlcG9ydF96b25lcyhzdHJ1Y3Qg
Z2VuZGlzayAqZGlzaywgc2VjdG9yX3Qgc2VjdG9yLAo+ICsJCQl1bnNpZ25lZCBpbnQgbnJfem9u
ZXMsIHJlcG9ydF96b25lc19jYiBjYiwgdm9pZCAqZGF0YSkKPiArewo+ICsJc3RydWN0IG1hcHBl
ZF9kZXZpY2UgKm1kID0gZGlzay0+cHJpdmF0ZV9kYXRhOwo+ICsJc3RydWN0IGRtX3RhYmxlICpt
YXA7Cj4gKwlpbnQgc3JjdV9pZHgsIHJldDsKPiArCj4gKwlpZiAoZG1fc3VzcGVuZGVkX21kKG1k
KSkKPiArCQlyZXR1cm4gLUVBR0FJTjsKPiArCj4gKwltYXAgPSBkbV9nZXRfbGl2ZV90YWJsZSht
ZCwgJnNyY3VfaWR4KTsKPiArCWlmICghbWFwKQo+ICsJCXJldHVybiAtRUlPOwo+ICsKPiArCXJl
dCA9IGRtX2Jsa19kb19yZXBvcnRfem9uZXMobWQsIG1hcCwgc2VjdG9yLCBucl96b25lcywgY2Is
IGRhdGEpOwo+ICsKPiAgIAlkbV9wdXRfbGl2ZV90YWJsZShtZCwgc3JjdV9pZHgpOwo+ICsKPiAg
IAlyZXR1cm4gcmV0Owo+ICAgfQo+ICAgCj4gQEAgLTEyMSwxNiArMTM5LDU1MSBAQCBib29sIGRt
X2lzX3pvbmVfd3JpdGUoc3RydWN0IG1hcHBlZF9kZXZpY2UgKm1kLCBzdHJ1Y3QgYmlvICpiaW8p
Cj4gICAJfQo+ICAgfQo+ICAgCj4gLXZvaWQgZG1fc2V0X3pvbmVzX3Jlc3RyaWN0aW9ucyhzdHJ1
Y3QgZG1fdGFibGUgKnQsIHN0cnVjdCByZXF1ZXN0X3F1ZXVlICpxKQo+ICt2b2lkIGRtX2luaXRf
em9uZWRfZGV2KHN0cnVjdCBtYXBwZWRfZGV2aWNlICptZCkKPiAgIHsKPiAtCWlmICghYmxrX3F1
ZXVlX2lzX3pvbmVkKHEpKQo+IC0JCXJldHVybjsKPiArCXNwaW5fbG9ja19pbml0KCZtZC0+endw
X29mZnNldF9sb2NrKTsKPiArfQo+ICsKPiArdm9pZCBkbV9jbGVhbnVwX3pvbmVkX2RldihzdHJ1
Y3QgbWFwcGVkX2RldmljZSAqbWQpCj4gK3sKPiArCXN0cnVjdCByZXF1ZXN0X3F1ZXVlICpxID0g
bWQtPnF1ZXVlOwo+ICsKPiArCWlmIChxKSB7Cj4gKwkJa2ZyZWUocS0+Y29udl96b25lc19iaXRt
YXApOwo+ICsJCXEtPmNvbnZfem9uZXNfYml0bWFwID0gTlVMTDsKPiArCQlrZnJlZShxLT5zZXFf
em9uZXNfd2xvY2spOwo+ICsJCXEtPnNlcV96b25lc193bG9jayA9IE5VTEw7Cj4gKwl9Cj4gKwo+
ICsJa3ZmcmVlKG1kLT56d3Bfb2Zmc2V0KTsKPiArCW1kLT56d3Bfb2Zmc2V0ID0gTlVMTDsKPiAr
CW1kLT5ucl96b25lcyA9IDA7Cj4gK30KPiArCj4gK3N0YXRpYyB1bnNpZ25lZCBpbnQgZG1fZ2V0
X3pvbmVfd3Bfb2Zmc2V0KHN0cnVjdCBibGtfem9uZSAqem9uZSkKPiArewo+ICsJc3dpdGNoICh6
b25lLT5jb25kKSB7Cj4gKwljYXNlIEJMS19aT05FX0NPTkRfSU1QX09QRU46Cj4gKwljYXNlIEJM
S19aT05FX0NPTkRfRVhQX09QRU46Cj4gKwljYXNlIEJMS19aT05FX0NPTkRfQ0xPU0VEOgo+ICsJ
CXJldHVybiB6b25lLT53cCAtIHpvbmUtPnN0YXJ0Owo+ICsJY2FzZSBCTEtfWk9ORV9DT05EX0ZV
TEw6Cj4gKwkJcmV0dXJuIHpvbmUtPmxlbjsKPiArCWNhc2UgQkxLX1pPTkVfQ09ORF9FTVBUWToK
PiArCWNhc2UgQkxLX1pPTkVfQ09ORF9OT1RfV1A6Cj4gKwljYXNlIEJMS19aT05FX0NPTkRfT0ZG
TElORToKPiArCWNhc2UgQkxLX1pPTkVfQ09ORF9SRUFET05MWToKPiArCWRlZmF1bHQ6Cj4gKwkJ
LyoKPiArCQkgKiBDb252ZW50aW9uYWwsIG9mZmxpbmUgYW5kIHJlYWQtb25seSB6b25lcyBkbyBu
b3QgaGF2ZSBhIHZhbGlkCj4gKwkJICogd3JpdGUgcG9pbnRlci4gVXNlIDAgYXMgZm9yIGFuIGVt
cHR5IHpvbmUuCj4gKwkJICovCj4gKwkJcmV0dXJuIDA7Cj4gKwl9Cj4gK30KPiArCj4gK3N0YXRp
YyBpbnQgZG1fem9uZV9yZXZhbGlkYXRlX2NiKHN0cnVjdCBibGtfem9uZSAqem9uZSwgdW5zaWdu
ZWQgaW50IGlkeCwKPiArCQkJCSB2b2lkICpkYXRhKQo+ICt7Cj4gKwlzdHJ1Y3QgbWFwcGVkX2Rl
dmljZSAqbWQgPSBkYXRhOwo+ICsJc3RydWN0IHJlcXVlc3RfcXVldWUgKnEgPSBtZC0+cXVldWU7
Cj4gKwo+ICsJc3dpdGNoICh6b25lLT50eXBlKSB7Cj4gKwljYXNlIEJMS19aT05FX1RZUEVfQ09O
VkVOVElPTkFMOgo+ICsJCWlmICghcS0+Y29udl96b25lc19iaXRtYXApIHsKPiArCQkJcS0+Y29u
dl96b25lc19iaXRtYXAgPQo+ICsJCQkJa2NhbGxvYyhCSVRTX1RPX0xPTkdTKHEtPm5yX3pvbmVz
KSwKPiArCQkJCQlzaXplb2YodW5zaWduZWQgbG9uZyksIEdGUF9OT0lPKTsKPiArCQkJaWYgKCFx
LT5jb252X3pvbmVzX2JpdG1hcCkKPiArCQkJCXJldHVybiAtRU5PTUVNOwo+ICsJCX0KPiArCQlz
ZXRfYml0KGlkeCwgcS0+Y29udl96b25lc19iaXRtYXApOwo+ICsJCWJyZWFrOwo+ICsJY2FzZSBC
TEtfWk9ORV9UWVBFX1NFUVdSSVRFX1JFUToKPiArCWNhc2UgQkxLX1pPTkVfVFlQRV9TRVFXUklU
RV9QUkVGOgo+ICsJCWlmICghcS0+c2VxX3pvbmVzX3dsb2NrKSB7Cj4gKwkJCXEtPnNlcV96b25l
c193bG9jayA9Cj4gKwkJCQlrY2FsbG9jKEJJVFNfVE9fTE9OR1MocS0+bnJfem9uZXMpLAo+ICsJ
CQkJCXNpemVvZih1bnNpZ25lZCBsb25nKSwgR0ZQX05PSU8pOwo+ICsJCQlpZiAoIXEtPnNlcV96
b25lc193bG9jaykKPiArCQkJCXJldHVybiAtRU5PTUVNOwo+ICsJCX0KPiArCQlpZiAoIW1kLT56
d3Bfb2Zmc2V0KSB7Cj4gKwkJCW1kLT56d3Bfb2Zmc2V0ID0KPiArCQkJCWt2Y2FsbG9jKHEtPm5y
X3pvbmVzLCBzaXplb2YodW5zaWduZWQgaW50KSwKPiArCQkJCQkgR0ZQX05PSU8pOwo+ICsJCQlp
ZiAoIW1kLT56d3Bfb2Zmc2V0KQo+ICsJCQkJcmV0dXJuIC1FTk9NRU07Cj4gKwkJfQo+ICsJCW1k
LT56d3Bfb2Zmc2V0W2lkeF0gPSBkbV9nZXRfem9uZV93cF9vZmZzZXQoem9uZSk7Cj4gKwo+ICsJ
CWJyZWFrOwo+ICsJZGVmYXVsdDoKPiArCQlETUVSUigiSW52YWxpZCB6b25lIHR5cGUgMHgleCBh
dCBzZWN0b3JzICVsbHUiLAo+ICsJCSAgICAgIChpbnQpem9uZS0+dHlwZSwgem9uZS0+c3RhcnQp
Owo+ICsJCXJldHVybiAtRU5PREVWOwo+ICsJfQo+ICsKPiArCXJldHVybiAwOwo+ICt9Cj4gKwo+
ICsvKgo+ICsgKiBSZXZhbGlkYXRlIHRoZSB6b25lcyBvZiBhIG1hcHBlZCBkZXZpY2UgdG8gaW5p
dGlhbGl6ZSByZXNvdXJjZSBuZWNlc3NhcnkKPiArICogZm9yIHpvbmUgYXBwZW5kIGVtdWxhdGlv
bi4gTm90ZSB0aGF0IHdlIGNhbm5vdCBzaW1wbHkgdXNlIHRoZSBibG9jayBsYXllcgo+ICsgKiBi
bGtfcmV2YWxpZGF0ZV9kaXNrX3pvbmVzKCkgZnVuY3Rpb24gaGVyZSBhcyB0aGUgbWFwcGVkIGRl
dmljZSBpcyBzdXNwZW5kZWQKPiArICogKHRoaXMgaXMgY2FsbGVkIGZyb20gX19iaW5kKCkgY29u
dGV4dCkuCj4gKyAqLwo+ICtzdGF0aWMgaW50IGRtX3JldmFsaWRhdGVfem9uZXMoc3RydWN0IG1h
cHBlZF9kZXZpY2UgKm1kLCBzdHJ1Y3QgZG1fdGFibGUgKnQpCj4gK3sKPiArCXN0cnVjdCByZXF1
ZXN0X3F1ZXVlICpxID0gbWQtPnF1ZXVlOwo+ICsJaW50IHJldDsKPiArCj4gKwkvKgo+ICsJICog
Q2hlY2sgaWYgc29tZXRoaW5nIGNoYW5nZWQuIElmIHllcywgY2xlYW51cCB0aGUgY3VycmVudCBy
ZXNvdXJjZXMKPiArCSAqIGFuZCByZWFsbG9jYXRlIGV2ZXJ5dGhpbmcuCj4gKwkgKi8KPiArCWlm
ICghcS0+bnJfem9uZXMgfHwgcS0+bnJfem9uZXMgIT0gbWQtPm5yX3pvbmVzKQo+ICsJCWRtX2Ns
ZWFudXBfem9uZWRfZGV2KG1kKTsKPiArCWlmIChtZC0+bnJfem9uZXMpCj4gKwkJcmV0dXJuIDA7
Cj4gKwo+ICsJLyogU2NhbiBhbGwgem9uZXMgdG8gaW5pdGlhbGl6ZSBldmVyeXRoaW5nICovCj4g
KwlyZXQgPSBkbV9ibGtfZG9fcmVwb3J0X3pvbmVzKG1kLCB0LCAwLCBxLT5ucl96b25lcywKPiAr
CQkJCSAgICAgZG1fem9uZV9yZXZhbGlkYXRlX2NiLCBtZCk7Cj4gKwlpZiAocmV0IDwgMCkKPiAr
CQlnb3RvIGVycjsKPiArCWlmIChyZXQgIT0gcS0+bnJfem9uZXMpIHsKPiArCQlyZXQgPSAtRUlP
Owo+ICsJCWdvdG8gZXJyOwo+ICsJfQo+ICsKPiArCW1kLT5ucl96b25lcyA9IHEtPm5yX3pvbmVz
Owo+ICsKPiArCXJldHVybiAwOwo+ICsKPiArZXJyOgo+ICsJRE1FUlIoIlJldmFsaWRhdGUgem9u
ZXMgZmFpbGVkICVkIiwgcmV0KTsKPiArCWRtX2NsZWFudXBfem9uZWRfZGV2KG1kKTsKPiArCXJl
dHVybiByZXQ7Cj4gK30KPiArCj4gK3N0YXRpYyBpbnQgZGV2aWNlX25vdF96b25lX2FwcGVuZF9j
YXBhYmxlKHN0cnVjdCBkbV90YXJnZXQgKnRpLAo+ICsJCQkJCSAgc3RydWN0IGRtX2RldiAqZGV2
LCBzZWN0b3JfdCBzdGFydCwKPiArCQkJCQkgIHNlY3Rvcl90IGxlbiwgdm9pZCAqZGF0YSkKPiAr
ewo+ICsJcmV0dXJuICFibGtfcXVldWVfaXNfem9uZWQoYmRldl9nZXRfcXVldWUoZGV2LT5iZGV2
KSk7Cj4gK30KPiArCj4gK3N0YXRpYyBib29sIGRtX3RhYmxlX3N1cHBvcnRzX3pvbmVfYXBwZW5k
KHN0cnVjdCBkbV90YWJsZSAqdCkKPiArewo+ICsJc3RydWN0IGRtX3RhcmdldCAqdGk7Cj4gKwl1
bnNpZ25lZCBpbnQgaTsKPiArCj4gKwlmb3IgKGkgPSAwOyBpIDwgZG1fdGFibGVfZ2V0X251bV90
YXJnZXRzKHQpOyBpKyspIHsKPiArCQl0aSA9IGRtX3RhYmxlX2dldF90YXJnZXQodCwgaSk7Cj4g
Kwo+ICsJCWlmICh0aS0+ZW11bGF0ZV96b25lX2FwcGVuZCkKPiArCQkJcmV0dXJuIGZhbHNlOwo+
ICsKPiArCQlpZiAoIXRpLT50eXBlLT5pdGVyYXRlX2RldmljZXMgfHwKPiArCQkgICAgdGktPnR5
cGUtPml0ZXJhdGVfZGV2aWNlcyh0aSwgZGV2aWNlX25vdF96b25lX2FwcGVuZF9jYXBhYmxlLCBO
VUxMKSkKPiArCQkJcmV0dXJuIGZhbHNlOwo+ICsJfQo+ICsKPiArCXJldHVybiB0cnVlOwo+ICt9
Cj4gKwo+ICtpbnQgZG1fc2V0X3pvbmVzX3Jlc3RyaWN0aW9ucyhzdHJ1Y3QgZG1fdGFibGUgKnQs
IHN0cnVjdCByZXF1ZXN0X3F1ZXVlICpxKQo+ICt7Cj4gKwlzdHJ1Y3QgbWFwcGVkX2RldmljZSAq
bWQgPSB0LT5tZDsKPiAgIAo+ICAgCS8qCj4gICAJICogRm9yIGEgem9uZWQgdGFyZ2V0LCB0aGUg
bnVtYmVyIG9mIHpvbmVzIHNob3VsZCBiZSB1cGRhdGVkIGZvciB0aGUKPiAtCSAqIGNvcnJlY3Qg
dmFsdWUgdG8gYmUgZXhwb3NlZCBpbiBzeXNmcyBxdWV1ZS9ucl96b25lcy4gRm9yIGEgQklPIGJh
c2VkCj4gLQkgKiB0YXJnZXQsIHRoaXMgaXMgYWxsIHRoYXQgaXMgbmVlZGVkLgo+ICsJICogY29y
cmVjdCB2YWx1ZSB0byBiZSBleHBvc2VkIGluIHN5c2ZzIHF1ZXVlL25yX3pvbmVzLgo+ICAgCSAq
Lwo+ICAgCVdBUk5fT05fT05DRShxdWV1ZV9pc19tcShxKSk7Cj4gLQlxLT5ucl96b25lcyA9IGJs
a2Rldl9ucl96b25lcyh0LT5tZC0+ZGlzayk7Cj4gKwlxLT5ucl96b25lcyA9IGJsa2Rldl9ucl96
b25lcyhtZC0+ZGlzayk7Cj4gKwo+ICsJLyogQ2hlY2sgaWYgem9uZSBhcHBlbmQgaXMgbmF0aXZl
bHkgc3VwcG9ydGVkICovCj4gKwlpZiAoZG1fdGFibGVfc3VwcG9ydHNfem9uZV9hcHBlbmQodCkp
IHsKPiArCQljbGVhcl9iaXQoRE1GX0VNVUxBVEVfWk9ORV9BUFBFTkQsICZtZC0+ZmxhZ3MpOwo+
ICsJCWRtX2NsZWFudXBfem9uZWRfZGV2KG1kKTsKPiArCQlyZXR1cm4gMDsKPiArCX0KPiArCj4g
KwkvKgo+ICsJICogTWFyayB0aGUgbWFwcGVkIGRldmljZSBhcyBuZWVkaW5nIHpvbmUgYXBwZW5k
IGVtdWxhdGlvbiBhbmQKPiArCSAqIGluaXRpYWxpemUgdGhlIGVtdWxhdGlvbiByZXNvdXJjZXMg
b25jZSB0aGUgY2FwYWNpdHkgaXMgc2V0Lgo+ICsJICovCj4gKwlzZXRfYml0KERNRl9FTVVMQVRF
X1pPTkVfQVBQRU5ELCAmbWQtPmZsYWdzKTsKPiArCWlmICghZ2V0X2NhcGFjaXR5KG1kLT5kaXNr
KSkKPiArCQlyZXR1cm4gMDsKPiArCj4gKwlyZXR1cm4gZG1fcmV2YWxpZGF0ZV96b25lcyhtZCwg
dCk7Cj4gK30KPiArCj4gK3N0YXRpYyBpbnQgZG1fdXBkYXRlX3pvbmVfd3Bfb2Zmc2V0X2NiKHN0
cnVjdCBibGtfem9uZSAqem9uZSwgdW5zaWduZWQgaW50IGlkeCwKPiArCQkJCSAgICAgICB2b2lk
ICpkYXRhKQo+ICt7Cj4gKwl1bnNpZ25lZCBpbnQgKndwX29mZnNldCA9IGRhdGE7Cj4gKwo+ICsJ
KndwX29mZnNldCA9IGRtX2dldF96b25lX3dwX29mZnNldCh6b25lKTsKPiArCj4gKwlyZXR1cm4g
MDsKPiArfQo+ICsKPiArc3RhdGljIGludCBkbV91cGRhdGVfem9uZV93cF9vZmZzZXQoc3RydWN0
IG1hcHBlZF9kZXZpY2UgKm1kLCB1bnNpZ25lZCBpbnQgem5vLAo+ICsJCQkJICAgIHVuc2lnbmVk
IGludCAqd3Bfb2ZzdCkKPiArewo+ICsJc2VjdG9yX3Qgc2VjdG9yID0gem5vICogYmxrX3F1ZXVl
X3pvbmVfc2VjdG9ycyhtZC0+cXVldWUpOwo+ICsJdW5zaWduZWQgaW50IG5vaW9fZmxhZzsKPiAr
CXN0cnVjdCBkbV90YWJsZSAqdDsKPiArCWludCBzcmN1X2lkeCwgcmV0Owo+ICsKPiArCXQgPSBk
bV9nZXRfbGl2ZV90YWJsZShtZCwgJnNyY3VfaWR4KTsKPiArCWlmICghdCkKPiArCQlyZXR1cm4g
LUVJTzsKPiArCj4gKwkvKgo+ICsJICogRW5zdXJlIHRoYXQgYWxsIG1lbW9yeSBhbGxvY2F0aW9u
cyBpbiB0aGlzIGNvbnRleHQgYXJlIGRvbmUgYXMgaWYKPiArCSAqIEdGUF9OT0lPIHdhcyBzcGVj
aWZpZWQuCj4gKwkgKi8KPiArCW5vaW9fZmxhZyA9IG1lbWFsbG9jX25vaW9fc2F2ZSgpOwo+ICsJ
cmV0ID0gZG1fYmxrX2RvX3JlcG9ydF96b25lcyhtZCwgdCwgc2VjdG9yLCAxLAo+ICsJCQkJICAg
ICBkbV91cGRhdGVfem9uZV93cF9vZmZzZXRfY2IsIHdwX29mc3QpOwo+ICsJbWVtYWxsb2Nfbm9p
b19yZXN0b3JlKG5vaW9fZmxhZyk7Cj4gKwo+ICsJZG1fcHV0X2xpdmVfdGFibGUobWQsIHNyY3Vf
aWR4KTsKPiArCj4gKwlpZiAocmV0ICE9IDEpCj4gKwkJcmV0dXJuIC1FSU87Cj4gKwo+ICsJcmV0
dXJuIDA7Cj4gK30KPiArCj4gKy8qCj4gKyAqIEZpcnN0IHBoYXNlIG9mIEJJTyBtYXBwaW5nIGZv
ciB0YXJnZXRzIHdpdGggem9uZSBhcHBlbmQgZW11bGF0aW9uOgo+ICsgKiBjaGVjayBhbGwgQklP
IHRoYXQgY2hhbmdlIGEgem9uZSB3cml0ZXIgcG9pbnRlciBhbmQgY2hhbmdlIHpvbmUKPiArICog
YXBwZW5kIG9wZXJhdGlvbnMgaW50byByZWd1bGFyIHdyaXRlIG9wZXJhdGlvbnMuCj4gKyAqLwo+
ICtzdGF0aWMgYm9vbCBkbV96b25lX21hcF9iaW9fYmVnaW4oc3RydWN0IG1hcHBlZF9kZXZpY2Ug
Km1kLAo+ICsJCQkJICBzdHJ1Y3QgYmlvICpvcmlnX2Jpbywgc3RydWN0IGJpbyAqY2xvbmUpCj4g
K3sKPiArCXNlY3Rvcl90IHpvbmVfc2VjdG9ycyA9IGJsa19xdWV1ZV96b25lX3NlY3RvcnMobWQt
PnF1ZXVlKTsKPiArCXVuc2lnbmVkIGludCB6bm8gPSBiaW9fem9uZV9ubyhvcmlnX2Jpbyk7Cj4g
Kwl1bnNpZ25lZCBsb25nIGZsYWdzOwo+ICsJYm9vbCBnb29kX2lvID0gZmFsc2U7Cj4gKwo+ICsJ
c3Bpbl9sb2NrX2lycXNhdmUoJm1kLT56d3Bfb2Zmc2V0X2xvY2ssIGZsYWdzKTsKPiArCj4gKwkv
Kgo+ICsJICogSWYgdGhlIHRhcmdldCB6b25lIGlzIGluIGFuIGVycm9yIHN0YXRlLCByZWNvdmVy
IGJ5IGluc3BlY3RpbmcgdGhlCj4gKwkgKiB6b25lIHRvIGdldCBpdHMgY3VycmVudCB3cml0ZSBw
b2ludGVyIHBvc2l0aW9uLiBOb3RlIHRoYXQgc2luY2UgdGhlCj4gKwkgKiB0YXJnZXQgem9uZSBp
cyBhbHJlYWR5IGxvY2tlZCwgYSBCSU8gaXNzdWluZyBjb250ZXh0IHNob3VsZCBuZXZlcgo+ICsJ
ICogc2VlIHRoZSB6b25lIHdyaXRlIGluIHRoZSBETV9aT05FX1VQREFUSU5HX1dQX09GU1Qgc3Rh
dGUuCj4gKwkgKi8KPiArCWlmIChtZC0+endwX29mZnNldFt6bm9dID09IERNX1pPTkVfSU5WQUxJ
RF9XUF9PRlNUKSB7Cj4gKwkJdW5zaWduZWQgaW50IHdwX29mZnNldDsKPiArCQlpbnQgcmV0Owo+
ICsKPiArCQltZC0+endwX29mZnNldFt6bm9dID0gRE1fWk9ORV9VUERBVElOR19XUF9PRlNUOwo+
ICsKPiArCQlzcGluX3VubG9ja19pcnFyZXN0b3JlKCZtZC0+endwX29mZnNldF9sb2NrLCBmbGFn
cyk7Cj4gKwkJcmV0ID0gZG1fdXBkYXRlX3pvbmVfd3Bfb2Zmc2V0KG1kLCB6bm8sICZ3cF9vZmZz
ZXQpOwo+ICsJCXNwaW5fbG9ja19pcnFzYXZlKCZtZC0+endwX29mZnNldF9sb2NrLCBmbGFncyk7
Cj4gKwo+ICsJCWlmIChyZXQpIHsKPiArCQkJbWQtPnp3cF9vZmZzZXRbem5vXSA9IERNX1pPTkVf
SU5WQUxJRF9XUF9PRlNUOwo+ICsJCQlnb3RvIG91dDsKPiArCQl9Cj4gKwkJbWQtPnp3cF9vZmZz
ZXRbem5vXSA9IHdwX29mZnNldDsKPiArCX0gZWxzZSBpZiAobWQtPnp3cF9vZmZzZXRbem5vXSA9
PSBETV9aT05FX1VQREFUSU5HX1dQX09GU1QpIHsKPiArCQlETVdBUk5fTElNSVQoIkludmFsaWQg
RE1fWk9ORV9VUERBVElOR19XUF9PRlNUIHN0YXRlIik7Cj4gKwkJZ290byBvdXQ7Cj4gKwl9Cj4g
Kwo+ICsJc3dpdGNoIChiaW9fb3Aob3JpZ19iaW8pKSB7Cj4gKwljYXNlIFJFUV9PUF9XUklURV9a
RVJPRVM6Cj4gKwljYXNlIFJFUV9PUF9XUklURV9TQU1FOgo+ICsJY2FzZSBSRVFfT1BfV1JJVEU6
Cj4gKwkJYnJlYWs7Cj4gKwljYXNlIFJFUV9PUF9aT05FX1JFU0VUOgo+ICsJY2FzZSBSRVFfT1Bf
Wk9ORV9GSU5JU0g6Cj4gKwkJZ290byBnb29kOwo+ICsJY2FzZSBSRVFfT1BfWk9ORV9BUFBFTkQ6
Cj4gKwkJLyoKPiArCQkgKiBDaGFuZ2Ugem9uZSBhcHBlbmQgb3BlcmF0aW9ucyBpbnRvIGEgbm9u
LW1lcmdlYWJsZSByZWd1bGFyCj4gKwkJICogd3JpdGVzIGRpcmVjdGVkIGF0IHRoZSBjdXJyZW50
IHdyaXRlIHBvaW50ZXIgcG9zaXRpb24gb2YgdGhlCj4gKwkJICogdGFyZ2V0IHpvbmUuCj4gKwkJ
ICovCj4gKwkJY2xvbmUtPmJpX29wZiA9IFJFUV9PUF9XUklURSB8IFJFUV9OT01FUkdFIHwKPiAr
CQkJKG9yaWdfYmlvLT5iaV9vcGYgJiAoflJFUV9PUF9NQVNLKSk7Cj4gKwkJY2xvbmUtPmJpX2l0
ZXIuYmlfc2VjdG9yID0KPiArCQkJb3JpZ19iaW8tPmJpX2l0ZXIuYmlfc2VjdG9yICsgbWQtPnp3
cF9vZmZzZXRbem5vXTsKPiArCQlicmVhazsKPiArCWRlZmF1bHQ6Cj4gKwkJRE1XQVJOX0xJTUlU
KCJJbnZhbGlkIEJJTyBvcGVyYXRpb24iKTsKPiArCQlnb3RvIG91dDsKPiArCX0KPiArCj4gKwkv
KiBDYW5ub3Qgd3JpdGUgdG8gYSBmdWxsIHpvbmUgKi8KPiArCWlmIChtZC0+endwX29mZnNldFt6
bm9dID49IHpvbmVfc2VjdG9ycykKPiArCQlnb3RvIG91dDsKPiArCj4gKwkvKiBXcml0ZXMgbXVz
dCBiZSBhbGlnbmVkIHRvIHRoZSB6b25lIHdyaXRlIHBvaW50ZXIgKi8KPiArCWlmICgoY2xvbmUt
PmJpX2l0ZXIuYmlfc2VjdG9yICYgKHpvbmVfc2VjdG9ycyAtIDEpKSAhPSBtZC0+endwX29mZnNl
dFt6bm9dKQo+ICsJCWdvdG8gb3V0Owo+ICsKPiArZ29vZDoKPiArCWdvb2RfaW8gPSB0cnVlOwo+
ICsKPiArb3V0Ogo+ICsJc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmbWQtPnp3cF9vZmZzZXRfbG9j
aywgZmxhZ3MpOwoKSSdtIG5vdCBoYXBweSB3aXRoIHRoZSBzcGlubG9jay4gQ2FuJ3QgdGhlIHNh
bWUgZWZmZWN0IGJlIGFjaGlldmVkIHdpdGggCnNvbWUgY2xldmVyIFJFQURfT05DRSgpL1dSSVRF
X09OQ0UvY21wZXhjaCBtYWdpYz8KRXNwZWNpYWxseSBhcyB5b3UgaGF2ZSBhIHNlcGFyYXRlICd6
b25lIGxvY2snIG1lY2hhbmlzbSAuLi4KCj4gKwo+ICsJcmV0dXJuIGdvb2RfaW87Cj4gK30KPiAr
Cj4gKy8qCj4gKyAqIFNlY29uZCBwaGFzZSBvZiBCSU8gbWFwcGluZyBmb3IgdGFyZ2V0cyB3aXRo
IHpvbmUgYXBwZW5kIGVtdWxhdGlvbjoKPiArICogdXBkYXRlIHRoZSB6b25lIHdyaXRlIHBvaW50
ZXIgb2Zmc2V0IGFycmF5IHRvIGFjY291bnQgZm9yIHRoZSBhZGRpdGlvbmFsCj4gKyAqIGRhdGEg
d3JpdHRlbiB0byBhIHpvbmUuIE5vdGUgdGhhdCBhdCB0aGlzIHBvaW50LCB0aGUgcmVtYXBwZWQg
Y2xvbmUgQklPCj4gKyAqIG1heSBhbHJlYWR5IGhhdmUgY29tcGxldGVkLCBzbyB3ZSBkbyBub3Qg
dG91Y2ggaXQuCj4gKyAqLwo+ICtzdGF0aWMgYmxrX3N0YXR1c190IGRtX3pvbmVfbWFwX2Jpb19l
bmQoc3RydWN0IG1hcHBlZF9kZXZpY2UgKm1kLAo+ICsJCQkJCXN0cnVjdCBiaW8gKm9yaWdfYmlv
LAo+ICsJCQkJCXVuc2lnbmVkIGludCBucl9zZWN0b3JzKQo+ICt7Cj4gKwl1bnNpZ25lZCBpbnQg
em5vID0gYmlvX3pvbmVfbm8ob3JpZ19iaW8pOwo+ICsJYmxrX3N0YXR1c190IHN0cyA9IEJMS19T
VFNfT0s7Cj4gKwl1bnNpZ25lZCBsb25nIGZsYWdzOwo+ICsKPiArCXNwaW5fbG9ja19pcnFzYXZl
KCZtZC0+endwX29mZnNldF9sb2NrLCBmbGFncyk7Cj4gKwo+ICsJLyogVXBkYXRlIHRoZSB6b25l
IHdwIG9mZnNldCAqLwo+ICsJc3dpdGNoIChiaW9fb3Aob3JpZ19iaW8pKSB7Cj4gKwljYXNlIFJF
UV9PUF9aT05FX1JFU0VUOgo+ICsJCW1kLT56d3Bfb2Zmc2V0W3pub10gPSAwOwo+ICsJCWJyZWFr
Owo+ICsJY2FzZSBSRVFfT1BfWk9ORV9GSU5JU0g6Cj4gKwkJbWQtPnp3cF9vZmZzZXRbem5vXSA9
IGJsa19xdWV1ZV96b25lX3NlY3RvcnMobWQtPnF1ZXVlKTsKPiArCQlicmVhazsKPiArCWNhc2Ug
UkVRX09QX1dSSVRFX1pFUk9FUzoKPiArCWNhc2UgUkVRX09QX1dSSVRFX1NBTUU6Cj4gKwljYXNl
IFJFUV9PUF9XUklURToKPiArCQltZC0+endwX29mZnNldFt6bm9dICs9IG5yX3NlY3RvcnM7Cj4g
KwkJYnJlYWs7Cj4gKwljYXNlIFJFUV9PUF9aT05FX0FQUEVORDoKPiArCQkvKgo+ICsJCSAqIENo
ZWNrIHRoYXQgdGhlIHRhcmdldCBkaWQgbm90IHRydW5jYXRlIHRoZSB3cml0ZSBvcGVyYXRpb24K
PiArCQkgKiBlbXVsYXRpbmcgYSB6b25lIGFwcGVuZC4KPiArCQkgKi8KPiArCQlpZiAobnJfc2Vj
dG9ycyAhPSBiaW9fc2VjdG9ycyhvcmlnX2JpbykpIHsKPiArCQkJRE1XQVJOX0xJTUlUKCJUcnVu
Y2F0ZWQgd3JpdGUgZm9yIHpvbmUgYXBwZW5kIik7Cj4gKwkJCXN0cyA9IEJMS19TVFNfSU9FUlI7
Cj4gKwkJCWJyZWFrOwo+ICsJCX0KPiArCQltZC0+endwX29mZnNldFt6bm9dICs9IG5yX3NlY3Rv
cnM7Cj4gKwkJYnJlYWs7Cj4gKwlkZWZhdWx0Ogo+ICsJCURNV0FSTl9MSU1JVCgiSW52YWxpZCBC
SU8gb3BlcmF0aW9uIik7Cj4gKwkJc3RzID0gQkxLX1NUU19JT0VSUjsKPiArCQlicmVhazsKPiAr
CX0KPiArCj4gKwlzcGluX3VubG9ja19pcnFyZXN0b3JlKCZtZC0+endwX29mZnNldF9sb2NrLCBm
bGFncyk7CgpZb3UgZG9uJ3QgbmVlZCB0aGUgc3BpbmxvY2sgaGVyZTsgdXNpbmcgV1JJVEVfT05D
RSgpIHNob3VsZCBiZSBzdWZmaWNpZW50LgoKPiArCj4gKwlyZXR1cm4gc3RzOwo+ICt9Cj4gKwo+
ICtzdGF0aWMgaW5saW5lIHZvaWQgZG1fem9uZV9sb2NrKHN0cnVjdCByZXF1ZXN0X3F1ZXVlICpx
LAo+ICsJCQkJdW5zaWduZWQgaW50IHpubywgc3RydWN0IGJpbyAqY2xvbmUpCj4gK3sKPiArCWlm
IChXQVJOX09OX09OQ0UoYmlvX2ZsYWdnZWQoY2xvbmUsIEJJT19aT05FX1dSSVRFX0xPQ0tFRCkp
KQo+ICsJCXJldHVybjsKPiArCj4gKwl3YWl0X29uX2JpdF9sb2NrX2lvKHEtPnNlcV96b25lc193
bG9jaywgem5vLCBUQVNLX1VOSU5URVJSVVBUSUJMRSk7Cj4gKwliaW9fc2V0X2ZsYWcoY2xvbmUs
IEJJT19aT05FX1dSSVRFX0xPQ0tFRCk7Cj4gK30KPiArCj4gK3N0YXRpYyBpbmxpbmUgdm9pZCBk
bV96b25lX3VubG9jayhzdHJ1Y3QgcmVxdWVzdF9xdWV1ZSAqcSwKPiArCQkJCSAgdW5zaWduZWQg
aW50IHpubywgc3RydWN0IGJpbyAqY2xvbmUpCj4gK3sKPiArCWlmICghYmlvX2ZsYWdnZWQoY2xv
bmUsIEJJT19aT05FX1dSSVRFX0xPQ0tFRCkpCj4gKwkJcmV0dXJuOwo+ICsKPiArCVdBUk5fT05f
T05DRSghdGVzdF9iaXQoem5vLCBxLT5zZXFfem9uZXNfd2xvY2spKTsKPiArCWNsZWFyX2JpdF91
bmxvY2soem5vLCBxLT5zZXFfem9uZXNfd2xvY2spOwo+ICsJc21wX21iX19hZnRlcl9hdG9taWMo
KTsKPiArCXdha2VfdXBfYml0KHEtPnNlcV96b25lc193bG9jaywgem5vKTsKPiArCj4gKwliaW9f
Y2xlYXJfZmxhZyhjbG9uZSwgQklPX1pPTkVfV1JJVEVfTE9DS0VEKTsKPiArfQo+ICsKPiArc3Rh
dGljIGJvb2wgZG1fbmVlZF96b25lX3dwX3RyYWNraW5nKHN0cnVjdCBiaW8gKm9yaWdfYmlvKQo+
ICt7Cj4gKwkvKgo+ICsJICogU3BlY2lhbCBwcm9jZXNzaW5nIGlzIG5vdCBuZWVkZWQgZm9yIG9w
ZXJhdGlvbnMgdGhhdCBkbyBub3QgbmVlZCB0aGUKPiArCSAqIHpvbmUgd3JpdGUgbG9jaywgdGhh
dCBpcywgYWxsIG9wZXJhdGlvbnMgdGhhdCB0YXJnZXQgY29udmVudGlvbmFsCj4gKwkgKiB6b25l
cyBhbmQgYWxsIG9wZXJhdGlvbnMgdGhhdCBkbyBub3QgbW9kaWZ5IGRpcmVjdGx5IGEgc2VxdWVu
dGlhbAo+ICsJICogem9uZSB3cml0ZSBwb2ludGVyLgo+ICsJICovCj4gKwlpZiAob3BfaXNfZmx1
c2gob3JpZ19iaW8tPmJpX29wZikgJiYgIWJpb19zZWN0b3JzKG9yaWdfYmlvKSkKPiArCQlyZXR1
cm4gZmFsc2U7Cj4gKwlzd2l0Y2ggKGJpb19vcChvcmlnX2JpbykpIHsKPiArCWNhc2UgUkVRX09Q
X1dSSVRFX1pFUk9FUzoKPiArCWNhc2UgUkVRX09QX1dSSVRFX1NBTUU6Cj4gKwljYXNlIFJFUV9P
UF9XUklURToKPiArCWNhc2UgUkVRX09QX1pPTkVfUkVTRVQ6Cj4gKwljYXNlIFJFUV9PUF9aT05F
X0ZJTklTSDoKPiArCWNhc2UgUkVRX09QX1pPTkVfQVBQRU5EOgo+ICsJCXJldHVybiBiaW9fem9u
ZV9pc19zZXEob3JpZ19iaW8pOwo+ICsJZGVmYXVsdDoKPiArCQlyZXR1cm4gZmFsc2U7Cj4gKwl9
Cj4gK30KPiArCj4gKy8qCj4gKyAqIFNwZWNpYWwgSU8gbWFwcGluZyBmb3IgdGFyZ2V0cyBuZWVk
aW5nIHpvbmUgYXBwZW5kIGVtdWxhdGlvbi4KPiArICovCj4gK2ludCBkbV96b25lX21hcF9iaW8o
c3RydWN0IGRtX3RhcmdldF9pbyAqdGlvKQo+ICt7Cj4gKwlzdHJ1Y3QgZG1faW8gKmlvID0gdGlv
LT5pbzsKPiArCXN0cnVjdCBkbV90YXJnZXQgKnRpID0gdGlvLT50aTsKPiArCXN0cnVjdCBtYXBw
ZWRfZGV2aWNlICptZCA9IGlvLT5tZDsKPiArCXN0cnVjdCByZXF1ZXN0X3F1ZXVlICpxID0gbWQt
PnF1ZXVlOwo+ICsJc3RydWN0IGJpbyAqb3JpZ19iaW8gPSBpby0+b3JpZ19iaW87Cj4gKwlzdHJ1
Y3QgYmlvICpjbG9uZSA9ICZ0aW8tPmNsb25lOwo+ICsJdW5zaWduZWQgaW50IHpubzsKPiArCWJs
a19zdGF0dXNfdCBzdHM7Cj4gKwlpbnQgcjsKPiArCj4gKwkvKgo+ICsJICogSU9zIHRoYXQgZG8g
bm90IGNoYW5nZSBhIHpvbmUgd3JpdGUgcG9pbnRlciBkbyBub3QgbmVlZAo+ICsJICogYW55IGFk
ZGl0aW9uYWwgc3BlY2lhbCBwcm9jZXNzaW5nLgo+ICsJICovCj4gKwlpZiAoIWRtX25lZWRfem9u
ZV93cF90cmFja2luZyhvcmlnX2JpbykpCj4gKwkJcmV0dXJuIHRpLT50eXBlLT5tYXAodGksIGNs
b25lKTsKPiArCj4gKwkvKiBMb2NrIHRoZSB0YXJnZXQgem9uZSAqLwo+ICsJem5vID0gYmlvX3pv
bmVfbm8ob3JpZ19iaW8pOwo+ICsJZG1fem9uZV9sb2NrKHEsIHpubywgY2xvbmUpOwo+ICsKPiAr
CS8qCj4gKwkgKiBDaGVjayB0aGF0IHRoZSBiaW8gYW5kIHRoZSB0YXJnZXQgem9uZSB3cml0ZSBw
b2ludGVyIG9mZnNldCBhcmUKPiArCSAqIGJvdGggdmFsaWQsIGFuZCBpZiB0aGUgYmlvIGlzIGEg
em9uZSBhcHBlbmQsIHJlbWFwIGl0IHRvIGEgd3JpdGUuCj4gKwkgKi8KPiArCWlmICghZG1fem9u
ZV9tYXBfYmlvX2JlZ2luKG1kLCBvcmlnX2JpbywgY2xvbmUpKSB7Cj4gKwkJZG1fem9uZV91bmxv
Y2socSwgem5vLCBjbG9uZSk7Cj4gKwkJcmV0dXJuIERNX01BUElPX0tJTEw7Cj4gKwl9Cj4gKwo+
ICsJLyoKPiArCSAqIFRoZSB0YXJnZXQgbWFwIGZ1bmN0aW9uIG1heSBpc3N1ZSBhbmQgY29tcGxl
dGUgdGhlIElPIHF1aWNrbHkuCj4gKwkgKiBUYWtlIGFuIGV4dHJhIHJlZmVyZW5jZSBvbiB0aGUg
SU8gdG8gbWFrZSBzdXJlIGl0IGRvZXMgZGlzYXBwZWFyCj4gKwkgKiB1bnRpbCB3ZSBydW4gZG1f
em9uZV9tYXBfYmlvX2VuZCgpLgo+ICsJICovCj4gKwlkbV9pb19pbmNfcGVuZGluZyhpbyk7Cj4g
Kwo+ICsJLyogTGV0IHRoZSB0YXJnZXQgZG8gaXRzIHdvcmsgKi8KPiArCXIgPSB0aS0+dHlwZS0+
bWFwKHRpLCBjbG9uZSk7Cj4gKwlzd2l0Y2ggKHIpIHsKPiArCWNhc2UgRE1fTUFQSU9fU1VCTUlU
VEVEOgo+ICsJCS8qCj4gKwkJICogVGhlIHRhcmdldCBzdWJtaXR0ZWQgdGhlIGNsb25lIEJJTy4g
VGhlIHRhcmdldCB6b25lIHdpbGwKPiArCQkgKiBiZSB1bmxvY2tlZCBvbiBjb21wbGV0aW9uIG9m
IHRoZSBjbG9uZS4KPiArCQkgKi8KPiArCQlzdHMgPSBkbV96b25lX21hcF9iaW9fZW5kKG1kLCBv
cmlnX2JpbywgKnRpby0+bGVuX3B0cik7Cj4gKwkJYnJlYWs7Cj4gKwljYXNlIERNX01BUElPX1JF
TUFQUEVEOgo+ICsJCS8qCj4gKwkJICogVGhlIHRhcmdldCBvbmx5IHJlbWFwcGVkIHRoZSBjbG9u
ZSBCSU8uIEluIGNhc2Ugb2YgZXJyb3IsCj4gKwkJICogdW5sb2NrIHRoZSB0YXJnZXQgem9uZSBo
ZXJlIGFzIHRoZSBjbG9uZSB3aWxsIG5vdCBiZQo+ICsJCSAqIHN1Ym1pdHRlZC4KPiArCQkgKi8K
PiArCQlzdHMgPSBkbV96b25lX21hcF9iaW9fZW5kKG1kLCBvcmlnX2JpbywgKnRpby0+bGVuX3B0
cik7Cj4gKwkJaWYgKHN0cyAhPSBCTEtfU1RTX09LKQo+ICsJCQlkbV96b25lX3VubG9jayhxLCB6
bm8sIGNsb25lKTsKPiArCQlicmVhazsKPiArCWNhc2UgRE1fTUFQSU9fUkVRVUVVRToKPiArCWNh
c2UgRE1fTUFQSU9fS0lMTDoKPiArCWRlZmF1bHQ6Cj4gKwkJZG1fem9uZV91bmxvY2socSwgem5v
LCBjbG9uZSk7Cj4gKwkJc3RzID0gQkxLX1NUU19JT0VSUjsKPiArCQlicmVhazsKPiArCX0KPiAr
Cj4gKwkvKiBEcm9wIHRoZSBleHRyYSByZWZlcmVuY2Ugb24gdGhlIElPICovCj4gKwlkbV9pb19k
ZWNfcGVuZGluZyhpbywgc3RzKTsKPiArCj4gKwlpZiAoc3RzICE9IEJMS19TVFNfT0spCj4gKwkJ
cmV0dXJuIERNX01BUElPX0tJTEw7Cj4gKwo+ICsJcmV0dXJuIHI7Cj4gK30KPiArCj4gKy8qCj4g
KyAqIElPIGNvbXBsZXRpb24gY2FsbGJhY2sgY2FsbGVkIGZyb20gY2xvbmVfZW5kaW8oKS4KPiAr
ICovCj4gK3ZvaWQgZG1fem9uZV9lbmRpbyhzdHJ1Y3QgZG1faW8gKmlvLCBzdHJ1Y3QgYmlvICpj
bG9uZSkKPiArewo+ICsJc3RydWN0IG1hcHBlZF9kZXZpY2UgKm1kID0gaW8tPm1kOwo+ICsJc3Ry
dWN0IHJlcXVlc3RfcXVldWUgKnEgPSBtZC0+cXVldWU7Cj4gKwlzdHJ1Y3QgYmlvICpvcmlnX2Jp
byA9IGlvLT5vcmlnX2JpbzsKPiArCXVuc2lnbmVkIGxvbmcgZmxhZ3M7Cj4gKwl1bnNpZ25lZCBp
bnQgem5vOwo+ICsKPiArCS8qCj4gKwkgKiBGb3IgdGFyZ2V0cyB0aGF0IGRvIG5vdCBlbXVsYXRl
IHpvbmUgYXBwZW5kLCB3ZSBvbmx5IG5lZWQgdG8KPiArCSAqIGhhbmRsZSBuYXRpdmUgem9uZS1h
cHBlbmQgYmlvcy4KPiArCSAqLwo+ICsJaWYgKCFkbV9lbXVsYXRlX3pvbmVfYXBwZW5kKG1kKSkg
ewo+ICsJCS8qCj4gKwkJICogR2V0IHRoZSBvZmZzZXQgd2l0aGluIHRoZSB6b25lIG9mIHRoZSB3
cml0dGVuIHNlY3Rvcgo+ICsJCSAqIGFuZCBhZGQgdGhhdCB0byB0aGUgb3JpZ2luYWwgYmlvIHNl
Y3RvciBwb3NpdGlvbi4KPiArCQkgKi8KPiArCQlpZiAoY2xvbmUtPmJpX3N0YXR1cyA9PSBCTEtf
U1RTX09LICYmCj4gKwkJICAgIGJpb19vcChjbG9uZSkgPT0gUkVRX09QX1pPTkVfQVBQRU5EKSB7
Cj4gKwkJCXNlY3Rvcl90IG1hc2sgPSAoc2VjdG9yX3QpYmxrX3F1ZXVlX3pvbmVfc2VjdG9ycyhx
KSAtIDE7Cj4gKwo+ICsJCQlvcmlnX2Jpby0+YmlfaXRlci5iaV9zZWN0b3IgKz0KPiArCQkJCWNs
b25lLT5iaV9pdGVyLmJpX3NlY3RvciAmIG1hc2s7Cj4gKwkJfQo+ICsKPiArCQlyZXR1cm47Cj4g
Kwl9Cj4gKwo+ICsJLyoKPiArCSAqIEZvciB0YXJnZXRzIHRoYXQgZG8gZW11bGF0ZSB6b25lIGFw
cGVuZCwgaWYgdGhlIGNsb25lIEJJTyBkb2VzIG5vdAo+ICsJICogb3duIHRoZSB0YXJnZXQgem9u
ZSB3cml0ZSBsb2NrLCB3ZSBoYXZlIG5vdGhpbmcgdG8gZG8uCj4gKwkgKi8KPiArCWlmICghYmlv
X2ZsYWdnZWQoY2xvbmUsIEJJT19aT05FX1dSSVRFX0xPQ0tFRCkpCj4gKwkJcmV0dXJuOwo+ICsK
PiArCXpubyA9IGJpb196b25lX25vKG9yaWdfYmlvKTsKPiArCj4gKwlzcGluX2xvY2tfaXJxc2F2
ZSgmbWQtPnp3cF9vZmZzZXRfbG9jaywgZmxhZ3MpOwo+ICsJaWYgKGNsb25lLT5iaV9zdGF0dXMg
IT0gQkxLX1NUU19PSykgewo+ICsJCS8qCj4gKwkJICogQklPcyB0aGF0IG1vZGlmeSBhIHpvbmUg
d3JpdGUgcG9pbnRlciBtYXkgbGVhdmUgdGhlIHpvbmUKPiArCQkgKiBpbiBhbiB1bmtub3duIHN0
YXRlIGluIGNhc2Ugb2YgZmFpbHVyZSAoZS5nLiB0aGUgd3JpdGUKPiArCQkgKiBwb2ludGVyIHdh
cyBvbmx5IHBhcnRpYWxseSBhZHZhbmNlZCkuIEluIHRoaXMgY2FzZSwgc2V0Cj4gKwkJICogdGhl
IHRhcmdldCB6b25lIHdyaXRlIHBvaW50ZXIgYXMgaW52YWxpZCB1bmxlc3MgaXQgaXMKPiArCQkg
KiBhbHJlYWR5IGJlaW5nIHVwZGF0ZWQuCj4gKwkJICovCj4gKwkJaWYgKG1kLT56d3Bfb2Zmc2V0
W3pub10gIT0gRE1fWk9ORV9VUERBVElOR19XUF9PRlNUKQo+ICsJCQltZC0+endwX29mZnNldFt6
bm9dID0gRE1fWk9ORV9JTlZBTElEX1dQX09GU1Q7Cj4gKwl9IGVsc2UgaWYgKGJpb19vcChvcmln
X2JpbykgPT0gUkVRX09QX1pPTkVfQVBQRU5EKSB7Cj4gKwkJLyoKPiArCQkgKiBHZXQgdGhlIHdy
aXR0ZW4gc2VjdG9yIGZvciB6b25lIGFwcGVuZCBvcGVyYXRpb24gdGhhdCB3ZXJlCj4gKwkJICog
ZW11bGF0ZWQgdXNpbmcgcmVndWxhciB3cml0ZSBvcGVyYXRpb25zLgo+ICsJCSAqLwo+ICsJCWlm
IChXQVJOX09OX09OQ0UobWQtPnp3cF9vZmZzZXRbem5vXSA8IGJpb19zZWN0b3JzKG9yaWdfYmlv
KSkpCj4gKwkJCW1kLT56d3Bfb2Zmc2V0W3pub10gPSBETV9aT05FX0lOVkFMSURfV1BfT0ZTVDsK
PiArCQllbHNlCj4gKwkJCW9yaWdfYmlvLT5iaV9pdGVyLmJpX3NlY3RvciArPQo+ICsJCQkJbWQt
Pnp3cF9vZmZzZXRbem5vXSAtIGJpb19zZWN0b3JzKG9yaWdfYmlvKTsKPiArCX0KPiArCXNwaW5f
dW5sb2NrX2lycXJlc3RvcmUoJm1kLT56d3Bfb2Zmc2V0X2xvY2ssIGZsYWdzKTsKPiArCgpTaW1p
bGFyIGNvbW1lbnRzIHRvIHRoZSBzcGlubG9jayBoZXJlLgoKPiArCWRtX3pvbmVfdW5sb2NrKHEs
IHpubywgY2xvbmUpOwo+ICAgfQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL21kL2RtLmMgYi9kcml2
ZXJzL21kL2RtLmMKPiBpbmRleCA1NjM1MDQxNjNiNzQuLjUwMzhiZjUyMmIwZCAxMDA2NDQKPiAt
LS0gYS9kcml2ZXJzL21kL2RtLmMKPiArKysgYi9kcml2ZXJzL21kL2RtLmMKPiBAQCAtODc1LDcg
Kzg3NSw2IEBAIHN0YXRpYyB2b2lkIGNsb25lX2VuZGlvKHN0cnVjdCBiaW8gKmJpbykKPiAgIAlz
dHJ1Y3QgZG1faW8gKmlvID0gdGlvLT5pbzsKPiAgIAlzdHJ1Y3QgbWFwcGVkX2RldmljZSAqbWQg
PSB0aW8tPmlvLT5tZDsKPiAgIAlkbV9lbmRpb19mbiBlbmRpbyA9IHRpby0+dGktPnR5cGUtPmVu
ZF9pbzsKPiAtCXN0cnVjdCBiaW8gKm9yaWdfYmlvID0gaW8tPm9yaWdfYmlvOwo+ICAgCXN0cnVj
dCByZXF1ZXN0X3F1ZXVlICpxID0gYmlvLT5iaV9iZGV2LT5iZF9kaXNrLT5xdWV1ZTsKPiAgIAo+
ICAgCWlmICh1bmxpa2VseShlcnJvciA9PSBCTEtfU1RTX1RBUkdFVCkpIHsKPiBAQCAtODkwLDE3
ICs4ODksOCBAQCBzdGF0aWMgdm9pZCBjbG9uZV9lbmRpbyhzdHJ1Y3QgYmlvICpiaW8pCj4gICAJ
CQlkaXNhYmxlX3dyaXRlX3plcm9lcyhtZCk7Cj4gICAJfQo+ICAgCj4gLQkvKgo+IC0JICogRm9y
IHpvbmUtYXBwZW5kIGJpb3MgZ2V0IG9mZnNldCBpbiB6b25lIG9mIHRoZSB3cml0dGVuCj4gLQkg
KiBzZWN0b3IgYW5kIGFkZCB0aGF0IHRvIHRoZSBvcmlnaW5hbCBiaW8gc2VjdG9yIHBvcy4KPiAt
CSAqLwo+IC0JaWYgKGJpb19vcChvcmlnX2JpbykgPT0gUkVRX09QX1pPTkVfQVBQRU5EKSB7Cj4g
LQkJc2VjdG9yX3Qgd3JpdHRlbl9zZWN0b3IgPSBiaW8tPmJpX2l0ZXIuYmlfc2VjdG9yOwo+IC0J
CXN0cnVjdCByZXF1ZXN0X3F1ZXVlICpxID0gb3JpZ19iaW8tPmJpX2JkZXYtPmJkX2Rpc2stPnF1
ZXVlOwo+IC0JCXU2NCBtYXNrID0gKHU2NClibGtfcXVldWVfem9uZV9zZWN0b3JzKHEpIC0gMTsK
PiAtCj4gLQkJb3JpZ19iaW8tPmJpX2l0ZXIuYmlfc2VjdG9yICs9IHdyaXR0ZW5fc2VjdG9yICYg
bWFzazsKPiAtCX0KPiArCWlmIChibGtfcXVldWVfaXNfem9uZWQocSkpCj4gKwkJZG1fem9uZV9l
bmRpbyhpbywgYmlvKTsKPiAgIAo+ICAgCWlmIChlbmRpbykgewo+ICAgCQlpbnQgciA9IGVuZGlv
KHRpby0+dGksIGJpbywgJmVycm9yKTsKPiBAQCAtMTIxMyw3ICsxMjAzLDE2IEBAIHN0YXRpYyBi
bGtfcWNfdCBfX21hcF9iaW8oc3RydWN0IGRtX3RhcmdldF9pbyAqdGlvKQo+ICAgCQlkb3duKCZt
ZC0+c3dhcF9iaW9zX3NlbWFwaG9yZSk7Cj4gICAJfQo+ICAgCj4gLQlyID0gdGktPnR5cGUtPm1h
cCh0aSwgY2xvbmUpOwo+ICsJLyoKPiArCSAqIENoZWNrIGlmIHRoZSBJTyBuZWVkcyBhIHNwZWNp
YWwgbWFwcGluZyBkdWUgdG8gem9uZSBhcHBlbmQgZW11bGF0aW9uCj4gKwkgKiBvbiB6b25lZCB0
YXJnZXQuIEluIHRoaXMgY2FzZSwgZG1fem9uZV9tYXBfYmVnaW4oKSBjYWxscyB0aGUgdGFyZ2V0
Cj4gKwkgKiBtYXAgb3BlcmF0aW9uLgo+ICsJICovCj4gKwlpZiAoZG1fZW11bGF0ZV96b25lX2Fw
cGVuZChpby0+bWQpKQo+ICsJCXIgPSBkbV96b25lX21hcF9iaW8odGlvKTsKPiArCWVsc2UKPiAr
CQlyID0gdGktPnR5cGUtPm1hcCh0aSwgY2xvbmUpOwo+ICsKPiAgIAlzd2l0Y2ggKHIpIHsKPiAg
IAljYXNlIERNX01BUElPX1NVQk1JVFRFRDoKPiAgIAkJYnJlYWs7Cj4gQEAgLTE3NTcsNiArMTc1
Niw3IEBAIHN0YXRpYyBzdHJ1Y3QgbWFwcGVkX2RldmljZSAqYWxsb2NfZGV2KGludCBtaW5vcikK
PiAgIAlJTklUX0xJU1RfSEVBRCgmbWQtPnVldmVudF9saXN0KTsKPiAgIAlJTklUX0xJU1RfSEVB
RCgmbWQtPnRhYmxlX2RldmljZXMpOwo+ICAgCXNwaW5fbG9ja19pbml0KCZtZC0+dWV2ZW50X2xv
Y2spOwo+ICsJZG1faW5pdF96b25lZF9kZXYobWQpOwo+ICAgCj4gICAJLyoKPiAgIAkgKiBkZWZh
dWx0IHRvIGJpby1iYXNlZCB1bnRpbCBETSB0YWJsZSBpcyBsb2FkZWQgYW5kIG1kLT50eXBlCj4g
QEAgLTE5NTYsMTEgKzE5NTYsMTYgQEAgc3RhdGljIHN0cnVjdCBkbV90YWJsZSAqX19iaW5kKHN0
cnVjdCBtYXBwZWRfZGV2aWNlICptZCwgc3RydWN0IGRtX3RhYmxlICp0LAo+ICAgCQlnb3RvIG91
dDsKPiAgIAl9Cj4gICAKPiArCXJldCA9IGRtX3RhYmxlX3NldF9yZXN0cmljdGlvbnModCwgcSwg
bGltaXRzKTsKPiArCWlmIChyZXQpIHsKPiArCQlvbGRfbWFwID0gRVJSX1BUUihyZXQpOwo+ICsJ
CWdvdG8gb3V0Owo+ICsJfQo+ICsKPiAgIAlvbGRfbWFwID0gcmN1X2RlcmVmZXJlbmNlX3Byb3Rl
Y3RlZChtZC0+bWFwLCBsb2NrZGVwX2lzX2hlbGQoJm1kLT5zdXNwZW5kX2xvY2spKTsKPiAgIAly
Y3VfYXNzaWduX3BvaW50ZXIobWQtPm1hcCwgKHZvaWQgKil0KTsKPiAgIAltZC0+aW1tdXRhYmxl
X3RhcmdldF90eXBlID0gZG1fdGFibGVfZ2V0X2ltbXV0YWJsZV90YXJnZXRfdHlwZSh0KTsKPiAg
IAo+IC0JZG1fdGFibGVfc2V0X3Jlc3RyaWN0aW9ucyh0LCBxLCBsaW1pdHMpOwo+ICAgCWlmIChv
bGRfbWFwKQo+ICAgCQlkbV9zeW5jX3RhYmxlKG1kKTsKPiAgIAo+IEBAIC0yMDc5LDcgKzIwODQs
MTAgQEAgaW50IGRtX3NldHVwX21kX3F1ZXVlKHN0cnVjdCBtYXBwZWRfZGV2aWNlICptZCwgc3Ry
dWN0IGRtX3RhYmxlICp0KQo+ICAgCQlETUVSUigiQ2Fubm90IGNhbGN1bGF0ZSBpbml0aWFsIHF1
ZXVlIGxpbWl0cyIpOwo+ICAgCQlyZXR1cm4gcjsKPiAgIAl9Cj4gLQlkbV90YWJsZV9zZXRfcmVz
dHJpY3Rpb25zKHQsIG1kLT5xdWV1ZSwgJmxpbWl0cyk7Cj4gKwlyID0gZG1fdGFibGVfc2V0X3Jl
c3RyaWN0aW9ucyh0LCBtZC0+cXVldWUsICZsaW1pdHMpOwo+ICsJaWYgKHIpCj4gKwkJcmV0dXJu
IHI7Cj4gKwo+ICAgCWJsa19yZWdpc3Rlcl9xdWV1ZShtZC0+ZGlzayk7Cj4gICAKPiAgIAlyZXR1
cm4gMDsKPiBAQCAtMjE4OCw2ICsyMTk2LDcgQEAgc3RhdGljIHZvaWQgX19kbV9kZXN0cm95KHN0
cnVjdCBtYXBwZWRfZGV2aWNlICptZCwgYm9vbCB3YWl0KQo+ICAgCQkgICAgICAgZG1fZGV2aWNl
X25hbWUobWQpLCBhdG9taWNfcmVhZCgmbWQtPmhvbGRlcnMpKTsKPiAgIAo+ICAgCWRtX3N5c2Zz
X2V4aXQobWQpOwo+ICsJZG1fY2xlYW51cF96b25lZF9kZXYobWQpOwo+ICAgCWRtX3RhYmxlX2Rl
c3Ryb3koX191bmJpbmQobWQpKTsKPiAgIAlmcmVlX2RldihtZCk7Cj4gICB9Cj4gZGlmZiAtLWdp
dCBhL2RyaXZlcnMvbWQvZG0uaCBiL2RyaXZlcnMvbWQvZG0uaAo+IGluZGV4IDM5YzI0MzI1OGUy
NC4uNjVmMjBkOGNjNDE1IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvbWQvZG0uaAo+ICsrKyBiL2Ry
aXZlcnMvbWQvZG0uaAo+IEBAIC00NSw2ICs0NSw4IEBAIHN0cnVjdCBkbV9kZXZfaW50ZXJuYWwg
ewo+ICAgCj4gICBzdHJ1Y3QgZG1fdGFibGU7Cj4gICBzdHJ1Y3QgZG1fbWRfbWVtcG9vbHM7Cj4g
K3N0cnVjdCBkbV90YXJnZXRfaW87Cj4gK3N0cnVjdCBkbV9pbzsKPiAgIAo+ICAgLyotLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LQo+ICAgICogSW50ZXJuYWwgdGFibGUgZnVuY3Rpb25zLgo+IEBAIC01Niw4ICs1OCw4IEBAIHN0
cnVjdCBkbV90YXJnZXQgKmRtX3RhYmxlX2ZpbmRfdGFyZ2V0KHN0cnVjdCBkbV90YWJsZSAqdCwg
c2VjdG9yX3Qgc2VjdG9yKTsKPiAgIGJvb2wgZG1fdGFibGVfaGFzX25vX2RhdGFfZGV2aWNlcyhz
dHJ1Y3QgZG1fdGFibGUgKnRhYmxlKTsKPiAgIGludCBkbV9jYWxjdWxhdGVfcXVldWVfbGltaXRz
KHN0cnVjdCBkbV90YWJsZSAqdGFibGUsCj4gICAJCQkgICAgICBzdHJ1Y3QgcXVldWVfbGltaXRz
ICpsaW1pdHMpOwo+IC12b2lkIGRtX3RhYmxlX3NldF9yZXN0cmljdGlvbnMoc3RydWN0IGRtX3Rh
YmxlICp0LCBzdHJ1Y3QgcmVxdWVzdF9xdWV1ZSAqcSwKPiAtCQkJICAgICAgIHN0cnVjdCBxdWV1
ZV9saW1pdHMgKmxpbWl0cyk7Cj4gK2ludCBkbV90YWJsZV9zZXRfcmVzdHJpY3Rpb25zKHN0cnVj
dCBkbV90YWJsZSAqdCwgc3RydWN0IHJlcXVlc3RfcXVldWUgKnEsCj4gKwkJCSAgICAgIHN0cnVj
dCBxdWV1ZV9saW1pdHMgKmxpbWl0cyk7Cj4gICBzdHJ1Y3QgbGlzdF9oZWFkICpkbV90YWJsZV9n
ZXRfZGV2aWNlcyhzdHJ1Y3QgZG1fdGFibGUgKnQpOwo+ICAgdm9pZCBkbV90YWJsZV9wcmVzdXNw
ZW5kX3RhcmdldHMoc3RydWN0IGRtX3RhYmxlICp0KTsKPiAgIHZvaWQgZG1fdGFibGVfcHJlc3Vz
cGVuZF91bmRvX3RhcmdldHMoc3RydWN0IGRtX3RhYmxlICp0KTsKPiBAQCAtMTAzLDE3ICsxMDUs
MjcgQEAgaW50IGRtX3NldHVwX21kX3F1ZXVlKHN0cnVjdCBtYXBwZWRfZGV2aWNlICptZCwgc3Ry
dWN0IGRtX3RhYmxlICp0KTsKPiAgIC8qCj4gICAgKiBab25lZCB0YXJnZXRzIHJlbGF0ZWQgZnVu
Y3Rpb25zLgo+ICAgICovCj4gLXZvaWQgZG1fc2V0X3pvbmVzX3Jlc3RyaWN0aW9ucyhzdHJ1Y3Qg
ZG1fdGFibGUgKnQsIHN0cnVjdCByZXF1ZXN0X3F1ZXVlICpxKTsKPiAraW50IGRtX3NldF96b25l
c19yZXN0cmljdGlvbnMoc3RydWN0IGRtX3RhYmxlICp0LCBzdHJ1Y3QgcmVxdWVzdF9xdWV1ZSAq
cSk7Cj4gK3ZvaWQgZG1fem9uZV9lbmRpbyhzdHJ1Y3QgZG1faW8gKmlvLCBzdHJ1Y3QgYmlvICpj
bG9uZSk7Cj4gICAjaWZkZWYgQ09ORklHX0JMS19ERVZfWk9ORUQKPiArdm9pZCBkbV9pbml0X3pv
bmVkX2RldihzdHJ1Y3QgbWFwcGVkX2RldmljZSAqbWQpOwo+ICt2b2lkIGRtX2NsZWFudXBfem9u
ZWRfZGV2KHN0cnVjdCBtYXBwZWRfZGV2aWNlICptZCk7Cj4gICBpbnQgZG1fYmxrX3JlcG9ydF96
b25lcyhzdHJ1Y3QgZ2VuZGlzayAqZGlzaywgc2VjdG9yX3Qgc2VjdG9yLAo+ICAgCQkJdW5zaWdu
ZWQgaW50IG5yX3pvbmVzLCByZXBvcnRfem9uZXNfY2IgY2IsIHZvaWQgKmRhdGEpOwo+ICAgYm9v
bCBkbV9pc196b25lX3dyaXRlKHN0cnVjdCBtYXBwZWRfZGV2aWNlICptZCwgc3RydWN0IGJpbyAq
YmlvKTsKPiAraW50IGRtX3pvbmVfbWFwX2JpbyhzdHJ1Y3QgZG1fdGFyZ2V0X2lvICppbyk7Cj4g
ICAjZWxzZQo+ICtzdGF0aWMgaW5saW5lIHZvaWQgZG1faW5pdF96b25lZF9kZXYoc3RydWN0IG1h
cHBlZF9kZXZpY2UgKm1kKSB7fQo+ICtzdGF0aWMgaW5saW5lIHZvaWQgZG1fY2xlYW51cF96b25l
ZF9kZXYoc3RydWN0IG1hcHBlZF9kZXZpY2UgKm1kKSB7fQo+ICAgI2RlZmluZSBkbV9ibGtfcmVw
b3J0X3pvbmVzCU5VTEwKPiAgIHN0YXRpYyBpbmxpbmUgYm9vbCBkbV9pc196b25lX3dyaXRlKHN0
cnVjdCBtYXBwZWRfZGV2aWNlICptZCwgc3RydWN0IGJpbyAqYmlvKQo+ICAgewo+ICAgCXJldHVy
biBmYWxzZTsKPiAgIH0KPiArc3RhdGljIGlubGluZSBpbnQgZG1fem9uZV9tYXBfYmlvKHN0cnVj
dCBkbV90YXJnZXRfaW8gKnRpbykKPiArewo+ICsJcmV0dXJuIERNX01BUElPX0tJTEw7Cj4gK30K
PiAgICNlbmRpZgo+ICAgCj4gICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGlu
dXgvZGV2aWNlLW1hcHBlci5oIGIvaW5jbHVkZS9saW51eC9kZXZpY2UtbWFwcGVyLmgKPiBpbmRl
eCBjYWVhMGEwNzlkMmQuLjc0NTdkNDlhY2Y5YSAxMDA2NDQKPiAtLS0gYS9pbmNsdWRlL2xpbnV4
L2RldmljZS1tYXBwZXIuaAo+ICsrKyBiL2luY2x1ZGUvbGludXgvZGV2aWNlLW1hcHBlci5oCj4g
QEAgLTM2MSw2ICszNjEsMTIgQEAgc3RydWN0IGRtX3RhcmdldCB7Cj4gICAJICogU2V0IGlmIHdl
IG5lZWQgdG8gbGltaXQgdGhlIG51bWJlciBvZiBpbi1mbGlnaHQgYmlvcyB3aGVuIHN3YXBwaW5n
Lgo+ICAgCSAqLwo+ICAgCWJvb2wgbGltaXRfc3dhcF9iaW9zOjE7Cj4gKwo+ICsJLyoKPiArCSAq
IFNldCBpZiB0aGlzIHRhcmdldCBpbXBsZW1lbnRzIGEgYSB6b25lZCBkZXZpY2UgYW5kIG5lZWRz
IGVtdWxhdGlvbiBvZgo+ICsJICogem9uZSBhcHBlbmQgb3BlcmF0aW9ucyB1c2luZyByZWd1bGFy
IHdyaXRlcy4KPiArCSAqLwo+ICsJYm9vbCBlbXVsYXRlX3pvbmVfYXBwZW5kOjE7Cj4gICB9Owo+
ICAgCj4gICB2b2lkICpkbV9wZXJfYmlvX2RhdGEoc3RydWN0IGJpbyAqYmlvLCBzaXplX3QgZGF0
YV9zaXplKTsKPiAKQ2hlZXJzLAoKSGFubmVzCi0tIApEci4gSGFubmVzIFJlaW5lY2tlICAgICAg
ICAgICAgICAgIEtlcm5lbCBTdG9yYWdlIEFyY2hpdGVjdApoYXJlQHN1c2UuZGUgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICArNDkgOTExIDc0MDUzIDY4OApTVVNFIFNvZnR3YXJlIFNvbHV0
aW9ucyBHbWJILCBNYXhmZWxkc3RyLiA1LCA5MDQwOSBOw7xybmJlcmcKSFJCIDM2ODA5IChBRyBO
w7xybmJlcmcpLCBHZXNjaMOkZnRzZsO8aHJlcjogRmVsaXggSW1lbmTDtnJmZmVyCgoKLS0KZG0t
ZGV2ZWwgbWFpbGluZyBsaXN0CmRtLWRldmVsQHJlZGhhdC5jb20KaHR0cHM6Ly9saXN0bWFuLnJl
ZGhhdC5jb20vbWFpbG1hbi9saXN0aW5mby9kbS1kZXZlbA==

